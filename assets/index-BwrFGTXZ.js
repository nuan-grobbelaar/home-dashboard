(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function YR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ag={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function XR(){if(sE)return Wl;sE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Wl.Fragment=t,Wl.jsx=n,Wl.jsxs=n,Wl}var aE;function QR(){return aE||(aE=1,ag.exports=XR()),ag.exports}var dt=QR(),og={exports:{}},Jl={},lg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function ZR(){return oE||(oE=1,function(e){function t(Z,ot){var mt=Z.length;Z.push(ot);t:for(;0<mt;){var Rt=mt-1>>>1,P=Z[Rt];if(0<a(P,ot))Z[Rt]=ot,Z[mt]=P,mt=Rt;else break t}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ot=Z[0],mt=Z.pop();if(mt!==ot){Z[0]=mt;t:for(var Rt=0,P=Z.length,rt=P>>>1;Rt<rt;){var ut=2*(Rt+1)-1,st=Z[ut],yt=ut+1,Ot=Z[yt];if(0>a(st,mt))yt<P&&0>a(Ot,st)?(Z[Rt]=Ot,Z[yt]=mt,Rt=yt):(Z[Rt]=st,Z[ut]=mt,Rt=ut);else if(yt<P&&0>a(Ot,mt))Z[Rt]=Ot,Z[yt]=mt,Rt=yt;else break t}}return ot}function a(Z,ot){var mt=Z.sortIndex-ot.sortIndex;return mt!==0?mt:Z.id-ot.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var m=[],g=[],y=1,v=null,E=3,b=!1,I=!1,M=!1,N=!1,Y=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function q(Z){for(var ot=n(g);ot!==null;){if(ot.callback===null)r(g);else if(ot.startTime<=Z)r(g),ot.sortIndex=ot.expirationTime,t(m,ot);else break;ot=n(g)}}function X(Z){if(M=!1,q(Z),!I)if(n(m)!==null)I=!0,tt||(tt=!0,L());else{var ot=n(g);ot!==null&&te(X,ot.startTime-Z)}}var tt=!1,D=-1,R=5,C=-1;function V(){return N?!0:!(e.unstable_now()-C<R)}function x(){if(N=!1,tt){var Z=e.unstable_now();C=Z;var ot=!0;try{t:{I=!1,M&&(M=!1,F(D),D=-1),b=!0;var mt=E;try{e:{for(q(Z),v=n(m);v!==null&&!(v.expirationTime>Z&&V());){var Rt=v.callback;if(typeof Rt=="function"){v.callback=null,E=v.priorityLevel;var P=Rt(v.expirationTime<=Z);if(Z=e.unstable_now(),typeof P=="function"){v.callback=P,q(Z),ot=!0;break e}v===n(m)&&r(m),q(Z)}else r(m);v=n(m)}if(v!==null)ot=!0;else{var rt=n(g);rt!==null&&te(X,rt.startTime-Z),ot=!1}}break t}finally{v=null,E=mt,b=!1}ot=void 0}}finally{ot?L():tt=!1}}}var L;if(typeof G=="function")L=function(){G(x)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ne=O.port2;O.port1.onmessage=x,L=function(){ne.postMessage(null)}}else L=function(){Y(x,0)};function te(Z,ot){D=Y(function(){Z(e.unstable_now())},ot)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var ot=3;break;default:ot=E}var mt=E;E=ot;try{return Z()}finally{E=mt}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(Z,ot){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var mt=E;E=Z;try{return ot()}finally{E=mt}},e.unstable_scheduleCallback=function(Z,ot,mt){var Rt=e.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Rt+mt:Rt):mt=Rt,Z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=mt+P,Z={id:y++,callback:ot,priorityLevel:Z,startTime:mt,expirationTime:P,sortIndex:-1},mt>Rt?(Z.sortIndex=mt,t(g,Z),n(m)===null&&Z===n(g)&&(M?(F(D),D=-1):M=!0,te(X,mt-Rt))):(Z.sortIndex=P,t(m,Z),I||b||(I=!0,tt||(tt=!0,L()))),Z},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(Z){var ot=E;return function(){var mt=E;E=ot;try{return Z.apply(this,arguments)}finally{E=mt}}}}(ug)),ug}var lE;function WR(){return lE||(lE=1,lg.exports=ZR()),lg.exports}var cg={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function JR(){if(uE)return It;uE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,M={};function N(P,rt,ut){this.props=P,this.context=rt,this.refs=M,this.updater=ut||b}N.prototype.isReactComponent={},N.prototype.setState=function(P,rt){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,rt,"setState")},N.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=N.prototype;function F(P,rt,ut){this.props=P,this.context=rt,this.refs=M,this.updater=ut||b}var G=F.prototype=new Y;G.constructor=F,I(G,N.prototype),G.isPureReactComponent=!0;var q=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},tt=Object.prototype.hasOwnProperty;function D(P,rt,ut,st,yt,Ot){return ut=Ot.ref,{$$typeof:e,type:P,key:rt,ref:ut!==void 0?ut:null,props:Ot}}function R(P,rt){return D(P.type,rt,void 0,void 0,void 0,P.props)}function C(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function V(P){var rt={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ut){return rt[ut]})}var x=/\/+/g;function L(P,rt){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):rt.toString(36)}function O(){}function ne(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(O,O):(P.status="pending",P.then(function(rt){P.status==="pending"&&(P.status="fulfilled",P.value=rt)},function(rt){P.status==="pending"&&(P.status="rejected",P.reason=rt)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function te(P,rt,ut,st,yt){var Ot=typeof P;(Ot==="undefined"||Ot==="boolean")&&(P=null);var bt=!1;if(P===null)bt=!0;else switch(Ot){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(P.$$typeof){case e:case t:bt=!0;break;case y:return bt=P._init,te(bt(P._payload),rt,ut,st,yt)}}if(bt)return yt=yt(P),bt=st===""?"."+L(P,0):st,q(yt)?(ut="",bt!=null&&(ut=bt.replace(x,"$&/")+"/"),te(yt,rt,ut,"",function(Wn){return Wn})):yt!=null&&(C(yt)&&(yt=R(yt,ut+(yt.key==null||P&&P.key===yt.key?"":(""+yt.key).replace(x,"$&/")+"/")+bt)),rt.push(yt)),1;bt=0;var Ce=st===""?".":st+":";if(q(P))for(var Wt=0;Wt<P.length;Wt++)st=P[Wt],Ot=Ce+L(st,Wt),bt+=te(st,rt,ut,Ot,yt);else if(Wt=E(P),typeof Wt=="function")for(P=Wt.call(P),Wt=0;!(st=P.next()).done;)st=st.value,Ot=Ce+L(st,Wt++),bt+=te(st,rt,ut,Ot,yt);else if(Ot==="object"){if(typeof P.then=="function")return te(ne(P),rt,ut,st,yt);throw rt=String(P),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return bt}function Z(P,rt,ut){if(P==null)return P;var st=[],yt=0;return te(P,st,"","",function(Ot){return rt.call(ut,Ot,yt++)}),st}function ot(P){if(P._status===-1){var rt=P._result;rt=rt(),rt.then(function(ut){(P._status===0||P._status===-1)&&(P._status=1,P._result=ut)},function(ut){(P._status===0||P._status===-1)&&(P._status=2,P._result=ut)}),P._status===-1&&(P._status=0,P._result=rt)}if(P._status===1)return P._result.default;throw P._result}var mt=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Rt(){}return It.Children={map:Z,forEach:function(P,rt,ut){Z(P,function(){rt.apply(this,arguments)},ut)},count:function(P){var rt=0;return Z(P,function(){rt++}),rt},toArray:function(P){return Z(P,function(rt){return rt})||[]},only:function(P){if(!C(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},It.Component=N,It.Fragment=n,It.Profiler=a,It.PureComponent=F,It.StrictMode=r,It.Suspense=m,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,It.__COMPILER_RUNTIME={__proto__:null,c:function(P){return X.H.useMemoCache(P)}},It.cache=function(P){return function(){return P.apply(null,arguments)}},It.cloneElement=function(P,rt,ut){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var st=I({},P.props),yt=P.key,Ot=void 0;if(rt!=null)for(bt in rt.ref!==void 0&&(Ot=void 0),rt.key!==void 0&&(yt=""+rt.key),rt)!tt.call(rt,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&rt.ref===void 0||(st[bt]=rt[bt]);var bt=arguments.length-2;if(bt===1)st.children=ut;else if(1<bt){for(var Ce=Array(bt),Wt=0;Wt<bt;Wt++)Ce[Wt]=arguments[Wt+2];st.children=Ce}return D(P.type,yt,void 0,void 0,Ot,st)},It.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},It.createElement=function(P,rt,ut){var st,yt={},Ot=null;if(rt!=null)for(st in rt.key!==void 0&&(Ot=""+rt.key),rt)tt.call(rt,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(yt[st]=rt[st]);var bt=arguments.length-2;if(bt===1)yt.children=ut;else if(1<bt){for(var Ce=Array(bt),Wt=0;Wt<bt;Wt++)Ce[Wt]=arguments[Wt+2];yt.children=Ce}if(P&&P.defaultProps)for(st in bt=P.defaultProps,bt)yt[st]===void 0&&(yt[st]=bt[st]);return D(P,Ot,void 0,void 0,null,yt)},It.createRef=function(){return{current:null}},It.forwardRef=function(P){return{$$typeof:d,render:P}},It.isValidElement=C,It.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:ot}},It.memo=function(P,rt){return{$$typeof:g,type:P,compare:rt===void 0?null:rt}},It.startTransition=function(P){var rt=X.T,ut={};X.T=ut;try{var st=P(),yt=X.S;yt!==null&&yt(ut,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Rt,mt)}catch(Ot){mt(Ot)}finally{X.T=rt}},It.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},It.use=function(P){return X.H.use(P)},It.useActionState=function(P,rt,ut){return X.H.useActionState(P,rt,ut)},It.useCallback=function(P,rt){return X.H.useCallback(P,rt)},It.useContext=function(P){return X.H.useContext(P)},It.useDebugValue=function(){},It.useDeferredValue=function(P,rt){return X.H.useDeferredValue(P,rt)},It.useEffect=function(P,rt,ut){var st=X.H;if(typeof ut=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(P,rt)},It.useId=function(){return X.H.useId()},It.useImperativeHandle=function(P,rt,ut){return X.H.useImperativeHandle(P,rt,ut)},It.useInsertionEffect=function(P,rt){return X.H.useInsertionEffect(P,rt)},It.useLayoutEffect=function(P,rt){return X.H.useLayoutEffect(P,rt)},It.useMemo=function(P,rt){return X.H.useMemo(P,rt)},It.useOptimistic=function(P,rt){return X.H.useOptimistic(P,rt)},It.useReducer=function(P,rt,ut){return X.H.useReducer(P,rt,ut)},It.useRef=function(P){return X.H.useRef(P)},It.useState=function(P){return X.H.useState(P)},It.useSyncExternalStore=function(P,rt,ut){return X.H.useSyncExternalStore(P,rt,ut)},It.useTransition=function(){return X.H.useTransition()},It.version="19.1.0",It}var cE;function If(){return cE||(cE=1,cg.exports=JR()),cg.exports}var hg={exports:{}},$e={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE;function tI(){if(hE)return $e;hE=1;var e=If();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:g,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return $e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$e.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(m,g,null,y)},$e.flushSync=function(m){var g=c.T,y=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=y,r.d.f()}},$e.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},$e.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},$e.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,v=d(y,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:b}):y==="script"&&r.d.X(m,{crossOrigin:v,integrity:E,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},$e.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},$e.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=d(y,g.crossOrigin);r.d.L(m,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},$e.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},$e.requestFormReset=function(m){r.d.r(m)},$e.unstable_batchedUpdates=function(m,g){return m(g)},$e.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},$e.useFormStatus=function(){return c.H.useHostTransitionStatus()},$e.version="19.1.0",$e}var fE;function eI(){if(fE)return hg.exports;fE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hg.exports=tI(),hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function nI(){if(dE)return Jl;dE=1;var e=WR(),t=If(),n=eI();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var T=!1,S=f.child;S;){if(S===o){T=!0,o=f,u=p;break}if(S===u){T=!0,u=f,o=p;break}S=S.sibling}if(!T){for(S=p.child;S;){if(S===o){T=!0,o=p,u=f;break}if(S===u){T=!0,u=p,o=f;break}S=S.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),G=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=x&&i[x]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case N:return"Profiler";case M:return"StrictMode";case X:return"Suspense";case tt:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case G:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case q:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:ne(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return ne(i(s))}catch{}}return null}var te=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Rt=[],P=-1;function rt(i){return{current:i}}function ut(i){0>P||(i.current=Rt[P],Rt[P]=null,P--)}function st(i,s){P++,Rt[P]=i.current,i.current=s}var yt=rt(null),Ot=rt(null),bt=rt(null),Ce=rt(null);function Wt(i,s){switch(st(bt,s),st(Ot,i),st(yt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?k0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=k0(s),i=M0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ut(yt),st(yt,i)}function Wn(){ut(yt),ut(Ot),ut(bt)}function gr(i){i.memoizedState!==null&&st(Ce,i);var s=yt.current,o=M0(s,i.type);s!==o&&(st(Ot,i),st(yt,o))}function Ci(i){Ot.current===i&&(ut(yt),ut(Ot)),Ce.current===i&&(ut(Ce),$l._currentValue=mt)}var hs=Object.prototype.hasOwnProperty,fs=e.unstable_scheduleCallback,ds=e.unstable_cancelCallback,Fo=e.unstable_shouldYield,Fu=e.unstable_requestPaint,Rn=e.unstable_now,ad=e.unstable_getCurrentPriorityLevel,Go=e.unstable_ImmediatePriority,ya=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,od=e.unstable_LowPriority,_a=e.unstable_IdlePriority,Ko=e.log,Gu=e.unstable_setDisableYieldValue,oe=null,Ft=null;function fn(i){if(typeof Ko=="function"&&Gu(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(oe,i)}catch{}}var Ge=Math.clz32?Math.clz32:gs,Ku=Math.log,ld=Math.LN2;function gs(i){return i>>>=0,i===0?32:31-(Ku(i)/ld|0)|0}var ps=256,ys=4194304;function Bn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function va(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?f=Bn(u):(T&=S,T!==0?f=Bn(T):o||(o=S&~i,o!==0&&(f=Bn(o))))):(S=u&~p,S!==0?f=Bn(S):T!==0?f=Bn(T):o||(o=u&~i,o!==0&&(f=Bn(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function _s(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function $o(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var i=ps;return ps<<=1,(ps&4194048)===0&&(ps=256),i}function Xo(){var i=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),i}function Di(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Oi(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Qo(i,s,o,u,f,p){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var S=i.entanglements,k=i.expirationTimes,H=i.hiddenUpdates;for(o=T&~o;0<o;){var W=31-Ge(o),et=1<<W;S[W]=0,k[W]=-1;var K=H[W];if(K!==null)for(H[W]=null,W=0;W<K.length;W++){var $=K[W];$!==null&&($.lane&=-536870913)}o&=~et}u!==0&&Jn(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(T&~s))}function Jn(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ge(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Zo(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ge(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function pr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ea(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function yr(){var i=ot.p;return i!==0?i:(i=window.event,i===void 0?32:J0(i.type))}function $u(i,s){var o=ot.p;try{return ot.p=i,s()}finally{ot.p=o}}var ie=Math.random().toString(36).slice(2),we="__reactFiber$"+ie,ge="__reactProps$"+ie,In="__reactContainer$"+ie,Wo="__reactEvents$"+ie,ud="__reactListeners$"+ie,_r="__reactHandles$"+ie,Yu="__reactResources$"+ie,vs="__reactMarker$"+ie;function vr(i){delete i[we],delete i[ge],delete i[Wo],delete i[ud],delete i[_r]}function Ni(i){var s=i[we];if(s)return s;for(var o=i.parentNode;o;){if(s=o[In]||o[we]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=L0(i);i!==null;){if(o=i[we])return o;i=L0(i)}return s}i=o,o=i.parentNode}return null}function ti(i){if(i=i[we]||i[In]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ei(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Je(i){var s=i[Yu];return s||(s=i[Yu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ce(i){i[vs]=!0}var Jo=new Set,wa={};function jn(i,s){xi(i,s),xi(i+"Capture",s)}function xi(i,s){for(wa[i]=s,i=0;i<s.length;i++)Jo.add(s[i])}var Xu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Es={};function Zu(i){return hs.call(Es,i)?!0:hs.call(Qu,i)?!1:Xu.test(i)?Es[i]=!0:(Qu[i]=!0,!1)}function Er(i,s,o){if(Zu(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ni(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Pe(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var ws,Wu;function ki(i){if(ws===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ws=s&&s[1]||"",Wu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ws+i+Wu}var Ta=!1;function ba(i,s){if(!i||Ta)return"";Ta=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch($){var K=$}Reflect.construct(i,[],et)}else{try{et.call()}catch($){K=$}i.call(et.prototype)}}else{try{throw Error()}catch($){K=$}(et=i())&&typeof et.catch=="function"&&et.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],S=p[1];if(T&&S){var k=T.split(`
`),H=S.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===H.length)for(u=k.length-1,f=H.length-1;1<=u&&0<=f&&k[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==H[f]){var W=`
`+k[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=f);break}}}finally{Ta=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?ki(o):""}function tl(i){switch(i.tag){case 26:case 27:case 5:return ki(i.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 15:return ba(i.type,!1);case 11:return ba(i.type.render,!1);case 1:return ba(i.type,!0);case 31:return ki("Activity");default:return""}}function Sa(i){try{var s="";do s+=tl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function tn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function el(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cd(i){var s=el(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Aa(i){i._valueTracker||(i._valueTracker=cd(i))}function nl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=el(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Ts(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var hd=/[\n"\\]/g;function pe(i){return i.replace(hd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function dn(i,s,o,u,f,p,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+tn(s)):i.value!==""+tn(s)&&(i.value=""+tn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?wr(i,T,tn(s)):o!=null?wr(i,T,tn(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+tn(S):i.removeAttribute("name")}function bs(i,s,o,u,f,p,T,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+tn(o):"",s=s!=null?""+tn(s):o,S||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function wr(i,s,o){s==="number"&&Ts(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Mi(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+tn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function $t(i,s,o){if(s!=null&&(s=""+tn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+tn(o):""}function Ss(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(te(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=tn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function Cn(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var As=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ju(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||As.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function il(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Ju(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&Ju(i,p,s[p])}function rl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(i){return dd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Vi=null;function Dn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pi=null,Ui=null;function sl(i){var s=ti(i);if(s&&(i=s.stateNode)){var o=i[ge]||null;t:switch(i=s.stateNode,s.type){case"input":if(dn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[ge]||null;if(!f)throw Error(r(90));dn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&nl(u)}break t;case"textarea":$t(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Mi(i,!!o.multiple,s,!1)}}}var ii=!1;function tc(i,s,o){if(ii)return i(s,o);ii=!0;try{var u=i(s);return u}finally{if(ii=!1,(Pi!==null||Ui!==null)&&($c(),Pi&&(s=Pi,i=Ui,Ui=Pi=null,sl(s),i)))for(s=0;s<i.length;s++)sl(i[s])}}function Rs(i,s){var o=i.stateNode;if(o===null)return null;var u=o[ge]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),On=!1;if(Hn)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){On=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{On=!1}var ri=null,Tr=null,Li=null;function al(){if(Li)return Li;var i,s=Tr,o=s.length,u,f="value"in ri?ri.value:ri.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var T=o-i;for(u=1;u<=T&&s[o-u]===f[p-u];u++);return Li=f.slice(i,1<u?1-u:void 0)}function si(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ai(){return!0}function ol(){return!1}function De(i){function s(o,u,f,p,T){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(o=i[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ai:ol,this.isPropagationStopped=ol,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),s}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=De(Ht),Cs=y({},Ht,{view:0,detail:0}),ec=De(Cs),Ca,Da,oi,Ds=y({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==oi&&(oi&&i.type==="mousemove"?(Ca=i.screenX-oi.screenX,Da=i.screenY-oi.screenY):Da=Ca=0,oi=i),Ca)},movementY:function(i){return"movementY"in i?i.movementY:Da}}),Nn=De(Ds),nc=y({},Ds,{dataTransfer:0}),md=De(nc),Os=y({},Cs,{relatedTarget:0}),Oa=De(Os),ll=y({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Na=De(ll),ic=y({},Ht,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),xa=De(ic),gd=y({},Ht,{data:0}),ul=De(gd),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=sc[i])?!!s[i]:!1}function xs(){return cl}var ac=y({},Cs,{key:function(i){if(i.key){var s=Ns[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=si(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(i){return i.type==="keypress"?si(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?si(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ka=De(ac),oc=y({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=De(oc),zi=y({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),lc=De(zi),uc=y({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),cc=De(uc),hc=y({},Ds,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ma=De(hc),en=y({},Ht,{newState:0,oldState:0}),fc=De(en),dc=[9,13,27,32],li=Hn&&"CompositionEvent"in window,h=null;Hn&&"documentMode"in document&&(h=document.documentMode);var _=Hn&&"TextEvent"in window&&!h,w=Hn&&(!li||h&&8<h&&11>=h),A=" ",B=!1;function Q(i,s){switch(i){case"keyup":return dc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function at(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Pt=!1;function Te(i,s){switch(i){case"compositionend":return at(s);case"keypress":return s.which!==32?null:(B=!0,A);case"textInput":return i=s.data,i===A&&B?null:i;default:return null}}function Ut(i,s){if(Pt)return i==="compositionend"||!li&&Q(i,s)?(i=al(),Li=Tr=ri=null,Pt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Oe[i.type]:s==="textarea"}function Bi(i,s,o,u){Pi?Ui?Ui.push(u):Ui=[u]:Pi=u,s=Jc(s,"onChange"),0<s.length&&(o=new Ia("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var Ue=null,ui=null;function fl(i){C0(i,0)}function mc(i){var s=ei(i);if(nl(s))return i}function Xy(i,s){if(i==="change")return s}var Qy=!1;if(Hn){var pd;if(Hn){var yd="oninput"in document;if(!yd){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),yd=typeof Zy.oninput=="function"}pd=yd}else pd=!1;Qy=pd&&(!document.documentMode||9<document.documentMode)}function Wy(){Ue&&(Ue.detachEvent("onpropertychange",Jy),ui=Ue=null)}function Jy(i){if(i.propertyName==="value"&&mc(ui)){var s=[];Bi(s,ui,i,Dn(i)),tc(fl,s)}}function S1(i,s,o){i==="focusin"?(Wy(),Ue=s,ui=o,Ue.attachEvent("onpropertychange",Jy)):i==="focusout"&&Wy()}function A1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mc(ui)}function R1(i,s){if(i==="click")return mc(s)}function I1(i,s){if(i==="input"||i==="change")return mc(s)}function C1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var mn=typeof Object.is=="function"?Object.is:C1;function dl(i,s){if(mn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!hs.call(s,f)||!mn(i[f],s[f]))return!1}return!0}function t_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function e_(i,s){var o=t_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=t_(o)}}function n_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?n_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function i_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Ts(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Ts(i.document)}return s}function _d(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var D1=Hn&&"documentMode"in document&&11>=document.documentMode,Va=null,vd=null,ml=null,Ed=!1;function r_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ed||Va==null||Va!==Ts(u)||(u=Va,"selectionStart"in u&&_d(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ml&&dl(ml,u)||(ml=u,u=Jc(vd,"onSelect"),0<u.length&&(s=new Ia("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=Va)))}function ks(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var Pa={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},wd={},s_={};Hn&&(s_=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Ms(i){if(wd[i])return wd[i];if(!Pa[i])return i;var s=Pa[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in s_)return wd[i]=s[o];return i}var a_=Ms("animationend"),o_=Ms("animationiteration"),l_=Ms("animationstart"),O1=Ms("transitionrun"),N1=Ms("transitionstart"),x1=Ms("transitioncancel"),u_=Ms("transitionend"),c_=new Map,Td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Td.push("scrollEnd");function qn(i,s){c_.set(i,s),jn(s,[i])}var h_=new WeakMap;function xn(i,s){if(typeof i=="object"&&i!==null){var o=h_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Sa(s)},h_.set(i,s),s)}return{value:i,source:s,stack:Sa(s)}}var kn=[],Ua=0,bd=0;function gc(){for(var i=Ua,s=bd=Ua=0;s<i;){var o=kn[s];kn[s++]=null;var u=kn[s];kn[s++]=null;var f=kn[s];kn[s++]=null;var p=kn[s];if(kn[s++]=null,u!==null&&f!==null){var T=u.pending;T===null?f.next=f:(f.next=T.next,T.next=f),u.pending=f}p!==0&&f_(o,f,p)}}function pc(i,s,o,u){kn[Ua++]=i,kn[Ua++]=s,kn[Ua++]=o,kn[Ua++]=u,bd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Sd(i,s,o,u){return pc(i,s,o,u),yc(i)}function La(i,s){return pc(i,null,null,s),yc(i)}function f_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Ge(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function yc(i){if(50<zl)throw zl=0,Om=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var za={};function k1(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(i,s,o,u){return new k1(i,s,o,u)}function Ad(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ji(i,s){var o=i.alternate;return o===null?(o=gn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function d_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function _c(i,s,o,u,f,p){var T=0;if(u=i,typeof i=="function")Ad(i)&&(T=1);else if(typeof i=="string")T=VR(i,o,yt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case C:return i=gn(31,o,s,f),i.elementType=C,i.lanes=p,i;case I:return Vs(o.children,f,p,s);case M:T=8,f|=24;break;case N:return i=gn(12,o,s,f|2),i.elementType=N,i.lanes=p,i;case X:return i=gn(13,o,s,f),i.elementType=X,i.lanes=p,i;case tt:return i=gn(19,o,s,f),i.elementType=tt,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Y:case G:T=10;break t;case F:T=9;break t;case q:T=11;break t;case D:T=14;break t;case R:T=16,u=null;break t}T=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=gn(T,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function Vs(i,s,o,u){return i=gn(7,i,u,s),i.lanes=o,i}function Rd(i,s,o){return i=gn(6,i,null,s),i.lanes=o,i}function Id(i,s,o){return s=gn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Ba=[],ja=0,vc=null,Ec=0,Mn=[],Vn=0,Ps=null,Hi=1,qi="";function Us(i,s){Ba[ja++]=Ec,Ba[ja++]=vc,vc=i,Ec=s}function m_(i,s,o){Mn[Vn++]=Hi,Mn[Vn++]=qi,Mn[Vn++]=Ps,Ps=i;var u=Hi;i=qi;var f=32-Ge(u)-1;u&=~(1<<f),o+=1;var p=32-Ge(s)+f;if(30<p){var T=f-f%5;p=(u&(1<<T)-1).toString(32),u>>=T,f-=T,Hi=1<<32-Ge(s)+f|o<<f|u,qi=p+i}else Hi=1<<p|o<<f|u,qi=i}function Cd(i){i.return!==null&&(Us(i,1),m_(i,1,0))}function Dd(i){for(;i===vc;)vc=Ba[--ja],Ba[ja]=null,Ec=Ba[--ja],Ba[ja]=null;for(;i===Ps;)Ps=Mn[--Vn],Mn[Vn]=null,qi=Mn[--Vn],Mn[Vn]=null,Hi=Mn[--Vn],Mn[Vn]=null}var nn=null,le=null,jt=!1,Ls=null,ci=!1,Od=Error(r(519));function zs(i){var s=Error(r(418,""));throw yl(xn(s,i)),Od}function g_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[we]=i,s[ge]=u,o){case"dialog":kt("cancel",s),kt("close",s);break;case"iframe":case"object":case"embed":kt("load",s);break;case"video":case"audio":for(o=0;o<jl.length;o++)kt(jl[o],s);break;case"source":kt("error",s);break;case"img":case"image":case"link":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"input":kt("invalid",s),bs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Aa(s);break;case"select":kt("invalid",s);break;case"textarea":kt("invalid",s),Ss(s,u.value,u.defaultValue,u.children),Aa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||x0(s.textContent,o)?(u.popover!=null&&(kt("beforetoggle",s),kt("toggle",s)),u.onScroll!=null&&kt("scroll",s),u.onScrollEnd!=null&&kt("scrollend",s),u.onClick!=null&&(s.onclick=th),s=!0):s=!1,s||zs(i)}function p_(i){for(nn=i.return;nn;)switch(nn.tag){case 5:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:nn=nn.return}}function gl(i){if(i!==nn)return!1;if(!jt)return p_(i),jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Km(i.type,i.memoizedProps)),o=!o),o&&le&&zs(i),p_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){le=Gn(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}le=null}}else s===27?(s=le,Lr(i.type)?(i=Qm,Qm=null,le=i):le=s):le=nn?Gn(i.stateNode.nextSibling):null;return!0}function pl(){le=nn=null,jt=!1}function y_(){var i=Ls;return i!==null&&(an===null?an=i:an.push.apply(an,i),Ls=null),i}function yl(i){Ls===null?Ls=[i]:Ls.push(i)}var Nd=rt(null),Bs=null,Fi=null;function br(i,s,o){st(Nd,s._currentValue),s._currentValue=o}function Gi(i){i._currentValue=Nd.current,ut(Nd)}function xd(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function kd(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=f;for(var k=0;k<s.length;k++)if(S.context===s[k]){p.lanes|=o,S=p.alternate,S!==null&&(S.lanes|=o),xd(p.return,o,i),u||(T=null);break t}p=S.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),xd(T,o,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function _l(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var S=f.type;mn(f.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(f===Ce.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push($l):i=[$l])}f=f.return}i!==null&&kd(s,i,o,u),s.flags|=262144}function wc(i){for(i=i.firstContext;i!==null;){if(!mn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function js(i){Bs=i,Fi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ke(i){return __(Bs,i)}function Tc(i,s){return Bs===null&&js(i),__(i,s)}function __(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Fi===null){if(i===null)throw Error(r(308));Fi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Fi=Fi.next=s;return o}var M1=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},V1=e.unstable_scheduleCallback,P1=e.unstable_NormalPriority,Se={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Md(){return{controller:new M1,data:new Map,refCount:0}}function vl(i){i.refCount--,i.refCount===0&&V1(P1,function(){i.controller.abort()})}var El=null,Vd=0,Ha=0,qa=null;function U1(i,s){if(El===null){var o=El=[];Vd=0,Ha=Um(),qa={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Vd++,s.then(v_,v_),s}function v_(){if(--Vd===0&&El!==null){qa!==null&&(qa.status="fulfilled");var i=El;El=null,Ha=0,qa=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function L1(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var E_=Z.S;Z.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&U1(i,s),E_!==null&&E_(i,s)};var Hs=rt(null);function Pd(){var i=Hs.current;return i!==null?i:Jt.pooledCache}function bc(i,s){s===null?st(Hs,Hs.current):st(Hs,s.pool)}function w_(){var i=Pd();return i===null?null:{parent:Se._currentValue,pool:i}}var wl=Error(r(460)),T_=Error(r(474)),Sc=Error(r(542)),Ud={then:function(){}};function b_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ac(){}function S_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Ac,Ac),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,R_(i),i;default:if(typeof s.status=="string")s.then(Ac,Ac);else{if(i=Jt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,R_(i),i}throw Tl=s,wl}}var Tl=null;function A_(){if(Tl===null)throw Error(r(459));var i=Tl;return Tl=null,i}function R_(i){if(i===wl||i===Sc)throw Error(r(483))}var Sr=!1;function Ld(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ar(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rr(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Gt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=yc(i),f_(i,null,o),s}return pc(i,u,s,o),yc(i)}function bl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Zo(i,o)}}function Bd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var jd=!1;function Sl(){if(jd){var i=qa;if(i!==null)throw i}}function Al(i,s,o,u){jd=!1;var f=i.updateQueue;Sr=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var k=S,H=k.next;k.next=null,T===null?p=H:T.next=H,T=k;var W=i.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==T&&(S===null?W.firstBaseUpdate=H:S.next=H,W.lastBaseUpdate=k))}if(p!==null){var et=f.baseState;T=0,W=H=k=null,S=p;do{var K=S.lane&-536870913,$=K!==S.lane;if($?(Lt&K)===K:(u&K)===K){K!==0&&K===Ha&&(jd=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var wt=i,_t=S;K=s;var Qt=o;switch(_t.tag){case 1:if(wt=_t.payload,typeof wt=="function"){et=wt.call(Qt,et,K);break t}et=wt;break t;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=_t.payload,K=typeof wt=="function"?wt.call(Qt,et,K):wt,K==null)break t;et=y({},et,K);break t;case 2:Sr=!0}}K=S.callback,K!==null&&(i.flags|=64,$&&(i.flags|=8192),$=f.callbacks,$===null?f.callbacks=[K]:$.push(K))}else $={lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(H=W=$,k=et):W=W.next=$,T|=K;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;$=S,S=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);W===null&&(k=et),f.baseState=k,f.firstBaseUpdate=H,f.lastBaseUpdate=W,p===null&&(f.shared.lanes=0),Mr|=T,i.lanes=T,i.memoizedState=et}}function I_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function C_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)I_(o[i],s)}var Fa=rt(null),Rc=rt(0);function D_(i,s){i=Wi,st(Rc,i),st(Fa,s),Wi=i|s.baseLanes}function Hd(){st(Rc,Wi),st(Fa,Fa.current)}function qd(){Wi=Rc.current,ut(Fa),ut(Rc)}var Ir=0,Ct=null,Yt=null,ye=null,Ic=!1,Ga=!1,qs=!1,Cc=0,Rl=0,Ka=null,z1=0;function he(){throw Error(r(321))}function Fd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!mn(i[o],s[o]))return!1;return!0}function Gd(i,s,o,u,f,p){return Ir=p,Ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Z.H=i===null||i.memoizedState===null?fv:dv,qs=!1,p=o(u,f),qs=!1,Ga&&(p=N_(s,o,u,f)),O_(i),p}function O_(i){Z.H=Mc;var s=Yt!==null&&Yt.next!==null;if(Ir=0,ye=Yt=Ct=null,Ic=!1,Rl=0,Ka=null,s)throw Error(r(300));i===null||Ne||(i=i.dependencies,i!==null&&wc(i)&&(Ne=!0))}function N_(i,s,o,u){Ct=i;var f=0;do{if(Ga&&(Ka=null),Rl=0,Ga=!1,25<=f)throw Error(r(301));if(f+=1,ye=Yt=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Z.H=K1,p=s(o,u)}while(Ga);return p}function B1(){var i=Z.H,s=i.useState()[0];return s=typeof s.then=="function"?Il(s):s,i=i.useState()[0],(Yt!==null?Yt.memoizedState:null)!==i&&(Ct.flags|=1024),s}function Kd(){var i=Cc!==0;return Cc=0,i}function $d(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Yd(i){if(Ic){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ic=!1}Ir=0,ye=Yt=Ct=null,Ga=!1,Rl=Cc=0,Ka=null}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?Ct.memoizedState=ye=i:ye=ye.next=i,ye}function _e(){if(Yt===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=Yt.next;var s=ye===null?Ct.memoizedState:ye.next;if(s!==null)ye=s,Yt=i;else{if(i===null)throw Ct.alternate===null?Error(r(467)):Error(r(310));Yt=i,i={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},ye===null?Ct.memoizedState=ye=i:ye=ye.next=i}return ye}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(i){var s=Rl;return Rl+=1,Ka===null&&(Ka=[]),i=S_(Ka,i,s),s=Ct,(ye===null?s.memoizedState:ye.next)===null&&(s=s.alternate,Z.H=s===null||s.memoizedState===null?fv:dv),i}function Dc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Il(i);if(i.$$typeof===G)return Ke(i)}throw Error(r(438,String(i)))}function Qd(i){var s=null,o=Ct.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ct.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Xd(),Ct.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=V;return s.index++,o}function Ki(i,s){return typeof s=="function"?s(i):s}function Oc(i){var s=_e();return Zd(s,Yt,i)}function Zd(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var S=T=null,k=null,H=s,W=!1;do{var et=H.lane&-536870913;if(et!==H.lane?(Lt&et)===et:(Ir&et)===et){var K=H.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),et===Ha&&(W=!0);else if((Ir&K)===K){H=H.next,K===Ha&&(W=!0);continue}else et={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(S=k=et,T=p):k=k.next=et,Ct.lanes|=K,Mr|=K;et=H.action,qs&&o(p,et),p=H.hasEagerState?H.eagerState:o(p,et)}else K={lane:et,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(S=k=K,T=p):k=k.next=K,Ct.lanes|=et,Mr|=et;H=H.next}while(H!==null&&H!==s);if(k===null?T=p:k.next=S,!mn(p,i.memoizedState)&&(Ne=!0,W&&(o=qa,o!==null)))throw o;i.memoizedState=p,i.baseState=T,i.baseQueue=k,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Wd(i){var s=_e(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var T=f=f.next;do p=i(p,T.action),T=T.next;while(T!==f);mn(p,s.memoizedState)||(Ne=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function x_(i,s,o){var u=Ct,f=_e(),p=jt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!mn((Yt||f).memoizedState,o);T&&(f.memoizedState=o,Ne=!0),f=f.queue;var S=V_.bind(null,u,f,i);if(Cl(2048,8,S,[i]),f.getSnapshot!==s||T||ye!==null&&ye.memoizedState.tag&1){if(u.flags|=2048,$a(9,Nc(),M_.bind(null,u,f,o,s),null),Jt===null)throw Error(r(349));p||(Ir&124)!==0||k_(u,s,o)}return o}function k_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Ct.updateQueue,s===null?(s=Xd(),Ct.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function M_(i,s,o,u){s.value=o,s.getSnapshot=u,P_(s)&&U_(i)}function V_(i,s,o){return o(function(){P_(s)&&U_(i)})}function P_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!mn(i,o)}catch{return!0}}function U_(i){var s=La(i,2);s!==null&&En(s,i,2)}function Jd(i){var s=rn();if(typeof i=="function"){var o=i;if(i=o(),qs){fn(!0);try{o()}finally{fn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:i},s}function L_(i,s,o,u){return i.baseState=o,Zd(i,Yt,typeof u=="function"?u:Ki)}function j1(i,s,o,u,f){if(kc(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};Z.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,z_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function z_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=Z.T,T={};Z.T=T;try{var S=o(f,u),k=Z.S;k!==null&&k(T,S),B_(i,s,S)}catch(H){tm(i,s,H)}finally{Z.T=p}}else try{p=o(f,u),B_(i,s,p)}catch(H){tm(i,s,H)}}function B_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){j_(i,s,u)},function(u){return tm(i,s,u)}):j_(i,s,o)}function j_(i,s,o){s.status="fulfilled",s.value=o,H_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,z_(i,o)))}function tm(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,H_(s),s=s.next;while(s!==u)}i.action=null}function H_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function q_(i,s){return s}function F_(i,s){if(jt){var o=Jt.formState;if(o!==null){t:{var u=Ct;if(jt){if(le){e:{for(var f=le,p=ci;f.nodeType!==8;){if(!p){f=null;break e}if(f=Gn(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){le=Gn(f.nextSibling),u=f.data==="F!";break t}}zs(u)}u=!1}u&&(s=o[0])}}return o=rn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:s},o.queue=u,o=uv.bind(null,Ct,u),u.dispatch=o,u=Jd(!1),p=sm.bind(null,Ct,!1,u.queue),u=rn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=j1.bind(null,Ct,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function G_(i){var s=_e();return K_(s,Yt,i)}function K_(i,s,o){if(s=Zd(i,s,q_)[0],i=Oc(Ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Il(s)}catch(T){throw T===wl?Sc:T}else u=s;s=_e();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Ct.flags|=2048,$a(9,Nc(),H1.bind(null,f,o),null)),[u,p,i]}function H1(i,s){i.action=s}function $_(i){var s=_e(),o=Yt;if(o!==null)return K_(s,o,i);_e(),s=s.memoizedState,o=_e();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function $a(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Ct.updateQueue,s===null&&(s=Xd(),Ct.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Nc(){return{destroy:void 0,resource:void 0}}function Y_(){return _e().memoizedState}function xc(i,s,o,u){var f=rn();u=u===void 0?null:u,Ct.flags|=i,f.memoizedState=$a(1|s,Nc(),o,u)}function Cl(i,s,o,u){var f=_e();u=u===void 0?null:u;var p=f.memoizedState.inst;Yt!==null&&u!==null&&Fd(u,Yt.memoizedState.deps)?f.memoizedState=$a(s,p,o,u):(Ct.flags|=i,f.memoizedState=$a(1|s,p,o,u))}function X_(i,s){xc(8390656,8,i,s)}function Q_(i,s){Cl(2048,8,i,s)}function Z_(i,s){return Cl(4,2,i,s)}function W_(i,s){return Cl(4,4,i,s)}function J_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function tv(i,s,o){o=o!=null?o.concat([i]):null,Cl(4,4,J_.bind(null,s,i),o)}function em(){}function ev(i,s){var o=_e();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Fd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function nv(i,s){var o=_e();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Fd(s,u[1]))return u[0];if(u=i(),qs){fn(!0);try{i()}finally{fn(!1)}}return o.memoizedState=[u,s],u}function nm(i,s,o){return o===void 0||(Ir&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=s0(),Ct.lanes|=i,Mr|=i,o)}function iv(i,s,o,u){return mn(o,s)?o:Fa.current!==null?(i=nm(i,o,u),mn(i,s)||(Ne=!0),i):(Ir&42)===0?(Ne=!0,i.memoizedState=o):(i=s0(),Ct.lanes|=i,Mr|=i,s)}function rv(i,s,o,u,f){var p=ot.p;ot.p=p!==0&&8>p?p:8;var T=Z.T,S={};Z.T=S,sm(i,!1,s,o);try{var k=f(),H=Z.S;if(H!==null&&H(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=L1(k,u);Dl(i,s,W,vn(i))}else Dl(i,s,u,vn(i))}catch(et){Dl(i,s,{then:function(){},status:"rejected",reason:et},vn())}finally{ot.p=p,Z.T=T}}function q1(){}function im(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=sv(i).queue;rv(i,f,s,mt,o===null?q1:function(){return av(i),o(u)})}function sv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:mt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function av(i){var s=sv(i).next.queue;Dl(i,s,{},vn())}function rm(){return Ke($l)}function ov(){return _e().memoizedState}function lv(){return _e().memoizedState}function F1(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=vn();i=Ar(o);var u=Rr(s,i,o);u!==null&&(En(u,s,o),bl(u,s,o)),s={cache:Md()},i.payload=s;return}s=s.return}}function G1(i,s,o){var u=vn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},kc(i)?cv(s,o):(o=Sd(i,s,o,u),o!==null&&(En(o,i,u),hv(o,s,u)))}function uv(i,s,o){var u=vn();Dl(i,s,o,u)}function Dl(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(kc(i))cv(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var T=s.lastRenderedState,S=p(T,o);if(f.hasEagerState=!0,f.eagerState=S,mn(S,T))return pc(i,s,f,0),Jt===null&&gc(),!1}catch{}finally{}if(o=Sd(i,s,f,u),o!==null)return En(o,i,u),hv(o,s,u),!0}return!1}function sm(i,s,o,u){if(u={lane:2,revertLane:Um(),action:u,hasEagerState:!1,eagerState:null,next:null},kc(i)){if(s)throw Error(r(479))}else s=Sd(i,o,u,2),s!==null&&En(s,i,2)}function kc(i){var s=i.alternate;return i===Ct||s!==null&&s===Ct}function cv(i,s){Ga=Ic=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function hv(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Zo(i,o)}}var Mc={readContext:Ke,use:Dc,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},fv={readContext:Ke,use:Dc,useCallback:function(i,s){return rn().memoizedState=[i,s===void 0?null:s],i},useContext:Ke,useEffect:X_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,xc(4194308,4,J_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return xc(4194308,4,i,s)},useInsertionEffect:function(i,s){xc(4,2,i,s)},useMemo:function(i,s){var o=rn();s=s===void 0?null:s;var u=i();if(qs){fn(!0);try{i()}finally{fn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=rn();if(o!==void 0){var f=o(s);if(qs){fn(!0);try{o(s)}finally{fn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=G1.bind(null,Ct,i),[u.memoizedState,i]},useRef:function(i){var s=rn();return i={current:i},s.memoizedState=i},useState:function(i){i=Jd(i);var s=i.queue,o=uv.bind(null,Ct,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:em,useDeferredValue:function(i,s){var o=rn();return nm(o,i,s)},useTransition:function(){var i=Jd(!1);return i=rv.bind(null,Ct,i.queue,!0,!1),rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Ct,f=rn();if(jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Jt===null)throw Error(r(349));(Lt&124)!==0||k_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,X_(V_.bind(null,u,p,i),[i]),u.flags|=2048,$a(9,Nc(),M_.bind(null,u,p,o,s),null),o},useId:function(){var i=rn(),s=Jt.identifierPrefix;if(jt){var o=qi,u=Hi;o=(u&~(1<<32-Ge(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Cc++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=z1++,s=""+s+"r"+o.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:rm,useFormState:F_,useActionState:F_,useOptimistic:function(i){var s=rn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=sm.bind(null,Ct,!0,o),o.dispatch=s,[i,s]},useMemoCache:Qd,useCacheRefresh:function(){return rn().memoizedState=F1.bind(null,Ct)}},dv={readContext:Ke,use:Dc,useCallback:ev,useContext:Ke,useEffect:Q_,useImperativeHandle:tv,useInsertionEffect:Z_,useLayoutEffect:W_,useMemo:nv,useReducer:Oc,useRef:Y_,useState:function(){return Oc(Ki)},useDebugValue:em,useDeferredValue:function(i,s){var o=_e();return iv(o,Yt.memoizedState,i,s)},useTransition:function(){var i=Oc(Ki)[0],s=_e().memoizedState;return[typeof i=="boolean"?i:Il(i),s]},useSyncExternalStore:x_,useId:ov,useHostTransitionStatus:rm,useFormState:G_,useActionState:G_,useOptimistic:function(i,s){var o=_e();return L_(o,Yt,i,s)},useMemoCache:Qd,useCacheRefresh:lv},K1={readContext:Ke,use:Dc,useCallback:ev,useContext:Ke,useEffect:Q_,useImperativeHandle:tv,useInsertionEffect:Z_,useLayoutEffect:W_,useMemo:nv,useReducer:Wd,useRef:Y_,useState:function(){return Wd(Ki)},useDebugValue:em,useDeferredValue:function(i,s){var o=_e();return Yt===null?nm(o,i,s):iv(o,Yt.memoizedState,i,s)},useTransition:function(){var i=Wd(Ki)[0],s=_e().memoizedState;return[typeof i=="boolean"?i:Il(i),s]},useSyncExternalStore:x_,useId:ov,useHostTransitionStatus:rm,useFormState:$_,useActionState:$_,useOptimistic:function(i,s){var o=_e();return Yt!==null?L_(o,Yt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Qd,useCacheRefresh:lv},Ya=null,Ol=0;function Vc(i){var s=Ol;return Ol+=1,Ya===null&&(Ya=[]),S_(Ya,i,s)}function Nl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Pc(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function mv(i){var s=i._init;return s(i._payload)}function gv(i){function s(z,U){if(i){var j=z.deletions;j===null?(z.deletions=[U],z.flags|=16):j.push(U)}}function o(z,U){if(!i)return null;for(;U!==null;)s(z,U),U=U.sibling;return null}function u(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function f(z,U){return z=ji(z,U),z.index=0,z.sibling=null,z}function p(z,U,j){return z.index=j,i?(j=z.alternate,j!==null?(j=j.index,j<U?(z.flags|=67108866,U):j):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function T(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function S(z,U,j,J){return U===null||U.tag!==6?(U=Rd(j,z.mode,J),U.return=z,U):(U=f(U,j),U.return=z,U)}function k(z,U,j,J){var ft=j.type;return ft===I?W(z,U,j.props.children,J,j.key):U!==null&&(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===R&&mv(ft)===U.type)?(U=f(U,j.props),Nl(U,j),U.return=z,U):(U=_c(j.type,j.key,j.props,null,z.mode,J),Nl(U,j),U.return=z,U)}function H(z,U,j,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==j.containerInfo||U.stateNode.implementation!==j.implementation?(U=Id(j,z.mode,J),U.return=z,U):(U=f(U,j.children||[]),U.return=z,U)}function W(z,U,j,J,ft){return U===null||U.tag!==7?(U=Vs(j,z.mode,J,ft),U.return=z,U):(U=f(U,j),U.return=z,U)}function et(z,U,j){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Rd(""+U,z.mode,j),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return j=_c(U.type,U.key,U.props,null,z.mode,j),Nl(j,U),j.return=z,j;case b:return U=Id(U,z.mode,j),U.return=z,U;case R:var J=U._init;return U=J(U._payload),et(z,U,j)}if(te(U)||L(U))return U=Vs(U,z.mode,j,null),U.return=z,U;if(typeof U.then=="function")return et(z,Vc(U),j);if(U.$$typeof===G)return et(z,Tc(z,U),j);Pc(z,U)}return null}function K(z,U,j,J){var ft=U!==null?U.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ft!==null?null:S(z,U,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case E:return j.key===ft?k(z,U,j,J):null;case b:return j.key===ft?H(z,U,j,J):null;case R:return ft=j._init,j=ft(j._payload),K(z,U,j,J)}if(te(j)||L(j))return ft!==null?null:W(z,U,j,J,null);if(typeof j.then=="function")return K(z,U,Vc(j),J);if(j.$$typeof===G)return K(z,U,Tc(z,j),J);Pc(z,j)}return null}function $(z,U,j,J,ft){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(j)||null,S(U,z,""+J,ft);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case E:return z=z.get(J.key===null?j:J.key)||null,k(U,z,J,ft);case b:return z=z.get(J.key===null?j:J.key)||null,H(U,z,J,ft);case R:var Nt=J._init;return J=Nt(J._payload),$(z,U,j,J,ft)}if(te(J)||L(J))return z=z.get(j)||null,W(U,z,J,ft,null);if(typeof J.then=="function")return $(z,U,j,Vc(J),ft);if(J.$$typeof===G)return $(z,U,j,Tc(U,J),ft);Pc(U,J)}return null}function wt(z,U,j,J){for(var ft=null,Nt=null,gt=U,vt=U=0,ke=null;gt!==null&&vt<j.length;vt++){gt.index>vt?(ke=gt,gt=null):ke=gt.sibling;var Bt=K(z,gt,j[vt],J);if(Bt===null){gt===null&&(gt=ke);break}i&&gt&&Bt.alternate===null&&s(z,gt),U=p(Bt,U,vt),Nt===null?ft=Bt:Nt.sibling=Bt,Nt=Bt,gt=ke}if(vt===j.length)return o(z,gt),jt&&Us(z,vt),ft;if(gt===null){for(;vt<j.length;vt++)gt=et(z,j[vt],J),gt!==null&&(U=p(gt,U,vt),Nt===null?ft=gt:Nt.sibling=gt,Nt=gt);return jt&&Us(z,vt),ft}for(gt=u(gt);vt<j.length;vt++)ke=$(gt,z,vt,j[vt],J),ke!==null&&(i&&ke.alternate!==null&&gt.delete(ke.key===null?vt:ke.key),U=p(ke,U,vt),Nt===null?ft=ke:Nt.sibling=ke,Nt=ke);return i&&gt.forEach(function(qr){return s(z,qr)}),jt&&Us(z,vt),ft}function _t(z,U,j,J){if(j==null)throw Error(r(151));for(var ft=null,Nt=null,gt=U,vt=U=0,ke=null,Bt=j.next();gt!==null&&!Bt.done;vt++,Bt=j.next()){gt.index>vt?(ke=gt,gt=null):ke=gt.sibling;var qr=K(z,gt,Bt.value,J);if(qr===null){gt===null&&(gt=ke);break}i&&gt&&qr.alternate===null&&s(z,gt),U=p(qr,U,vt),Nt===null?ft=qr:Nt.sibling=qr,Nt=qr,gt=ke}if(Bt.done)return o(z,gt),jt&&Us(z,vt),ft;if(gt===null){for(;!Bt.done;vt++,Bt=j.next())Bt=et(z,Bt.value,J),Bt!==null&&(U=p(Bt,U,vt),Nt===null?ft=Bt:Nt.sibling=Bt,Nt=Bt);return jt&&Us(z,vt),ft}for(gt=u(gt);!Bt.done;vt++,Bt=j.next())Bt=$(gt,z,vt,Bt.value,J),Bt!==null&&(i&&Bt.alternate!==null&&gt.delete(Bt.key===null?vt:Bt.key),U=p(Bt,U,vt),Nt===null?ft=Bt:Nt.sibling=Bt,Nt=Bt);return i&&gt.forEach(function($R){return s(z,$R)}),jt&&Us(z,vt),ft}function Qt(z,U,j,J){if(typeof j=="object"&&j!==null&&j.type===I&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case E:t:{for(var ft=j.key;U!==null;){if(U.key===ft){if(ft=j.type,ft===I){if(U.tag===7){o(z,U.sibling),J=f(U,j.props.children),J.return=z,z=J;break t}}else if(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===R&&mv(ft)===U.type){o(z,U.sibling),J=f(U,j.props),Nl(J,j),J.return=z,z=J;break t}o(z,U);break}else s(z,U);U=U.sibling}j.type===I?(J=Vs(j.props.children,z.mode,J,j.key),J.return=z,z=J):(J=_c(j.type,j.key,j.props,null,z.mode,J),Nl(J,j),J.return=z,z=J)}return T(z);case b:t:{for(ft=j.key;U!==null;){if(U.key===ft)if(U.tag===4&&U.stateNode.containerInfo===j.containerInfo&&U.stateNode.implementation===j.implementation){o(z,U.sibling),J=f(U,j.children||[]),J.return=z,z=J;break t}else{o(z,U);break}else s(z,U);U=U.sibling}J=Id(j,z.mode,J),J.return=z,z=J}return T(z);case R:return ft=j._init,j=ft(j._payload),Qt(z,U,j,J)}if(te(j))return wt(z,U,j,J);if(L(j)){if(ft=L(j),typeof ft!="function")throw Error(r(150));return j=ft.call(j),_t(z,U,j,J)}if(typeof j.then=="function")return Qt(z,U,Vc(j),J);if(j.$$typeof===G)return Qt(z,U,Tc(z,j),J);Pc(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,U!==null&&U.tag===6?(o(z,U.sibling),J=f(U,j),J.return=z,z=J):(o(z,U),J=Rd(j,z.mode,J),J.return=z,z=J),T(z)):o(z,U)}return function(z,U,j,J){try{Ol=0;var ft=Qt(z,U,j,J);return Ya=null,ft}catch(gt){if(gt===wl||gt===Sc)throw gt;var Nt=gn(29,gt,null,z.mode);return Nt.lanes=J,Nt.return=z,Nt}finally{}}}var Xa=gv(!0),pv=gv(!1),Pn=rt(null),hi=null;function Cr(i){var s=i.alternate;st(Ae,Ae.current&1),st(Pn,i),hi===null&&(s===null||Fa.current!==null||s.memoizedState!==null)&&(hi=i)}function yv(i){if(i.tag===22){if(st(Ae,Ae.current),st(Pn,i),hi===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(hi=i)}}else Dr()}function Dr(){st(Ae,Ae.current),st(Pn,Pn.current)}function $i(i){ut(Pn),hi===i&&(hi=null),ut(Ae)}var Ae=rt(0);function Uc(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Xm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function am(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var om={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=vn(),f=Ar(u);f.payload=s,o!=null&&(f.callback=o),s=Rr(i,f,u),s!==null&&(En(s,i,u),bl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=vn(),f=Ar(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Rr(i,f,u),s!==null&&(En(s,i,u),bl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=vn(),u=Ar(o);u.tag=2,s!=null&&(u.callback=s),s=Rr(i,u,o),s!==null&&(En(s,i,o),bl(s,i,o))}};function _v(i,s,o,u,f,p,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,T):s.prototype&&s.prototype.isPureReactComponent?!dl(o,u)||!dl(f,p):!0}function vv(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&om.enqueueReplaceState(s,s.state,null)}function Fs(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var Lc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Ev(i){Lc(i)}function wv(i){console.error(i)}function Tv(i){Lc(i)}function zc(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function bv(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function lm(i,s,o){return o=Ar(o),o.tag=3,o.payload={element:null},o.callback=function(){zc(i,s)},o}function Sv(i){return i=Ar(i),i.tag=3,i}function Av(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){bv(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){bv(s,o,u),typeof f!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function $1(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&_l(s,o,f,!0),o=Pn.current,o!==null){switch(o.tag){case 13:return hi===null?xm():o.alternate===null&&ue===0&&(ue=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Ud?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Mm(i,u,f)),!1;case 22:return o.flags|=65536,u===Ud?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Mm(i,u,f)),!1}throw Error(r(435,o.tag))}return Mm(i,u,f),xm(),!1}if(jt)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Od&&(i=Error(r(422),{cause:u}),yl(xn(i,o)))):(u!==Od&&(s=Error(r(423),{cause:u}),yl(xn(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=xn(u,o),f=lm(i.stateNode,u,f),Bd(i,f),ue!==4&&(ue=2)),!1;var p=Error(r(520),{cause:u});if(p=xn(p,o),Ll===null?Ll=[p]:Ll.push(p),ue!==4&&(ue=2),s===null)return!0;u=xn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=lm(o.stateNode,u,i),Bd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Vr===null||!Vr.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Sv(f),Av(f,i,o,u),Bd(o,f),!1}o=o.return}while(o!==null);return!1}var Rv=Error(r(461)),Ne=!1;function Le(i,s,o,u){s.child=i===null?pv(s,null,o,u):Xa(s,i.child,o,u)}function Iv(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var T={};for(var S in u)S!=="ref"&&(T[S]=u[S])}else T=u;return js(s),u=Gd(i,s,o,T,p,f),S=Kd(),i!==null&&!Ne?($d(i,s,f),Yi(i,s,f)):(jt&&S&&Cd(s),s.flags|=1,Le(i,s,u,f),s.child)}function Cv(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!Ad(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,Dv(i,s,p,u,f)):(i=_c(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!pm(i,f)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:dl,o(T,u)&&i.ref===s.ref)return Yi(i,s,f)}return s.flags|=1,i=ji(p,u),i.ref=s.ref,i.return=s,s.child=i}function Dv(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(dl(p,u)&&i.ref===s.ref)if(Ne=!1,s.pendingProps=u=p,pm(i,f))(i.flags&131072)!==0&&(Ne=!0);else return s.lanes=i.lanes,Yi(i,s,f)}return um(i,s,o,u,f)}function Ov(i,s,o){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return Nv(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&bc(s,p!==null?p.cachePool:null),p!==null?D_(s,p):Hd(),yv(s);else return s.lanes=s.childLanes=536870912,Nv(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(bc(s,p.cachePool),D_(s,p),Dr(),s.memoizedState=null):(i!==null&&bc(s,null),Hd(),Dr());return Le(i,s,f,o),s.child}function Nv(i,s,o,u){var f=Pd();return f=f===null?null:{parent:Se._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&bc(s,null),Hd(),yv(s),i!==null&&_l(i,s,u,!0),null}function Bc(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function um(i,s,o,u,f){return js(s),o=Gd(i,s,o,u,void 0,f),u=Kd(),i!==null&&!Ne?($d(i,s,f),Yi(i,s,f)):(jt&&u&&Cd(s),s.flags|=1,Le(i,s,o,f),s.child)}function xv(i,s,o,u,f,p){return js(s),s.updateQueue=null,o=N_(s,u,o,f),O_(i),u=Kd(),i!==null&&!Ne?($d(i,s,p),Yi(i,s,p)):(jt&&u&&Cd(s),s.flags|=1,Le(i,s,o,p),s.child)}function kv(i,s,o,u,f){if(js(s),s.stateNode===null){var p=za,T=o.contextType;typeof T=="object"&&T!==null&&(p=Ke(T)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=om,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Ld(s),T=o.contextType,p.context=typeof T=="object"&&T!==null?Ke(T):za,p.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(am(s,o,T,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&om.enqueueReplaceState(p,p.state,null),Al(s,u,p,f),Sl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var S=s.memoizedProps,k=Fs(o,S);p.props=k;var H=p.context,W=o.contextType;T=za,typeof W=="object"&&W!==null&&(T=Ke(W));var et=o.getDerivedStateFromProps;W=typeof et=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,W||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||H!==T)&&vv(s,p,u,T),Sr=!1;var K=s.memoizedState;p.state=K,Al(s,u,p,f),Sl(),H=s.memoizedState,S||K!==H||Sr?(typeof et=="function"&&(am(s,o,et,u),H=s.memoizedState),(k=Sr||_v(s,o,k,u,K,H,T))?(W||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),p.props=u,p.state=H,p.context=T,u=k):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,zd(i,s),T=s.memoizedProps,W=Fs(o,T),p.props=W,et=s.pendingProps,K=p.context,H=o.contextType,k=za,typeof H=="object"&&H!==null&&(k=Ke(H)),S=o.getDerivedStateFromProps,(H=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==et||K!==k)&&vv(s,p,u,k),Sr=!1,K=s.memoizedState,p.state=K,Al(s,u,p,f),Sl();var $=s.memoizedState;T!==et||K!==$||Sr||i!==null&&i.dependencies!==null&&wc(i.dependencies)?(typeof S=="function"&&(am(s,o,S,u),$=s.memoizedState),(W=Sr||_v(s,o,W,u,K,$,k)||i!==null&&i.dependencies!==null&&wc(i.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,$,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,$,k)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=$),p.props=u,p.state=$,p.context=k,u=W):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&K===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,Bc(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Xa(s,i.child,null,f),s.child=Xa(s,null,o,f)):Le(i,s,o,f),s.memoizedState=p.state,i=s.child):i=Yi(i,s,f),i}function Mv(i,s,o,u){return pl(),s.flags|=256,Le(i,s,o,u),s.child}var cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(i){return{baseLanes:i,cachePool:w_()}}function fm(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Un),i}function Vv(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,T;if((T=p)||(T=i!==null&&i.memoizedState===null?!1:(Ae.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(jt){if(f?Cr(s):Dr(),jt){var S=le,k;if(k=S){t:{for(k=S,S=ci;k.nodeType!==8;){if(!S){S=null;break t}if(k=Gn(k.nextSibling),k===null){S=null;break t}}S=k}S!==null?(s.memoizedState={dehydrated:S,treeContext:Ps!==null?{id:Hi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},k=gn(18,null,null,0),k.stateNode=S,k.return=s,s.child=k,nn=s,le=null,k=!0):k=!1}k||zs(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Xm(S)?s.lanes=32:s.lanes=536870912,null;$i(s)}return S=u.children,u=u.fallback,f?(Dr(),f=s.mode,S=jc({mode:"hidden",children:S},f),u=Vs(u,f,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,f=s.child,f.memoizedState=hm(o),f.childLanes=fm(i,T,o),s.memoizedState=cm,u):(Cr(s),dm(s,S))}if(k=i.memoizedState,k!==null&&(S=k.dehydrated,S!==null)){if(p)s.flags&256?(Cr(s),s.flags&=-257,s=mm(i,s,o)):s.memoizedState!==null?(Dr(),s.child=i.child,s.flags|=128,s=null):(Dr(),f=u.fallback,S=s.mode,u=jc({mode:"visible",children:u.children},S),f=Vs(f,S,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Xa(s,i.child,null,o),u=s.child,u.memoizedState=hm(o),u.childLanes=fm(i,T,o),s.memoizedState=cm,s=f);else if(Cr(s),Xm(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var H=T.dgst;T=H,u=Error(r(419)),u.stack="",u.digest=T,yl({value:u,source:null,stack:null}),s=mm(i,s,o)}else if(Ne||_l(i,s,o,!1),T=(o&i.childLanes)!==0,Ne||T){if(T=Jt,T!==null&&(u=o&-o,u=(u&42)!==0?1:pr(u),u=(u&(T.suspendedLanes|o))!==0?0:u,u!==0&&u!==k.retryLane))throw k.retryLane=u,La(i,u),En(T,i,u),Rv;S.data==="$?"||xm(),s=mm(i,s,o)}else S.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=k.treeContext,le=Gn(S.nextSibling),nn=s,jt=!0,Ls=null,ci=!1,i!==null&&(Mn[Vn++]=Hi,Mn[Vn++]=qi,Mn[Vn++]=Ps,Hi=i.id,qi=i.overflow,Ps=s),s=dm(s,u.children),s.flags|=4096);return s}return f?(Dr(),f=u.fallback,S=s.mode,k=i.child,H=k.sibling,u=ji(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,H!==null?f=ji(H,f):(f=Vs(f,S,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,S=i.child.memoizedState,S===null?S=hm(o):(k=S.cachePool,k!==null?(H=Se._currentValue,k=k.parent!==H?{parent:H,pool:H}:k):k=w_(),S={baseLanes:S.baseLanes|o,cachePool:k}),f.memoizedState=S,f.childLanes=fm(i,T,o),s.memoizedState=cm,u):(Cr(s),o=i.child,i=o.sibling,o=ji(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function dm(i,s){return s=jc({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function jc(i,s){return i=gn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function mm(i,s,o){return Xa(s,i.child,null,o),i=dm(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Pv(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),xd(i.return,s,o)}function gm(i,s,o,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function Uv(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Le(i,s,u.children,o),u=Ae.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pv(i,o,s);else if(i.tag===19)Pv(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(st(Ae,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&Uc(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),gm(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Uc(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}gm(s,!0,o,null,p);break;case"together":gm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yi(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Mr|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(_l(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=ji(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=ji(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function pm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&wc(i)))}function Y1(i,s,o){switch(s.tag){case 3:Wt(s,s.stateNode.containerInfo),br(s,Se,i.memoizedState.cache),pl();break;case 27:case 5:gr(s);break;case 4:Wt(s,s.stateNode.containerInfo);break;case 10:br(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Cr(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Vv(i,s,o):(Cr(s),i=Yi(i,s,o),i!==null?i.sibling:null);Cr(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(_l(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Uv(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Ae,Ae.current),u)break;return null;case 22:case 23:return s.lanes=0,Ov(i,s,o);case 24:br(s,Se,i.memoizedState.cache)}return Yi(i,s,o)}function Lv(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ne=!0;else{if(!pm(i,o)&&(s.flags&128)===0)return Ne=!1,Y1(i,s,o);Ne=(i.flags&131072)!==0}else Ne=!1,jt&&(s.flags&1048576)!==0&&m_(s,Ec,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Ad(u)?(i=Fs(u,i),s.tag=1,s=kv(null,s,u,i,o)):(s.tag=0,s=um(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===q){s.tag=11,s=Iv(null,s,u,i,o);break t}else if(f===D){s.tag=14,s=Cv(null,s,u,i,o);break t}}throw s=ne(u)||u,Error(r(306,s,""))}}return s;case 0:return um(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Fs(u,s.pendingProps),kv(i,s,u,f,o);case 3:t:{if(Wt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,zd(i,s),Al(s,u,null,o);var T=s.memoizedState;if(u=T.cache,br(s,Se,u),u!==p.cache&&kd(s,[Se],o,!0),Sl(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=Mv(i,s,u,o);break t}else if(u!==f){f=xn(Error(r(424)),s),yl(f),s=Mv(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(le=Gn(i.firstChild),nn=s,jt=!0,Ls=null,ci=!0,o=pv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(pl(),u===f){s=Yi(i,s,o);break t}Le(i,s,u,o)}s=s.child}return s;case 26:return Bc(i,s),i===null?(o=H0(s.type,null,s.pendingProps,null))?s.memoizedState=o:jt||(o=s.type,i=s.pendingProps,u=eh(bt.current).createElement(o),u[we]=s,u[ge]=i,Be(u,o,i),ce(u),s.stateNode=u):s.memoizedState=H0(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return gr(s),i===null&&jt&&(u=s.stateNode=z0(s.type,s.pendingProps,bt.current),nn=s,ci=!0,f=le,Lr(s.type)?(Qm=f,le=Gn(u.firstChild)):le=f),Le(i,s,s.pendingProps.children,o),Bc(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&jt&&((f=u=le)&&(u=TR(u,s.type,s.pendingProps,ci),u!==null?(s.stateNode=u,nn=s,le=Gn(u.firstChild),ci=!1,f=!0):f=!1),f||zs(s)),gr(s),f=s.type,p=s.pendingProps,T=i!==null?i.memoizedProps:null,u=p.children,Km(f,p)?u=null:T!==null&&Km(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=Gd(i,s,B1,null,null,o),$l._currentValue=f),Bc(i,s),Le(i,s,u,o),s.child;case 6:return i===null&&jt&&((i=o=le)&&(o=bR(o,s.pendingProps,ci),o!==null?(s.stateNode=o,nn=s,le=null,i=!0):i=!1),i||zs(s)),null;case 13:return Vv(i,s,o);case 4:return Wt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Xa(s,null,u,o):Le(i,s,u,o),s.child;case 11:return Iv(i,s,s.type,s.pendingProps,o);case 7:return Le(i,s,s.pendingProps,o),s.child;case 8:return Le(i,s,s.pendingProps.children,o),s.child;case 12:return Le(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,br(s,s.type,u.value),Le(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,js(s),f=Ke(f),u=u(f),s.flags|=1,Le(i,s,u,o),s.child;case 14:return Cv(i,s,s.type,s.pendingProps,o);case 15:return Dv(i,s,s.type,s.pendingProps,o);case 19:return Uv(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=jc(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ji(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return Ov(i,s,o);case 24:return js(s),u=Ke(Se),i===null?(f=Pd(),f===null&&(f=Jt,p=Md(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Ld(s),br(s,Se,f)):((i.lanes&o)!==0&&(zd(i,s),Al(s,null,null,o),Sl()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),br(s,Se,u)):(u=p.cache,br(s,Se,u),u!==f.cache&&kd(s,[Se],o,!0))),Le(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Xi(i){i.flags|=4}function zv(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!$0(s)){if(s=Pn.current,s!==null&&((Lt&4194048)===Lt?hi!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||s!==hi))throw Tl=Ud,T_;i.flags|=8192}}function Hc(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Xo():536870912,i.lanes|=s,Ja|=s)}function xl(i,s){if(!jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function se(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function X1(i,s,o){var u=s.pendingProps;switch(Dd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(s),null;case 1:return se(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Gi(Se),Wn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(gl(s)?Xi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,y_())),se(s),null;case 26:return o=s.memoizedState,i===null?(Xi(s),o!==null?(se(s),zv(s,o)):(se(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Xi(s),se(s),zv(s,o)):(se(s),s.flags&=-16777217):(i.memoizedProps!==u&&Xi(s),se(s),s.flags&=-16777217),null;case 27:Ci(s),o=bt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Xi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return se(s),null}i=yt.current,gl(s)?g_(s):(i=z0(f,u,o),s.stateNode=i,Xi(s))}return se(s),null;case 5:if(Ci(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Xi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return se(s),null}if(i=yt.current,gl(s))g_(s);else{switch(f=eh(bt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[we]=s,i[ge]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(Be(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Xi(s)}}return se(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Xi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=bt.current,gl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=nn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[we]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||x0(i.nodeValue,o)),i||zs(s)}else i=eh(i).createTextNode(u),i[we]=s,s.stateNode=i}return se(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=gl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[we]=s}else pl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),f=!1}else f=y_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?($i(s),s):($i(s),null)}if($i(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),Hc(s,s.updateQueue),se(s),null;case 4:return Wn(),i===null&&jm(s.stateNode.containerInfo),se(s),null;case 10:return Gi(s.type),se(s),null;case 19:if(ut(Ae),f=s.memoizedState,f===null)return se(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)xl(f,!1);else{if(ue!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=Uc(i),p!==null){for(s.flags|=128,xl(f,!1),i=p.updateQueue,s.updateQueue=i,Hc(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)d_(o,i),o=o.sibling;return st(Ae,Ae.current&1|2),s.child}i=i.sibling}f.tail!==null&&Rn()>Gc&&(s.flags|=128,u=!0,xl(f,!1),s.lanes=4194304)}else{if(!u)if(i=Uc(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,Hc(s,i),xl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!jt)return se(s),null}else 2*Rn()-f.renderingStartTime>Gc&&o!==536870912&&(s.flags|=128,u=!0,xl(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Rn(),s.sibling=null,i=Ae.current,st(Ae,u?i&1|2:i&1),s):(se(s),null);case 22:case 23:return $i(s),qd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(se(s),s.subtreeFlags&6&&(s.flags|=8192)):se(s),o=s.updateQueue,o!==null&&Hc(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&ut(Hs),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Gi(Se),se(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Q1(i,s){switch(Dd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Gi(Se),Wn(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ci(s),null;case 13:if($i(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));pl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ut(Ae),null;case 4:return Wn(),null;case 10:return Gi(s.type),null;case 22:case 23:return $i(s),qd(),i!==null&&ut(Hs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Gi(Se),null;case 25:return null;default:return null}}function Bv(i,s){switch(Dd(s),s.tag){case 3:Gi(Se),Wn();break;case 26:case 27:case 5:Ci(s);break;case 4:Wn();break;case 13:$i(s);break;case 19:ut(Ae);break;case 10:Gi(s.type);break;case 22:case 23:$i(s),qd(),i!==null&&ut(Hs);break;case 24:Gi(Se)}}function kl(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,T=o.inst;u=p(),T.destroy=u}o=o.next}while(o!==f)}}catch(S){Zt(s,s.return,S)}}function Or(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var T=u.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,f=s;var k=o,H=S;try{H()}catch(W){Zt(f,k,W)}}}u=u.next}while(u!==p)}}catch(W){Zt(s,s.return,W)}}function jv(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{C_(s,o)}catch(u){Zt(i,i.return,u)}}}function Hv(i,s,o){o.props=Fs(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){Zt(i,s,u)}}function Ml(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){Zt(i,s,f)}}function fi(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Zt(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Zt(i,s,f)}else o.current=null}function qv(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Zt(i,i.return,f)}}function ym(i,s,o){try{var u=i.stateNode;yR(u,i.type,o,s),u[ge]=s}catch(f){Zt(i,i.return,f)}}function Fv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Lr(i.type)||i.tag===4}function _m(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Fv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Lr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vm(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=th));else if(u!==4&&(u===27&&Lr(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(vm(i,s,o),i=i.sibling;i!==null;)vm(i,s,o),i=i.sibling}function qc(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Lr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(qc(i,s,o),i=i.sibling;i!==null;)qc(i,s,o),i=i.sibling}function Gv(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Be(s,u,o),s[we]=i,s[ge]=o}catch(p){Zt(i,i.return,p)}}var Qi=!1,fe=!1,Em=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Z1(i,s){if(i=i.containerInfo,Fm=oh,i=i_(i),_d(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var T=0,S=-1,k=-1,H=0,W=0,et=i,K=null;e:for(;;){for(var $;et!==o||f!==0&&et.nodeType!==3||(S=T+f),et!==p||u!==0&&et.nodeType!==3||(k=T+u),et.nodeType===3&&(T+=et.nodeValue.length),($=et.firstChild)!==null;)K=et,et=$;for(;;){if(et===i)break e;if(K===o&&++H===f&&(S=T),K===p&&++W===u&&(k=T),($=et.nextSibling)!==null)break;et=K,K=et.parentNode}et=$}o=S===-1||k===-1?null:{start:S,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Gm={focusedElem:i,selectionRange:o},oh=!1,xe=s;xe!==null;)if(s=xe,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,xe=i;else for(;xe!==null;){switch(s=xe,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var wt=Fs(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(wt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(_t){Zt(o,o.return,_t)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Ym(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ym(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,xe=i;break}xe=s.return}}function $v(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Nr(i,o),u&4&&kl(5,o);break;case 1:if(Nr(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(T){Zt(o,o.return,T)}else{var f=Fs(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Zt(o,o.return,T)}}u&64&&jv(o),u&512&&Ml(o,o.return);break;case 3:if(Nr(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{C_(i,s)}catch(T){Zt(o,o.return,T)}}break;case 27:s===null&&u&4&&Gv(o);case 26:case 5:Nr(i,o),s===null&&u&4&&qv(o),u&512&&Ml(o,o.return);break;case 12:Nr(i,o);break;case 13:Nr(i,o),u&4&&Qv(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=aR.bind(null,o),SR(i,o))));break;case 22:if(u=o.memoizedState!==null||Qi,!u){s=s!==null&&s.memoizedState!==null||fe,f=Qi;var p=fe;Qi=u,(fe=s)&&!p?xr(i,o,(o.subtreeFlags&8772)!==0):Nr(i,o),Qi=f,fe=p}break;case 30:break;default:Nr(i,o)}}function Yv(i){var s=i.alternate;s!==null&&(i.alternate=null,Yv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&vr(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var re=null,sn=!1;function Zi(i,s,o){for(o=o.child;o!==null;)Xv(i,s,o),o=o.sibling}function Xv(i,s,o){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(oe,o)}catch{}switch(o.tag){case 26:fe||fi(o,s),Zi(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:fe||fi(o,s);var u=re,f=sn;Lr(o.type)&&(re=o.stateNode,sn=!1),Zi(i,s,o),ql(o.stateNode),re=u,sn=f;break;case 5:fe||fi(o,s);case 6:if(u=re,f=sn,re=null,Zi(i,s,o),re=u,sn=f,re!==null)if(sn)try{(re.nodeType===9?re.body:re.nodeName==="HTML"?re.ownerDocument.body:re).removeChild(o.stateNode)}catch(p){Zt(o,s,p)}else try{re.removeChild(o.stateNode)}catch(p){Zt(o,s,p)}break;case 18:re!==null&&(sn?(i=re,U0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Zl(i)):U0(re,o.stateNode));break;case 4:u=re,f=sn,re=o.stateNode.containerInfo,sn=!0,Zi(i,s,o),re=u,sn=f;break;case 0:case 11:case 14:case 15:fe||Or(2,o,s),fe||Or(4,o,s),Zi(i,s,o);break;case 1:fe||(fi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Hv(o,s,u)),Zi(i,s,o);break;case 21:Zi(i,s,o);break;case 22:fe=(u=fe)||o.memoizedState!==null,Zi(i,s,o),fe=u;break;default:Zi(i,s,o)}}function Qv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Zl(i)}catch(o){Zt(s,s.return,o)}}function W1(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Kv),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Kv),s;default:throw Error(r(435,i.tag))}}function wm(i,s){var o=W1(i);s.forEach(function(u){var f=oR.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function pn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,T=s,S=T;t:for(;S!==null;){switch(S.tag){case 27:if(Lr(S.type)){re=S.stateNode,sn=!1;break t}break;case 5:re=S.stateNode,sn=!1;break t;case 3:case 4:re=S.stateNode.containerInfo,sn=!0;break t}S=S.return}if(re===null)throw Error(r(160));Xv(p,T,f),re=null,sn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Zv(s,i),s=s.sibling}var Fn=null;function Zv(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(s,i),yn(i),u&4&&(Or(3,i,i.return),kl(3,i),Or(5,i,i.return));break;case 1:pn(s,i),yn(i),u&512&&(fe||o===null||fi(o,o.return)),u&64&&Qi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Fn;if(pn(s,i),yn(i),u&512&&(fe||o===null||fi(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[vs]||p[we]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Be(p,u,o),p[we]=i,ce(p),u=p;break t;case"link":var T=G0("link","href",f).get(u+(o.href||""));if(T){for(var S=0;S<T.length;S++)if(p=T[S],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(S,1);break e}}p=f.createElement(u),Be(p,u,o),f.head.appendChild(p);break;case"meta":if(T=G0("meta","content",f).get(u+(o.content||""))){for(S=0;S<T.length;S++)if(p=T[S],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(S,1);break e}}p=f.createElement(u),Be(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[we]=i,ce(p),u=p}i.stateNode=u}else K0(f,i.type,i.stateNode);else i.stateNode=F0(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?K0(f,i.type,i.stateNode):F0(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&ym(i,i.memoizedProps,o.memoizedProps)}break;case 27:pn(s,i),yn(i),u&512&&(fe||o===null||fi(o,o.return)),o!==null&&u&4&&ym(i,i.memoizedProps,o.memoizedProps);break;case 5:if(pn(s,i),yn(i),u&512&&(fe||o===null||fi(o,o.return)),i.flags&32){f=i.stateNode;try{Cn(f,"")}catch($){Zt(i,i.return,$)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,ym(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Em=!0);break;case 6:if(pn(s,i),yn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch($){Zt(i,i.return,$)}}break;case 3:if(rh=null,f=Fn,Fn=nh(s.containerInfo),pn(s,i),Fn=f,yn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Zl(s.containerInfo)}catch($){Zt(i,i.return,$)}Em&&(Em=!1,Wv(i));break;case 4:u=Fn,Fn=nh(i.stateNode.containerInfo),pn(s,i),yn(i),Fn=u;break;case 12:pn(s,i),yn(i);break;case 13:pn(s,i),yn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Im=Rn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,wm(i,u)));break;case 22:f=i.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,H=Qi,W=fe;if(Qi=H||f,fe=W||k,pn(s,i),fe=W,Qi=H,yn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||k||Qi||fe||Gs(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){k=o=s;try{if(p=k.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=k.stateNode;var et=k.memoizedProps.style,K=et!=null&&et.hasOwnProperty("display")?et.display:null;S.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch($){Zt(k,k.return,$)}}}else if(s.tag===6){if(o===null){k=s;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch($){Zt(k,k.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,wm(i,o))));break;case 19:pn(s,i),yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,wm(i,u)));break;case 30:break;case 21:break;default:pn(s,i),yn(i)}}function yn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(Fv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=_m(i);qc(i,p,f);break;case 5:var T=o.stateNode;o.flags&32&&(Cn(T,""),o.flags&=-33);var S=_m(i);qc(i,S,T);break;case 3:case 4:var k=o.stateNode.containerInfo,H=_m(i);vm(i,H,k);break;default:throw Error(r(161))}}catch(W){Zt(i,i.return,W)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Wv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Wv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Nr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)$v(i,s.alternate,s),s=s.sibling}function Gs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Or(4,s,s.return),Gs(s);break;case 1:fi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Hv(s,s.return,o),Gs(s);break;case 27:ql(s.stateNode);case 26:case 5:fi(s,s.return),Gs(s);break;case 22:s.memoizedState===null&&Gs(s);break;case 30:Gs(s);break;default:Gs(s)}i=i.sibling}}function xr(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,T=p.flags;switch(p.tag){case 0:case 11:case 15:xr(f,p,o),kl(4,p);break;case 1:if(xr(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){Zt(u,u.return,H)}if(u=p,f=u.updateQueue,f!==null){var S=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)I_(k[f],S)}catch(H){Zt(u,u.return,H)}}o&&T&64&&jv(p),Ml(p,p.return);break;case 27:Gv(p);case 26:case 5:xr(f,p,o),o&&u===null&&T&4&&qv(p),Ml(p,p.return);break;case 12:xr(f,p,o);break;case 13:xr(f,p,o),o&&T&4&&Qv(f,p);break;case 22:p.memoizedState===null&&xr(f,p,o),Ml(p,p.return);break;case 30:break;default:xr(f,p,o)}s=s.sibling}}function Tm(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&vl(o))}function bm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&vl(i))}function di(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Jv(i,s,o,u),s=s.sibling}function Jv(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:di(i,s,o,u),f&2048&&kl(9,s);break;case 1:di(i,s,o,u);break;case 3:di(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&vl(i)));break;case 12:if(f&2048){di(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,T=p.id,S=p.onPostCommit;typeof S=="function"&&S(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){Zt(s,s.return,k)}}else di(i,s,o,u);break;case 13:di(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,T=s.alternate,s.memoizedState!==null?p._visibility&2?di(i,s,o,u):Vl(i,s):p._visibility&2?di(i,s,o,u):(p._visibility|=2,Qa(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Tm(T,s);break;case 24:di(i,s,o,u),f&2048&&bm(s.alternate,s);break;default:di(i,s,o,u)}}function Qa(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,T=s,S=o,k=u,H=T.flags;switch(T.tag){case 0:case 11:case 15:Qa(p,T,S,k,f),kl(8,T);break;case 23:break;case 22:var W=T.stateNode;T.memoizedState!==null?W._visibility&2?Qa(p,T,S,k,f):Vl(p,T):(W._visibility|=2,Qa(p,T,S,k,f)),f&&H&2048&&Tm(T.alternate,T);break;case 24:Qa(p,T,S,k,f),f&&H&2048&&bm(T.alternate,T);break;default:Qa(p,T,S,k,f)}s=s.sibling}}function Vl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:Vl(o,u),f&2048&&Tm(u.alternate,u);break;case 24:Vl(o,u),f&2048&&bm(u.alternate,u);break;default:Vl(o,u)}s=s.sibling}}var Pl=8192;function Za(i){if(i.subtreeFlags&Pl)for(i=i.child;i!==null;)t0(i),i=i.sibling}function t0(i){switch(i.tag){case 26:Za(i),i.flags&Pl&&i.memoizedState!==null&&UR(Fn,i.memoizedState,i.memoizedProps);break;case 5:Za(i);break;case 3:case 4:var s=Fn;Fn=nh(i.stateNode.containerInfo),Za(i),Fn=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Pl,Pl=16777216,Za(i),Pl=s):Za(i));break;default:Za(i)}}function e0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ul(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];xe=u,i0(u,i)}e0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)n0(i),i=i.sibling}function n0(i){switch(i.tag){case 0:case 11:case 15:Ul(i),i.flags&2048&&Or(9,i,i.return);break;case 3:Ul(i);break;case 12:Ul(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Fc(i)):Ul(i);break;default:Ul(i)}}function Fc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];xe=u,i0(u,i)}e0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Or(8,s,s.return),Fc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Fc(s));break;default:Fc(s)}i=i.sibling}}function i0(i,s){for(;xe!==null;){var o=xe;switch(o.tag){case 0:case 11:case 15:Or(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,xe=u;else t:for(o=i;xe!==null;){u=xe;var f=u.sibling,p=u.return;if(Yv(u),u===o){xe=null;break t}if(f!==null){f.return=p,xe=f;break t}xe=p}}}var J1={getCacheForType:function(i){var s=Ke(Se),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},tR=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,xt=null,Lt=0,Kt=0,_n=null,kr=!1,Wa=!1,Sm=!1,Wi=0,ue=0,Mr=0,Ks=0,Am=0,Un=0,Ja=0,Ll=null,an=null,Rm=!1,Im=0,Gc=1/0,Kc=null,Vr=null,ze=0,Pr=null,to=null,eo=0,Cm=0,Dm=null,r0=null,zl=0,Om=null;function vn(){if((Gt&2)!==0&&Lt!==0)return Lt&-Lt;if(Z.T!==null){var i=Ha;return i!==0?i:Um()}return yr()}function s0(){Un===0&&(Un=(Lt&536870912)===0||jt?Yo():536870912);var i=Pn.current;return i!==null&&(i.flags|=32),Un}function En(i,s,o){(i===Jt&&(Kt===2||Kt===9)||i.cancelPendingCommit!==null)&&(no(i,0),Ur(i,Lt,Un,!1)),Oi(i,o),((Gt&2)===0||i!==Jt)&&(i===Jt&&((Gt&2)===0&&(Ks|=o),ue===4&&Ur(i,Lt,Un,!1)),mi(i))}function a0(i,s,o){if((Gt&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||_s(i,s),f=u?iR(i,s):km(i,s,!0),p=u;do{if(f===0){Wa&&!u&&Ur(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!eR(o)){f=km(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;t:{var S=i;f=Ll;var k=S.current.memoizedState.isDehydrated;if(k&&(no(S,T).flags|=256),T=km(S,T,!1),T!==2){if(Sm&&!k){S.errorRecoveryDisabledLanes|=p,Ks|=p,f=4;break t}p=an,an=f,p!==null&&(an===null?an=p:an.push.apply(an,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){no(i,0),Ur(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ur(u,s,Un,!kr);break t;case 2:an=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Im+300-Rn(),10<f)){if(Ur(u,s,Un,!kr),va(u,0,!0)!==0)break t;u.timeoutHandle=V0(o0.bind(null,u,o,an,Kc,Rm,s,Un,Ks,Ja,kr,p,2,-0,0),f);break t}o0(u,o,an,Kc,Rm,s,Un,Ks,Ja,kr,p,0,-0,0)}}break}while(!0);mi(i)}function o0(i,s,o,u,f,p,T,S,k,H,W,et,K,$){if(i.timeoutHandle=-1,et=s.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:PR},t0(s),et=LR(),et!==null)){i.cancelPendingCommit=et(m0.bind(null,i,s,p,o,u,f,T,S,k,W,1,K,$)),Ur(i,p,T,!H);return}m0(i,s,p,o,u,f,T,S,k)}function eR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!mn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ur(i,s,o,u){s&=~Am,s&=~Ks,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Ge(f),T=1<<p;u[p]=-1,f&=~T}o!==0&&Jn(i,o,s)}function $c(){return(Gt&6)===0?(Bl(0),!1):!0}function Nm(){if(xt!==null){if(Kt===0)var i=xt.return;else i=xt,Fi=Bs=null,Yd(i),Ya=null,Ol=0,i=xt;for(;i!==null;)Bv(i.alternate,i),i=i.return;xt=null}}function no(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,vR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Nm(),Jt=i,xt=o=ji(i.current,null),Lt=s,Kt=0,_n=null,kr=!1,Wa=_s(i,s),Sm=!1,Ja=Un=Am=Ks=Mr=ue=0,an=Ll=null,Rm=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ge(u),p=1<<f;s|=i[f],u&=~p}return Wi=s,gc(),o}function l0(i,s){Ct=null,Z.H=Mc,s===wl||s===Sc?(s=A_(),Kt=3):s===T_?(s=A_(),Kt=4):Kt=s===Rv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,_n=s,xt===null&&(ue=1,zc(i,xn(s,i.current)))}function u0(){var i=Z.H;return Z.H=Mc,i===null?Mc:i}function c0(){var i=Z.A;return Z.A=J1,i}function xm(){ue=4,kr||(Lt&4194048)!==Lt&&Pn.current!==null||(Wa=!0),(Mr&134217727)===0&&(Ks&134217727)===0||Jt===null||Ur(Jt,Lt,Un,!1)}function km(i,s,o){var u=Gt;Gt|=2;var f=u0(),p=c0();(Jt!==i||Lt!==s)&&(Kc=null,no(i,s)),s=!1;var T=ue;t:do try{if(Kt!==0&&xt!==null){var S=xt,k=_n;switch(Kt){case 8:Nm(),T=6;break t;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var H=Kt;if(Kt=0,_n=null,io(i,S,k,H),o&&Wa){T=0;break t}break;default:H=Kt,Kt=0,_n=null,io(i,S,k,H)}}nR(),T=ue;break}catch(W){l0(i,W)}while(!0);return s&&i.shellSuspendCounter++,Fi=Bs=null,Gt=u,Z.H=f,Z.A=p,xt===null&&(Jt=null,Lt=0,gc()),T}function nR(){for(;xt!==null;)h0(xt)}function iR(i,s){var o=Gt;Gt|=2;var u=u0(),f=c0();Jt!==i||Lt!==s?(Kc=null,Gc=Rn()+500,no(i,s)):Wa=_s(i,s);t:do try{if(Kt!==0&&xt!==null){s=xt;var p=_n;e:switch(Kt){case 1:Kt=0,_n=null,io(i,s,p,1);break;case 2:case 9:if(b_(p)){Kt=0,_n=null,f0(s);break}s=function(){Kt!==2&&Kt!==9||Jt!==i||(Kt=7),mi(i)},p.then(s,s);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:b_(p)?(Kt=0,_n=null,f0(s)):(Kt=0,_n=null,io(i,s,p,7));break;case 5:var T=null;switch(xt.tag){case 26:T=xt.memoizedState;case 5:case 27:var S=xt;if(!T||$0(T)){Kt=0,_n=null;var k=S.sibling;if(k!==null)xt=k;else{var H=S.return;H!==null?(xt=H,Yc(H)):xt=null}break e}}Kt=0,_n=null,io(i,s,p,5);break;case 6:Kt=0,_n=null,io(i,s,p,6);break;case 8:Nm(),ue=6;break t;default:throw Error(r(462))}}rR();break}catch(W){l0(i,W)}while(!0);return Fi=Bs=null,Z.H=u,Z.A=f,Gt=o,xt!==null?0:(Jt=null,Lt=0,gc(),ue)}function rR(){for(;xt!==null&&!Fo();)h0(xt)}function h0(i){var s=Lv(i.alternate,i,Wi);i.memoizedProps=i.pendingProps,s===null?Yc(i):xt=s}function f0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=xv(o,s,s.pendingProps,s.type,void 0,Lt);break;case 11:s=xv(o,s,s.pendingProps,s.type.render,s.ref,Lt);break;case 5:Yd(s);default:Bv(o,s),s=xt=d_(s,Wi),s=Lv(o,s,Wi)}i.memoizedProps=i.pendingProps,s===null?Yc(i):xt=s}function io(i,s,o,u){Fi=Bs=null,Yd(s),Ya=null,Ol=0;var f=s.return;try{if($1(i,f,s,o,Lt)){ue=1,zc(i,xn(o,i.current)),xt=null;return}}catch(p){if(f!==null)throw xt=f,p;ue=1,zc(i,xn(o,i.current)),xt=null;return}s.flags&32768?(jt||u===1?i=!0:Wa||(Lt&536870912)!==0?i=!1:(kr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),d0(s,i)):Yc(s)}function Yc(i){var s=i;do{if((s.flags&32768)!==0){d0(s,kr);return}i=s.return;var o=X1(s.alternate,s,Wi);if(o!==null){xt=o;return}if(s=s.sibling,s!==null){xt=s;return}xt=s=i}while(s!==null);ue===0&&(ue=5)}function d0(i,s){do{var o=Q1(i.alternate,i);if(o!==null){o.flags&=32767,xt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){xt=i;return}xt=i=o}while(i!==null);ue=6,xt=null}function m0(i,s,o,u,f,p,T,S,k){i.cancelPendingCommit=null;do Xc();while(ze!==0);if((Gt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=bd,Qo(i,o,p,T,S,k),i===Jt&&(xt=Jt=null,Lt=0),to=s,Pr=i,eo=o,Cm=p,Dm=f,r0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,lR(ms,function(){return v0(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=ot.p,ot.p=2,T=Gt,Gt|=4;try{Z1(i,s,o)}finally{Gt=T,ot.p=f,Z.T=u}}ze=1,g0(),p0(),y0()}}function g0(){if(ze===1){ze=0;var i=Pr,s=to,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=ot.p;ot.p=2;var f=Gt;Gt|=4;try{Zv(s,i);var p=Gm,T=i_(i.containerInfo),S=p.focusedElem,k=p.selectionRange;if(T!==S&&S&&S.ownerDocument&&n_(S.ownerDocument.documentElement,S)){if(k!==null&&_d(S)){var H=k.start,W=k.end;if(W===void 0&&(W=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(W,S.value.length);else{var et=S.ownerDocument||document,K=et&&et.defaultView||window;if(K.getSelection){var $=K.getSelection(),wt=S.textContent.length,_t=Math.min(k.start,wt),Qt=k.end===void 0?_t:Math.min(k.end,wt);!$.extend&&_t>Qt&&(T=Qt,Qt=_t,_t=T);var z=e_(S,_t),U=e_(S,Qt);if(z&&U&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var j=et.createRange();j.setStart(z.node,z.offset),$.removeAllRanges(),_t>Qt?($.addRange(j),$.extend(U.node,U.offset)):(j.setEnd(U.node,U.offset),$.addRange(j))}}}}for(et=[],$=S;$=$.parentNode;)$.nodeType===1&&et.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<et.length;S++){var J=et[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}oh=!!Fm,Gm=Fm=null}finally{Gt=f,ot.p=u,Z.T=o}}i.current=s,ze=2}}function p0(){if(ze===2){ze=0;var i=Pr,s=to,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=ot.p;ot.p=2;var f=Gt;Gt|=4;try{$v(i,s.alternate,s)}finally{Gt=f,ot.p=u,Z.T=o}}ze=3}}function y0(){if(ze===4||ze===3){ze=0,Fu();var i=Pr,s=to,o=eo,u=r0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ze=5:(ze=0,to=Pr=null,_0(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Vr=null),Ea(o),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(oe,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Z.T,f=ot.p,ot.p=2,Z.T=null;try{for(var p=i.onRecoverableError,T=0;T<u.length;T++){var S=u[T];p(S.value,{componentStack:S.stack})}}finally{Z.T=s,ot.p=f}}(eo&3)!==0&&Xc(),mi(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===Om?zl++:(zl=0,Om=i):zl=0,Bl(0)}}function _0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,vl(s)))}function Xc(i){return g0(),p0(),y0(),v0()}function v0(){if(ze!==5)return!1;var i=Pr,s=Cm;Cm=0;var o=Ea(eo),u=Z.T,f=ot.p;try{ot.p=32>o?32:o,Z.T=null,o=Dm,Dm=null;var p=Pr,T=eo;if(ze=0,to=Pr=null,eo=0,(Gt&6)!==0)throw Error(r(331));var S=Gt;if(Gt|=4,n0(p.current),Jv(p,p.current,T,o),Gt=S,Bl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(oe,p)}catch{}return!0}finally{ot.p=f,Z.T=u,_0(i,s)}}function E0(i,s,o){s=xn(o,s),s=lm(i.stateNode,s,2),i=Rr(i,s,2),i!==null&&(Oi(i,2),mi(i))}function Zt(i,s,o){if(i.tag===3)E0(i,i,o);else for(;s!==null;){if(s.tag===3){E0(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vr===null||!Vr.has(u))){i=xn(o,i),o=Sv(2),u=Rr(s,o,2),u!==null&&(Av(o,u,s,i),Oi(u,2),mi(u));break}}s=s.return}}function Mm(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new tR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Sm=!0,f.add(o),i=sR.bind(null,i,s,o),s.then(i,i))}function sR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,Jt===i&&(Lt&o)===o&&(ue===4||ue===3&&(Lt&62914560)===Lt&&300>Rn()-Im?(Gt&2)===0&&no(i,0):Am|=o,Ja===Lt&&(Ja=0)),mi(i)}function w0(i,s){s===0&&(s=Xo()),i=La(i,s),i!==null&&(Oi(i,s),mi(i))}function aR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),w0(i,o)}function oR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),w0(i,o)}function lR(i,s){return fs(i,s)}var Qc=null,ro=null,Vm=!1,Zc=!1,Pm=!1,$s=0;function mi(i){i!==ro&&i.next===null&&(ro===null?Qc=ro=i:ro=ro.next=i),Zc=!0,Vm||(Vm=!0,cR())}function Bl(i,s){if(!Pm&&Zc){Pm=!0;do for(var o=!1,u=Qc;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var T=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-Ge(42|i)+1)-1,p&=f&~(T&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,A0(u,p))}else p=Lt,p=va(u,u===Jt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||_s(u,p)||(o=!0,A0(u,p));u=u.next}while(o);Pm=!1}}function uR(){T0()}function T0(){Zc=Vm=!1;var i=0;$s!==0&&(_R()&&(i=$s),$s=0);for(var s=Rn(),o=null,u=Qc;u!==null;){var f=u.next,p=b0(u,s);p===0?(u.next=null,o===null?Qc=f:o.next=f,f===null&&(ro=o)):(o=u,(i!==0||(p&3)!==0)&&(Zc=!0)),u=f}Bl(i)}function b0(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var T=31-Ge(p),S=1<<T,k=f[T];k===-1?((S&o)===0||(S&u)!==0)&&(f[T]=$o(S,s)):k<=s&&(i.expiredLanes|=S),p&=~S}if(s=Jt,o=Lt,o=va(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Kt===2||Kt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ds(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||_s(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&ds(u),Ea(o)){case 2:case 8:o=ya;break;case 32:o=ms;break;case 268435456:o=_a;break;default:o=ms}return u=S0.bind(null,i),o=fs(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&ds(u),i.callbackPriority=2,i.callbackNode=null,2}function S0(i,s){if(ze!==0&&ze!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Xc()&&i.callbackNode!==o)return null;var u=Lt;return u=va(i,i===Jt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(a0(i,u,s),b0(i,Rn()),i.callbackNode!=null&&i.callbackNode===o?S0.bind(null,i):null)}function A0(i,s){if(Xc())return null;a0(i,s,!0)}function cR(){ER(function(){(Gt&6)!==0?fs(Go,uR):T0()})}function Um(){return $s===0&&($s=Yo()),$s}function R0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ra(""+i)}function I0(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function hR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=R0((f[ge]||null).action),T=u.submitter;T&&(s=(s=T[ge]||null)?R0(s.formAction):T.getAttribute("formAction"),s!==null&&(p=s,T=null));var S=new Ia("action","action",null,u,f);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($s!==0){var k=T?I0(f,T):new FormData(f);im(o,{pending:!0,data:k,method:f.method,action:p},null,k)}}else typeof p=="function"&&(S.preventDefault(),k=T?I0(f,T):new FormData(f),im(o,{pending:!0,data:k,method:f.method,action:p},p,k))},currentTarget:f}]})}}for(var Lm=0;Lm<Td.length;Lm++){var zm=Td[Lm],fR=zm.toLowerCase(),dR=zm[0].toUpperCase()+zm.slice(1);qn(fR,"on"+dR)}qn(a_,"onAnimationEnd"),qn(o_,"onAnimationIteration"),qn(l_,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(O1,"onTransitionRun"),qn(N1,"onTransitionStart"),qn(x1,"onTransitionCancel"),qn(u_,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function C0(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var T=u.length-1;0<=T;T--){var S=u[T],k=S.instance,H=S.currentTarget;if(S=S.listener,k!==p&&f.isPropagationStopped())break t;p=S,f.currentTarget=H;try{p(f)}catch(W){Lc(W)}f.currentTarget=null,p=k}else for(T=0;T<u.length;T++){if(S=u[T],k=S.instance,H=S.currentTarget,S=S.listener,k!==p&&f.isPropagationStopped())break t;p=S,f.currentTarget=H;try{p(f)}catch(W){Lc(W)}f.currentTarget=null,p=k}}}}function kt(i,s){var o=s[Wo];o===void 0&&(o=s[Wo]=new Set);var u=i+"__bubble";o.has(u)||(D0(s,i,2,!1),o.add(u))}function Bm(i,s,o){var u=0;s&&(u|=4),D0(o,i,u,s)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function jm(i){if(!i[Wc]){i[Wc]=!0,Jo.forEach(function(o){o!=="selectionchange"&&(mR.has(o)||Bm(o,!1,i),Bm(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Wc]||(s[Wc]=!0,Bm("selectionchange",!1,s))}}function D0(i,s,o,u){switch(J0(s)){case 2:var f=jR;break;case 8:f=HR;break;default:f=eg}o=f.bind(null,s,o,i),f=void 0,!On||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Hm(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var S=u.stateNode.containerInfo;if(S===f)break;if(T===4)for(T=u.return;T!==null;){var k=T.tag;if((k===3||k===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;S!==null;){if(T=Ni(S),T===null)return;if(k=T.tag,k===5||k===6||k===26||k===27){u=p=T;continue t}S=S.parentNode}}u=u.return}tc(function(){var H=p,W=Dn(o),et=[];t:{var K=c_.get(i);if(K!==void 0){var $=Ia,wt=i;switch(i){case"keypress":if(si(o)===0)break t;case"keydown":case"keyup":$=ka;break;case"focusin":wt="focus",$=Oa;break;case"focusout":wt="blur",$=Oa;break;case"beforeblur":case"afterblur":$=Oa;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=lc;break;case a_:case o_:case l_:$=Na;break;case u_:$=cc;break;case"scroll":case"scrollend":$=ec;break;case"wheel":$=Ma;break;case"copy":case"cut":case"paste":$=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=hl;break;case"toggle":case"beforetoggle":$=fc}var _t=(s&4)!==0,Qt=!_t&&(i==="scroll"||i==="scrollend"),z=_t?K!==null?K+"Capture":null:K;_t=[];for(var U=H,j;U!==null;){var J=U;if(j=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||j===null||z===null||(J=Rs(U,z),J!=null&&_t.push(Hl(U,J,j))),Qt)break;U=U.return}0<_t.length&&(K=new $(K,wt,null,o,W),et.push({event:K,listeners:_t}))}}if((s&7)===0){t:{if(K=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",K&&o!==Vi&&(wt=o.relatedTarget||o.fromElement)&&(Ni(wt)||wt[In]))break t;if(($||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,$?(wt=o.relatedTarget||o.toElement,$=H,wt=wt?Ni(wt):null,wt!==null&&(Qt=l(wt),_t=wt.tag,wt!==Qt||_t!==5&&_t!==27&&_t!==6)&&(wt=null)):($=null,wt=H),$!==wt)){if(_t=Nn,J="onMouseLeave",z="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(_t=hl,J="onPointerLeave",z="onPointerEnter",U="pointer"),Qt=$==null?K:ei($),j=wt==null?K:ei(wt),K=new _t(J,U+"leave",$,o,W),K.target=Qt,K.relatedTarget=j,J=null,Ni(W)===H&&(_t=new _t(z,U+"enter",wt,o,W),_t.target=j,_t.relatedTarget=Qt,J=_t),Qt=J,$&&wt)e:{for(_t=$,z=wt,U=0,j=_t;j;j=so(j))U++;for(j=0,J=z;J;J=so(J))j++;for(;0<U-j;)_t=so(_t),U--;for(;0<j-U;)z=so(z),j--;for(;U--;){if(_t===z||z!==null&&_t===z.alternate)break e;_t=so(_t),z=so(z)}_t=null}else _t=null;$!==null&&O0(et,K,$,_t,!1),wt!==null&&Qt!==null&&O0(et,Qt,wt,_t,!0)}}t:{if(K=H?ei(H):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var ft=Xy;else if(be(K))if(Qy)ft=I1;else{ft=A1;var Nt=S1}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&rl(H.elementType)&&(ft=Xy):ft=R1;if(ft&&(ft=ft(i,H))){Bi(et,ft,o,W);break t}Nt&&Nt(i,K,H),i==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&wr(K,"number",K.value)}switch(Nt=H?ei(H):window,i){case"focusin":(be(Nt)||Nt.contentEditable==="true")&&(Va=Nt,vd=H,ml=null);break;case"focusout":ml=vd=Va=null;break;case"mousedown":Ed=!0;break;case"contextmenu":case"mouseup":case"dragend":Ed=!1,r_(et,o,W);break;case"selectionchange":if(D1)break;case"keydown":case"keyup":r_(et,o,W)}var gt;if(li)t:{switch(i){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Pt?Q(i,o)&&(vt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(vt="onCompositionStart");vt&&(w&&o.locale!=="ko"&&(Pt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Pt&&(gt=al()):(ri=W,Tr="value"in ri?ri.value:ri.textContent,Pt=!0)),Nt=Jc(H,vt),0<Nt.length&&(vt=new ul(vt,i,null,o,W),et.push({event:vt,listeners:Nt}),gt?vt.data=gt:(gt=at(o),gt!==null&&(vt.data=gt)))),(gt=_?Te(i,o):Ut(i,o))&&(vt=Jc(H,"onBeforeInput"),0<vt.length&&(Nt=new ul("onBeforeInput","beforeinput",null,o,W),et.push({event:Nt,listeners:vt}),Nt.data=gt)),hR(et,i,H,o,W)}C0(et,s)})}function Hl(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Jc(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Rs(i,o),f!=null&&u.unshift(Hl(i,f,p)),f=Rs(i,s),f!=null&&u.push(Hl(i,f,p))),i.tag===3)return u;i=i.return}return[]}function so(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function O0(i,s,o,u,f){for(var p=s._reactName,T=[];o!==null&&o!==u;){var S=o,k=S.alternate,H=S.stateNode;if(S=S.tag,k!==null&&k===u)break;S!==5&&S!==26&&S!==27||H===null||(k=H,f?(H=Rs(o,p),H!=null&&T.unshift(Hl(o,H,k))):f||(H=Rs(o,p),H!=null&&T.push(Hl(o,H,k)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var gR=/\r\n?/g,pR=/\u0000|\uFFFD/g;function N0(i){return(typeof i=="string"?i:""+i).replace(gR,`
`).replace(pR,"")}function x0(i,s){return s=N0(s),N0(i)===s}function th(){}function Xt(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Cn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Cn(i,""+u);break;case"className":ni(i,"class",u);break;case"tabIndex":ni(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(i,o,u);break;case"style":il(i,u,p);break;case"data":if(s!=="object"){ni(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ra(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&Xt(i,s,"name",f.name,f,null),Xt(i,s,"formEncType",f.formEncType,f,null),Xt(i,s,"formMethod",f.formMethod,f,null),Xt(i,s,"formTarget",f.formTarget,f,null)):(Xt(i,s,"encType",f.encType,f,null),Xt(i,s,"method",f.method,f,null),Xt(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ra(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=th);break;case"onScroll":u!=null&&kt("scroll",i);break;case"onScrollEnd":u!=null&&kt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Ra(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":kt("beforetoggle",i),kt("toggle",i),Er(i,"popover",u);break;case"xlinkActuate":Pe(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Pe(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Pe(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Pe(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Pe(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Pe(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Pe(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Pe(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Pe(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Er(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=fd.get(o)||o,Er(i,o,u))}}function qm(i,s,o,u,f,p){switch(o){case"style":il(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Cn(i,u):(typeof u=="number"||typeof u=="bigint")&&Cn(i,""+u);break;case"onScroll":u!=null&&kt("scroll",i);break;case"onScrollEnd":u!=null&&kt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wa.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[ge]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Er(i,o,u)}}}function Be(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",i),kt("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Xt(i,s,p,T,o,null)}}f&&Xt(i,s,"srcSet",o.srcSet,o,null),u&&Xt(i,s,"src",o.src,o,null);return;case"input":kt("invalid",i);var S=p=T=f=null,k=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":T=W;break;case"checked":k=W;break;case"defaultChecked":H=W;break;case"value":p=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:Xt(i,s,u,W,o,null)}}bs(i,p,S,k,H,T,f,!1),Aa(i);return;case"select":kt("invalid",i),u=T=p=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":p=S;break;case"defaultValue":T=S;break;case"multiple":u=S;default:Xt(i,s,f,S,o,null)}s=p,o=T,i.multiple=!!u,s!=null?Mi(i,!!u,s,!1):o!=null&&Mi(i,!!u,o,!0);return;case"textarea":kt("invalid",i),p=f=u=null;for(T in o)if(o.hasOwnProperty(T)&&(S=o[T],S!=null))switch(T){case"value":u=S;break;case"defaultValue":f=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Xt(i,s,T,S,o,null)}Ss(i,u,f,p),Aa(i);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Xt(i,s,k,u,o,null)}return;case"dialog":kt("beforetoggle",i),kt("toggle",i),kt("cancel",i),kt("close",i);break;case"iframe":case"object":kt("load",i);break;case"video":case"audio":for(u=0;u<jl.length;u++)kt(jl[u],i);break;case"image":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"embed":case"source":case"link":kt("error",i),kt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Xt(i,s,H,u,o,null)}return;default:if(rl(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&qm(i,s,W,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&Xt(i,s,S,u,o,null))}function yR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,S=null,k=null,H=null,W=null;for($ in o){var et=o[$];if(o.hasOwnProperty($)&&et!=null)switch($){case"checked":break;case"value":break;case"defaultValue":k=et;default:u.hasOwnProperty($)||Xt(i,s,$,null,u,et)}}for(var K in u){var $=u[K];if(et=o[K],u.hasOwnProperty(K)&&($!=null||et!=null))switch(K){case"type":p=$;break;case"name":f=$;break;case"checked":H=$;break;case"defaultChecked":W=$;break;case"value":T=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==et&&Xt(i,s,K,$,u,et)}}dn(i,T,S,k,H,W,p,f);return;case"select":$=T=S=K=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":$=k;default:u.hasOwnProperty(p)||Xt(i,s,p,null,u,k)}for(f in u)if(p=u[f],k=o[f],u.hasOwnProperty(f)&&(p!=null||k!=null))switch(f){case"value":K=p;break;case"defaultValue":S=p;break;case"multiple":T=p;default:p!==k&&Xt(i,s,f,p,u,k)}s=S,o=T,u=$,K!=null?Mi(i,!!o,K,!1):!!u!=!!o&&(s!=null?Mi(i,!!o,s,!0):Mi(i,!!o,o?[]:"",!1));return;case"textarea":$=K=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Xt(i,s,S,null,u,f)}for(T in u)if(f=u[T],p=o[T],u.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":K=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&Xt(i,s,T,f,u,p)}$t(i,K,$);return;case"option":for(var wt in o)if(K=o[wt],o.hasOwnProperty(wt)&&K!=null&&!u.hasOwnProperty(wt))switch(wt){case"selected":i.selected=!1;break;default:Xt(i,s,wt,null,u,K)}for(k in u)if(K=u[k],$=o[k],u.hasOwnProperty(k)&&K!==$&&(K!=null||$!=null))switch(k){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Xt(i,s,k,K,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in o)K=o[_t],o.hasOwnProperty(_t)&&K!=null&&!u.hasOwnProperty(_t)&&Xt(i,s,_t,null,u,K);for(H in u)if(K=u[H],$=o[H],u.hasOwnProperty(H)&&K!==$&&(K!=null||$!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:Xt(i,s,H,K,u,$)}return;default:if(rl(s)){for(var Qt in o)K=o[Qt],o.hasOwnProperty(Qt)&&K!==void 0&&!u.hasOwnProperty(Qt)&&qm(i,s,Qt,void 0,u,K);for(W in u)K=u[W],$=o[W],!u.hasOwnProperty(W)||K===$||K===void 0&&$===void 0||qm(i,s,W,K,u,$);return}}for(var z in o)K=o[z],o.hasOwnProperty(z)&&K!=null&&!u.hasOwnProperty(z)&&Xt(i,s,z,null,u,K);for(et in u)K=u[et],$=o[et],!u.hasOwnProperty(et)||K===$||K==null&&$==null||Xt(i,s,et,K,u,$)}var Fm=null,Gm=null;function eh(i){return i.nodeType===9?i:i.ownerDocument}function k0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Km(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $m=null;function _R(){var i=window.event;return i&&i.type==="popstate"?i===$m?!1:($m=i,!0):($m=null,!1)}var V0=typeof setTimeout=="function"?setTimeout:void 0,vR=typeof clearTimeout=="function"?clearTimeout:void 0,P0=typeof Promise=="function"?Promise:void 0,ER=typeof queueMicrotask=="function"?queueMicrotask:typeof P0<"u"?function(i){return P0.resolve(null).then(i).catch(wR)}:V0;function wR(i){setTimeout(function(){throw i})}function Lr(i){return i==="head"}function U0(i,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var T=i.ownerDocument;if(o&1&&ql(T.documentElement),o&2&&ql(T.body),o&4)for(o=T.head,ql(o),T=o.firstChild;T;){var S=T.nextSibling,k=T.nodeName;T[vs]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=S}}if(f===0){i.removeChild(p),Zl(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Zl(s)}function Ym(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ym(o),vr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function TR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[vs])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Gn(i.nextSibling),i===null)break}return null}function bR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Gn(i.nextSibling),i===null))return null;return i}function Xm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function SR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Gn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Qm=null;function L0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function z0(i,s,o){switch(s=eh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function ql(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);vr(i)}var Ln=new Map,B0=new Set;function nh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ji=ot.d;ot.d={f:AR,r:RR,D:IR,C:CR,L:DR,m:OR,X:xR,S:NR,M:kR};function AR(){var i=Ji.f(),s=$c();return i||s}function RR(i){var s=ti(i);s!==null&&s.tag===5&&s.type==="form"?av(s):Ji.r(i)}var ao=typeof document>"u"?null:document;function j0(i,s,o){var u=ao;if(u&&typeof s=="string"&&s){var f=pe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),B0.has(f)||(B0.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Be(s,"link",i),ce(s),u.head.appendChild(s)))}}function IR(i){Ji.D(i),j0("dns-prefetch",i,null)}function CR(i,s){Ji.C(i,s),j0("preconnect",i,s)}function DR(i,s,o){Ji.L(i,s,o);var u=ao;if(u&&i&&s){var f='link[rel="preload"][as="'+pe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+pe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+pe(o.imageSizes)+'"]')):f+='[href="'+pe(i)+'"]';var p=f;switch(s){case"style":p=oo(i);break;case"script":p=lo(i)}Ln.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Ln.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(Fl(p))||s==="script"&&u.querySelector(Gl(p))||(s=u.createElement("link"),Be(s,"link",i),ce(s),u.head.appendChild(s)))}}function OR(i,s){Ji.m(i,s);var o=ao;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+pe(u)+'"][href="'+pe(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=lo(i)}if(!Ln.has(p)&&(i=y({rel:"modulepreload",href:i},s),Ln.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gl(p)))return}u=o.createElement("link"),Be(u,"link",i),ce(u),o.head.appendChild(u)}}}function NR(i,s,o){Ji.S(i,s,o);var u=ao;if(u&&i){var f=Je(u).hoistableStyles,p=oo(i);s=s||"default";var T=f.get(p);if(!T){var S={loading:0,preload:null};if(T=u.querySelector(Fl(p)))S.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Ln.get(p))&&Zm(i,o);var k=T=u.createElement("link");ce(k),Be(k,"link",i),k._p=new Promise(function(H,W){k.onload=H,k.onerror=W}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ih(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:S},f.set(p,T)}}}function xR(i,s){Ji.X(i,s);var o=ao;if(o&&i){var u=Je(o).hoistableScripts,f=lo(i),p=u.get(f);p||(p=o.querySelector(Gl(f)),p||(i=y({src:i,async:!0},s),(s=Ln.get(f))&&Wm(i,s),p=o.createElement("script"),ce(p),Be(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function kR(i,s){Ji.M(i,s);var o=ao;if(o&&i){var u=Je(o).hoistableScripts,f=lo(i),p=u.get(f);p||(p=o.querySelector(Gl(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=Ln.get(f))&&Wm(i,s),p=o.createElement("script"),ce(p),Be(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function H0(i,s,o,u){var f=(f=bt.current)?nh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=oo(o.href),o=Je(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=oo(o.href);var p=Je(f).hoistableStyles,T=p.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,T),(p=f.querySelector(Fl(i)))&&!p._p&&(T.instance=p,T.state.loading=5),Ln.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ln.set(i,o),p||MR(f,i,o,T.state))),s&&u===null)throw Error(r(528,""));return T}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=lo(o),o=Je(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function oo(i){return'href="'+pe(i)+'"'}function Fl(i){return'link[rel="stylesheet"]['+i+"]"}function q0(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function MR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Be(s,"link",o),ce(s),i.head.appendChild(s))}function lo(i){return'[src="'+pe(i)+'"]'}function Gl(i){return"script[async]"+i}function F0(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+pe(o.href)+'"]');if(u)return s.instance=u,ce(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),ce(u),Be(u,"style",f),ih(u,o.precedence,i),s.instance=u;case"stylesheet":f=oo(o.href);var p=i.querySelector(Fl(f));if(p)return s.state.loading|=4,s.instance=p,ce(p),p;u=q0(o),(f=Ln.get(f))&&Zm(u,f),p=(i.ownerDocument||i).createElement("link"),ce(p);var T=p;return T._p=new Promise(function(S,k){T.onload=S,T.onerror=k}),Be(p,"link",u),s.state.loading|=4,ih(p,o.precedence,i),s.instance=p;case"script":return p=lo(o.src),(f=i.querySelector(Gl(p)))?(s.instance=f,ce(f),f):(u=o,(f=Ln.get(p))&&(u=y({},o),Wm(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),ce(f),Be(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ih(u,o.precedence,i));return s.instance}function ih(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,T=0;T<u.length;T++){var S=u[T];if(S.dataset.precedence===s)p=S;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Zm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Wm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var rh=null;function G0(i,s,o){if(rh===null){var u=new Map,f=rh=new Map;f.set(o,u)}else f=rh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[vs]||p[we]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(s)||"";T=i+T;var S=u.get(T);S?S.push(p):u.set(T,[p])}}return u}function K0(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function VR(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Kl=null;function PR(){}function UR(i,s,o){if(Kl===null)throw Error(r(475));var u=Kl;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=oo(o.href),p=i.querySelector(Fl(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=sh.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,ce(p);return}p=i.ownerDocument||i,o=q0(o),(f=Ln.get(f))&&Zm(o,f),p=p.createElement("link"),ce(p);var T=p;T._p=new Promise(function(S,k){T.onload=S,T.onerror=k}),Be(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=sh.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function LR(){if(Kl===null)throw Error(r(475));var i=Kl;return i.stylesheets&&i.count===0&&Jm(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&Jm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function sh(){if(this.count--,this.count===0){if(this.stylesheets)Jm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ah=null;function Jm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ah=new Map,s.forEach(zR,i),ah=null,sh.call(i))}function zR(i,s){if(!(s.state.loading&4)){var o=ah.get(i);if(o)var u=o.get(null);else{o=new Map,ah.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}f=s.instance,T=f.getAttribute("data-precedence"),p=o.get(T)||u,p===u&&o.set(null,f),o.set(T,f),this.count++,u=sh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var $l={$$typeof:G,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function BR(i,s,o,u,f,p,T,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Y0(i,s,o,u,f,p,T,S,k,H,W,et){return i=new BR(i,s,o,T,S,k,H,et),s=1,p===!0&&(s|=24),p=gn(3,null,null,s),i.current=p,p.stateNode=i,s=Md(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Ld(p),i}function X0(i){return i?(i=za,i):za}function Q0(i,s,o,u,f,p){f=X0(f),u.context===null?u.context=f:u.pendingContext=f,u=Ar(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Rr(i,u,s),o!==null&&(En(o,i,s),bl(o,i,s))}function Z0(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function tg(i,s){Z0(i,s),(i=i.alternate)&&Z0(i,s)}function W0(i){if(i.tag===13){var s=La(i,67108864);s!==null&&En(s,i,67108864),tg(i,67108864)}}var oh=!0;function jR(i,s,o,u){var f=Z.T;Z.T=null;var p=ot.p;try{ot.p=2,eg(i,s,o,u)}finally{ot.p=p,Z.T=f}}function HR(i,s,o,u){var f=Z.T;Z.T=null;var p=ot.p;try{ot.p=8,eg(i,s,o,u)}finally{ot.p=p,Z.T=f}}function eg(i,s,o,u){if(oh){var f=ng(u);if(f===null)Hm(i,s,u,lh,o),tE(i,u);else if(FR(f,i,s,o,u))u.stopPropagation();else if(tE(i,u),s&4&&-1<qR.indexOf(i)){for(;f!==null;){var p=ti(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Bn(p.pendingLanes);if(T!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var k=1<<31-Ge(T);S.entanglements[1]|=k,T&=~k}mi(p),(Gt&6)===0&&(Gc=Rn()+500,Bl(0))}}break;case 13:S=La(p,2),S!==null&&En(S,p,2),$c(),tg(p,2)}if(p=ng(u),p===null&&Hm(i,s,u,lh,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Hm(i,s,u,null,o)}}function ng(i){return i=Dn(i),ig(i)}var lh=null;function ig(i){if(lh=null,i=Ni(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return lh=i,null}function J0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ad()){case Go:return 2;case ya:return 8;case ms:case od:return 32;case _a:return 268435456;default:return 32}default:return 32}}var rg=!1,zr=null,Br=null,jr=null,Yl=new Map,Xl=new Map,Hr=[],qR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tE(i,s){switch(i){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Yl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(s.pointerId)}}function Ql(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=ti(s),s!==null&&W0(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function FR(i,s,o,u,f){switch(s){case"focusin":return zr=Ql(zr,i,s,o,u,f),!0;case"dragenter":return Br=Ql(Br,i,s,o,u,f),!0;case"mouseover":return jr=Ql(jr,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Yl.set(p,Ql(Yl.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Xl.set(p,Ql(Xl.get(p)||null,i,s,o,u,f)),!0}return!1}function eE(i){var s=Ni(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,$u(i.priority,function(){if(o.tag===13){var u=vn();u=pr(u);var f=La(o,u);f!==null&&En(f,o,u),tg(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function uh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=ng(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Vi=u,o.target.dispatchEvent(u),Vi=null}else return s=ti(o),s!==null&&W0(s),i.blockedOn=o,!1;s.shift()}return!0}function nE(i,s,o){uh(i)&&o.delete(s)}function GR(){rg=!1,zr!==null&&uh(zr)&&(zr=null),Br!==null&&uh(Br)&&(Br=null),jr!==null&&uh(jr)&&(jr=null),Yl.forEach(nE),Xl.forEach(nE)}function ch(i,s){i.blockedOn===s&&(i.blockedOn=null,rg||(rg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,GR)))}var hh=null;function iE(i){hh!==i&&(hh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){hh===i&&(hh=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(ig(u||o)===null)continue;break}var p=ti(o);p!==null&&(i.splice(s,3),s-=3,im(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Zl(i){function s(k){return ch(k,i)}zr!==null&&ch(zr,i),Br!==null&&ch(Br,i),jr!==null&&ch(jr,i),Yl.forEach(s),Xl.forEach(s);for(var o=0;o<Hr.length;o++){var u=Hr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Hr.length&&(o=Hr[0],o.blockedOn===null);)eE(o),o.blockedOn===null&&Hr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],T=f[ge]||null;if(typeof p=="function")T||iE(o);else if(T){var S=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[ge]||null)S=T.formAction;else if(ig(f)!==null)continue}else S=T.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),iE(o)}}}function sg(i){this._internalRoot=i}fh.prototype.render=sg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=vn();Q0(o,u,i,s,null,null)},fh.prototype.unmount=sg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Q0(i.current,2,null,i,null,null),$c(),s[In]=null}};function fh(i){this._internalRoot=i}fh.prototype.unstable_scheduleHydration=function(i){if(i){var s=yr();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Hr.length&&s!==0&&s<Hr[o].priority;o++);Hr.splice(o,0,i),o===0&&eE(i)}};var rE=t.version;if(rE!=="19.1.0")throw Error(r(527,rE,"19.1.0"));ot.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=m(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var KR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{oe=dh.inject(KR),Ft=dh}catch{}}return Jl.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=Ev,p=wv,T=Tv,S=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=Y0(i,1,!1,null,null,o,u,f,p,T,S,null),i[In]=s.current,jm(i),new sg(s)},Jl.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=Ev,T=wv,S=Tv,k=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=Y0(i,1,!0,s,o??null,u,f,p,T,S,k,H),s.context=X0(null),o=s.current,u=vn(),u=pr(u),f=Ar(u),f.callback=null,Rr(o,f,u),o=u,s.current.lanes=o,Oi(s,o),mi(s),i[In]=s.current,jm(i),new fh(s)},Jl.version="19.1.0",Jl}var mE;function iI(){if(mE)return og.exports;mE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),og.exports=nI(),og.exports}var rI=iI(),lt=If();const xp=YR(lt);var Bg=function(e,t){return Bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Bg(e,t)};function sI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Bg(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Me=function(){return Me=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Me.apply(this,arguments)};function aI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function uo(e,t,n,r){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function d(y){try{g(r.next(y))}catch(v){c(v)}}function m(y){try{g(r.throw(y))}catch(v){c(v)}}function g(y){y.done?l(y.value):a(y.value).then(d,m)}g((r=r.apply(e,[])).next())})}function co(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(g){return function(y){return m([g,y])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(y){g=[6,y],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function pi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mp(e,t){return e(t={exports:{}},t.exports),t.exports}var Ys=Mp(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function r(){var a=this;this.locked=new Map,this.addToLocked=function(l,c){var d=a.locked.get(l);d===void 0?c===void 0?a.locked.set(l,[]):a.locked.set(l,[c]):c!==void 0&&(d.unshift(c),a.locked.set(l,d))},this.isLocked=function(l){return a.locked.has(l)},this.lock=function(l){return new Promise(function(c,d){a.isLocked(l)?a.addToLocked(l,c):(a.addToLocked(l),c())})},this.unlock=function(l){var c=a.locked.get(l);if(c!==void 0&&c.length!==0){var d=c.pop();a.locked.set(l,c),d!==void 0&&setTimeout(d,0)}else a.locked.delete(l)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();t.default=function(){return n.getInstance()}});kp(Ys);var oI=kp(Mp(function(e,t){var n=Zs&&Zs.__awaiter||function(y,v,E,b){return new(E||(E=Promise))(function(I,M){function N(G){try{F(b.next(G))}catch(q){M(q)}}function Y(G){try{F(b.throw(G))}catch(q){M(q)}}function F(G){G.done?I(G.value):new E(function(q){q(G.value)}).then(N,Y)}F((b=b.apply(y,v||[])).next())})},r=Zs&&Zs.__generator||function(y,v){var E,b,I,M,N={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return M={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function Y(F){return function(G){return function(q){if(E)throw new TypeError("Generator is already executing.");for(;N;)try{if(E=1,b&&(I=2&q[0]?b.return:q[0]?b.throw||((I=b.return)&&I.call(b),0):b.next)&&!(I=I.call(b,q[1])).done)return I;switch(b=0,I&&(q=[2&q[0],I.value]),q[0]){case 0:case 1:I=q;break;case 4:return N.label++,{value:q[1],done:!1};case 5:N.label++,b=q[1],q=[0];continue;case 7:q=N.ops.pop(),N.trys.pop();continue;default:if(I=N.trys,!((I=I.length>0&&I[I.length-1])||q[0]!==6&&q[0]!==2)){N=0;continue}if(q[0]===3&&(!I||q[1]>I[0]&&q[1]<I[3])){N.label=q[1];break}if(q[0]===6&&N.label<I[1]){N.label=I[1],I=q;break}if(I&&N.label<I[2]){N.label=I[2],N.ops.push(q);break}I[2]&&N.ops.pop(),N.trys.pop();continue}q=v.call(y,N)}catch(X){q=[6,X],b=0}finally{E=I=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([F,G])}}},a=Zs;Object.defineProperty(t,"__esModule",{value:!0});var l="browser-tabs-lock-key",c={key:function(y){return n(a,void 0,void 0,function(){return r(this,function(v){throw new Error("Unsupported")})})},getItem:function(y){return n(a,void 0,void 0,function(){return r(this,function(v){throw new Error("Unsupported")})})},clear:function(){return n(a,void 0,void 0,function(){return r(this,function(y){return[2,window.localStorage.clear()]})})},removeItem:function(y){return n(a,void 0,void 0,function(){return r(this,function(v){throw new Error("Unsupported")})})},setItem:function(y,v){return n(a,void 0,void 0,function(){return r(this,function(E){throw new Error("Unsupported")})})},keySync:function(y){return window.localStorage.key(y)},getItemSync:function(y){return window.localStorage.getItem(y)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(y){return window.localStorage.removeItem(y)},setItemSync:function(y,v){return window.localStorage.setItem(y,v)}};function d(y){return new Promise(function(v){return setTimeout(v,y)})}function m(y){for(var v="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",E="",b=0;b<y;b++)E+=v[Math.floor(Math.random()*v.length)];return E}var g=function(){function y(v){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+m(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=v,y.waiters===void 0&&(y.waiters=[])}return y.prototype.acquireLock=function(v,E){return E===void 0&&(E=5e3),n(this,void 0,void 0,function(){var b,I,M,N,Y,F,G;return r(this,function(q){switch(q.label){case 0:b=Date.now()+m(4),I=Date.now()+E,M=l+"-"+v,N=this.storageHandler===void 0?c:this.storageHandler,q.label=1;case 1:return Date.now()<I?[4,d(30)]:[3,8];case 2:return q.sent(),N.getItemSync(M)!==null?[3,5]:(Y=this.id+"-"+v+"-"+b,[4,d(Math.floor(25*Math.random()))]);case 3:return q.sent(),N.setItemSync(M,JSON.stringify({id:this.id,iat:b,timeoutKey:Y,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,d(30)];case 4:return q.sent(),(F=N.getItemSync(M))!==null&&(G=JSON.parse(F)).id===this.id&&G.iat===b?(this.acquiredIatSet.add(b),this.refreshLockWhileAcquired(M,b),[2,!0]):[3,7];case 5:return y.lockCorrector(this.storageHandler===void 0?c:this.storageHandler),[4,this.waitForSomethingToChange(I)];case 6:q.sent(),q.label=7;case 7:return b=Date.now()+m(4),[3,1];case 8:return[2,!1]}})})},y.prototype.refreshLockWhileAcquired=function(v,E){return n(this,void 0,void 0,function(){var b=this;return r(this,function(I){return setTimeout(function(){return n(b,void 0,void 0,function(){var M,N,Y;return r(this,function(F){switch(F.label){case 0:return[4,Ys.default().lock(E)];case 1:return F.sent(),this.acquiredIatSet.has(E)?(M=this.storageHandler===void 0?c:this.storageHandler,(N=M.getItemSync(v))===null?(Ys.default().unlock(E),[2]):((Y=JSON.parse(N)).timeRefreshed=Date.now(),M.setItemSync(v,JSON.stringify(Y)),Ys.default().unlock(E),this.refreshLockWhileAcquired(v,E),[2])):(Ys.default().unlock(E),[2])}})})},1e3),[2]})})},y.prototype.waitForSomethingToChange=function(v){return n(this,void 0,void 0,function(){return r(this,function(E){switch(E.label){case 0:return[4,new Promise(function(b){var I=!1,M=Date.now(),N=!1;function Y(){if(N||(window.removeEventListener("storage",Y),y.removeFromWaiting(Y),clearTimeout(F),N=!0),!I){I=!0;var G=50-(Date.now()-M);G>0?setTimeout(b,G):b(null)}}window.addEventListener("storage",Y),y.addToWaiting(Y);var F=setTimeout(Y,Math.max(0,v-Date.now()))})];case 1:return E.sent(),[2]}})})},y.addToWaiting=function(v){this.removeFromWaiting(v),y.waiters!==void 0&&y.waiters.push(v)},y.removeFromWaiting=function(v){y.waiters!==void 0&&(y.waiters=y.waiters.filter(function(E){return E!==v}))},y.notifyWaiters=function(){y.waiters!==void 0&&y.waiters.slice().forEach(function(v){return v()})},y.prototype.releaseLock=function(v){return n(this,void 0,void 0,function(){return r(this,function(E){switch(E.label){case 0:return[4,this.releaseLock__private__(v)];case 1:return[2,E.sent()]}})})},y.prototype.releaseLock__private__=function(v){return n(this,void 0,void 0,function(){var E,b,I,M;return r(this,function(N){switch(N.label){case 0:return E=this.storageHandler===void 0?c:this.storageHandler,b=l+"-"+v,(I=E.getItemSync(b))===null?[2]:(M=JSON.parse(I)).id!==this.id?[3,2]:[4,Ys.default().lock(M.iat)];case 1:N.sent(),this.acquiredIatSet.delete(M.iat),E.removeItemSync(b),Ys.default().unlock(M.iat),y.notifyWaiters(),N.label=2;case 2:return[2]}})})},y.lockCorrector=function(v){for(var E=Date.now()-5e3,b=v,I=[],M=0;;){var N=b.keySync(M);if(N===null)break;I.push(N),M++}for(var Y=!1,F=0;F<I.length;F++){var G=I[F];if(G.includes(l)){var q=b.getItemSync(G);if(q!==null){var X=JSON.parse(q);(X.timeRefreshed===void 0&&X.timeAcquired<E||X.timeRefreshed!==void 0&&X.timeRefreshed<E)&&(b.removeItemSync(G),Y=!0)}}}Y&&y.notifyWaiters()},y.waiters=void 0,y}();t.default=g}));const lI={timeoutInSeconds:60},GT={name:"auth0-spa-js",version:"2.1.3"},KT=()=>Date.now();class Qe extends Error{constructor(t,n){super(n),this.error=t,this.error_description=n,Object.setPrototypeOf(this,Qe.prototype)}static fromPayload({error:t,error_description:n}){return new Qe(t,n)}}class Vp extends Qe{constructor(t,n,r,a=null){super(t,n),this.state=r,this.appState=a,Object.setPrototypeOf(this,Vp.prototype)}}class yu extends Qe{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,yu.prototype)}}class Pp extends yu{constructor(t){super(),this.popup=t,Object.setPrototypeOf(this,Pp.prototype)}}class Up extends Qe{constructor(t){super("cancelled","Popup closed"),this.popup=t,Object.setPrototypeOf(this,Up.prototype)}}class Lp extends Qe{constructor(t,n,r){super(t,n),this.mfa_token=r,Object.setPrototypeOf(this,Lp.prototype)}}class Cf extends Qe{constructor(t,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${gE(t,["default"])}', scope: '${gE(n)}')`),this.audience=t,this.scope=n,Object.setPrototypeOf(this,Cf.prototype)}}function gE(e,t=[]){return e&&!t.includes(e)?e:""}const Ch=()=>window.crypto,fg=()=>{const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let t="";return Array.from(Ch().getRandomValues(new Uint8Array(43))).forEach(n=>t+=e[n%e.length]),t},pE=e=>btoa(e),jg=e=>{var{clientId:t}=e,n=pi(e,["clientId"]);return new URLSearchParams((r=>Object.keys(r).filter(a=>r[a]!==void 0).reduce((a,l)=>Object.assign(Object.assign({},a),{[l]:r[l]}),{}))(Object.assign({client_id:t},n))).toString()},yE=e=>(t=>decodeURIComponent(atob(t).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(e.replace(/_/g,"/").replace(/-/g,"+")),uI=async(e,t)=>{const n=await fetch(e,t);return{ok:n.ok,json:await n.json()}},cI=async(e,t,n)=>{const r=new AbortController;let a;return t.signal=r.signal,Promise.race([uI(e,t),new Promise((l,c)=>{a=setTimeout(()=>{r.abort(),c(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(a)})},hI=async(e,t,n,r,a,l,c)=>{return d={auth:{audience:t,scope:n},timeout:a,fetchUrl:e,fetchOptions:r,useFormData:c},m=l,new Promise(function(g,y){const v=new MessageChannel;v.port1.onmessage=function(E){E.data.error?y(new Error(E.data.error)):g(E.data),v.port1.close()},m.postMessage(d,[v.port2])});var d,m},fI=async(e,t,n,r,a,l,c=1e4)=>a?hI(e,t,n,r,c,a,l):cI(e,r,c);async function dI(e,t){var{baseUrl:n,timeout:r,audience:a,scope:l,auth0Client:c,useFormData:d}=e,m=pi(e,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const g=d?jg(m):JSON.stringify(m);return await async function(y,v,E,b,I,M,N){let Y,F=null;for(let R=0;R<3;R++)try{Y=await fI(y,E,b,I,M,N,v),F=null;break}catch(C){F=C}if(F)throw F;const G=Y.json,{error:q,error_description:X}=G,tt=pi(G,["error","error_description"]),{ok:D}=Y;if(!D){const R=X||`HTTP error. Unable to fetch ${y}`;throw q==="mfa_required"?new Lp(q,R,tt.mfa_token):q==="missing_refresh_token"?new Cf(E,b):new Qe(q||"request_error",R)}return tt}(`${n}/oauth/token`,r,a||"default",l,{method:"POST",body:g,headers:{"Content-Type":d?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(c||GT))}},t,d)}const mh=(...e)=>{return(t=e.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(t))).join(" ");var t};class _i{constructor(t,n="@@auth0spajs@@",r){this.prefix=n,this.suffix=r,this.clientId=t.clientId,this.scope=t.scope,this.audience=t.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(t){const[n,r,a,l]=t.split("::");return new _i({clientId:r,scope:l,audience:a},n)}static fromCacheEntry(t){const{scope:n,audience:r,client_id:a}=t;return new _i({scope:n,audience:r,clientId:a})}}let mI=class{set(t,n){localStorage.setItem(t,JSON.stringify(n))}get(t){const n=window.localStorage.getItem(t);if(n)try{return JSON.parse(n)}catch{return}}remove(t){localStorage.removeItem(t)}allKeys(){return Object.keys(window.localStorage).filter(t=>t.startsWith("@@auth0spajs@@"))}};class $T{constructor(){this.enclosedCache=function(){let t={};return{set(n,r){t[n]=r},get(n){const r=t[n];if(r)return r},remove(n){delete t[n]},allKeys:()=>Object.keys(t)}}()}}let gI=class{constructor(t,n,r){this.cache=t,this.keyManifest=n,this.nowProvider=r||KT}async setIdToken(t,n,r){var a;const l=this.getIdTokenCacheKey(t);await this.cache.set(l,{id_token:n,decodedToken:r}),await((a=this.keyManifest)===null||a===void 0?void 0:a.add(l))}async getIdToken(t){const n=await this.cache.get(this.getIdTokenCacheKey(t.clientId));if(!n&&t.scope&&t.audience){const r=await this.get(t);return!r||!r.id_token||!r.decodedToken?void 0:{id_token:r.id_token,decodedToken:r.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(t,n=0){var r;let a=await this.cache.get(t.toKey());if(!a){const d=await this.getCacheKeys();if(!d)return;const m=this.matchExistingCacheKey(t,d);m&&(a=await this.cache.get(m))}if(!a)return;const l=await this.nowProvider(),c=Math.floor(l/1e3);return a.expiresAt-n<c?a.body.refresh_token?(a.body={refresh_token:a.body.refresh_token},await this.cache.set(t.toKey(),a),a.body):(await this.cache.remove(t.toKey()),void await((r=this.keyManifest)===null||r===void 0?void 0:r.remove(t.toKey()))):a.body}async set(t){var n;const r=new _i({clientId:t.client_id,scope:t.scope,audience:t.audience}),a=await this.wrapCacheEntry(t);await this.cache.set(r.toKey(),a),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(r.toKey()))}async clear(t){var n;const r=await this.getCacheKeys();r&&(await r.filter(a=>!t||a.includes(t)).reduce(async(a,l)=>{await a,await this.cache.remove(l)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(t){const n=await this.nowProvider();return{body:t,expiresAt:Math.floor(n/1e3)+t.expires_in}}async getCacheKeys(){var t;return this.keyManifest?(t=await this.keyManifest.get())===null||t===void 0?void 0:t.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(t){return new _i({clientId:t},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(t,n){return n.filter(r=>{var a;const l=_i.fromKey(r),c=new Set(l.scope&&l.scope.split(" ")),d=((a=t.scope)===null||a===void 0?void 0:a.split(" "))||[],m=l.scope&&d.reduce((g,y)=>g&&c.has(y),!0);return l.prefix==="@@auth0spajs@@"&&l.clientId===t.clientId&&l.audience===t.audience&&m})[0]}};class pI{constructor(t,n,r){this.storage=t,this.clientId=n,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(t){this.storage.save(this.storageKey,t,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const tu=e=>typeof e=="number",yI=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],_I=e=>{if(!e.id_token)throw new Error("ID token is required but missing");const t=(l=>{const c=l.split("."),[d,m,g]=c;if(c.length!==3||!d||!m||!g)throw new Error("ID token could not be decoded");const y=JSON.parse(yE(m)),v={__raw:l},E={};return Object.keys(y).forEach(b=>{v[b]=y[b],yI.includes(b)||(E[b]=y[b])}),{encoded:{header:d,payload:m,signature:g},header:JSON.parse(yE(d)),claims:v,user:E}})(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${e.iss}", found "${t.claims.iss}"`);if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(t.header.alg!=="RS256")throw new Error(`Signature algorithm of "${t.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!t.claims.aud||typeof t.claims.aud!="string"&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but was not one of "${t.claims.aud.join(", ")}"`);if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${e.aud}", found "${t.claims.azp}"`)}}else if(t.claims.aud!==e.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but found "${t.claims.aud}"`);if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${e.nonce}", found "${t.claims.nonce}"`)}if(e.max_age&&!tu(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(t.claims.exp==null||!tu(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!tu(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=e.leeway||60,r=new Date(e.now||Date.now()),a=new Date(0);if(a.setUTCSeconds(t.claims.exp+n),r>a)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${a})`);if(t.claims.nbf!=null&&tu(t.claims.nbf)){const l=new Date(0);if(l.setUTCSeconds(t.claims.nbf-n),r<l)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${l}`)}if(t.claims.auth_time!=null&&tu(t.claims.auth_time)){const l=new Date(0);if(l.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+n),r>l)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${l}`)}if(e.organization){const l=e.organization.trim();if(l.startsWith("org_")){const c=l;if(!t.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(c!==t.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${c}", found "${t.claims.org_id}"`)}else{const c=l.toLowerCase();if(!t.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(c!==t.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${c}", found "${t.claims.org_name}"`)}}return t};var Ws=Mp(function(e,t){var n=Zs&&Zs.__assign||function(){return n=Object.assign||function(m){for(var g,y=1,v=arguments.length;y<v;y++)for(var E in g=arguments[y])Object.prototype.hasOwnProperty.call(g,E)&&(m[E]=g[E]);return m},n.apply(this,arguments)};function r(m,g){if(!g)return"";var y="; "+m;return g===!0?y:y+"="+g}function a(m,g,y){return encodeURIComponent(m).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(g).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(v){if(typeof v.expires=="number"){var E=new Date;E.setMilliseconds(E.getMilliseconds()+864e5*v.expires),v.expires=E}return r("Expires",v.expires?v.expires.toUTCString():"")+r("Domain",v.domain)+r("Path",v.path)+r("Secure",v.secure)+r("SameSite",v.sameSite)}(y)}function l(m){for(var g={},y=m?m.split("; "):[],v=/(%[\dA-F]{2})+/gi,E=0;E<y.length;E++){var b=y[E].split("="),I=b.slice(1).join("=");I.charAt(0)==='"'&&(I=I.slice(1,-1));try{g[b[0].replace(v,decodeURIComponent)]=I.replace(v,decodeURIComponent)}catch{}}return g}function c(){return l(document.cookie)}function d(m,g,y){document.cookie=a(m,g,n({path:"/"},y))}t.__esModule=!0,t.encode=a,t.parse=l,t.getAll=c,t.get=function(m){return c()[m]},t.set=d,t.remove=function(m,g){d(m,"",n(n({},g),{expires:-1}))}});kp(Ws),Ws.encode,Ws.parse,Ws.getAll;var vI=Ws.get,YT=Ws.set,XT=Ws.remove;const ho={get(e){const t=vI(e);if(t!==void 0)return JSON.parse(t)},save(e,t,n){let r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),YT(e,JSON.stringify(t),r)},remove(e,t){let n={};t!=null&&t.cookieDomain&&(n.domain=t.cookieDomain),XT(e,n)}},EI={get(e){return ho.get(e)||ho.get(`_legacy_${e}`)},save(e,t,n){let r={};window.location.protocol==="https:"&&(r={secure:!0}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),YT(`_legacy_${e}`,JSON.stringify(t),r),ho.save(e,t,n)},remove(e,t){let n={};t!=null&&t.cookieDomain&&(n.domain=t.cookieDomain),XT(e,n),ho.remove(e,t),ho.remove(`_legacy_${e}`,t)}},wI={get(e){if(typeof sessionStorage>"u")return;const t=sessionStorage.getItem(e);return t!=null?JSON.parse(t):void 0},save(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove(e){sessionStorage.removeItem(e)}};function TI(e,t,n){var r=t===void 0?null:t,a=function(m,g){var y=atob(m);if(g){for(var v=new Uint8Array(y.length),E=0,b=y.length;E<b;++E)v[E]=y.charCodeAt(E);return String.fromCharCode.apply(null,new Uint16Array(v.buffer))}return y}(e,n!==void 0&&n),l=a.indexOf(`
`,10)+1,c=a.substring(l)+(r?"//# sourceMappingURL="+r:""),d=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(d)}var _E,vE,EE,dg,bI=(_E="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",vE=null,EE=!1,function(e){return dg=dg||TI(_E,vE,EE),new Worker(dg,e)});const mg={};let SI=class{constructor(t,n){this.cache=t,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(t){var n;const r=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);r.add(t),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(t){const n=await this.cache.get(this.manifestKey);if(n){const r=new Set(n.keys);return r.delete(t),r.size>0?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(t){return`@@auth0spajs@@::${t}`}};const AI={memory:()=>new $T().enclosedCache,localstorage:()=>new mI},wE=e=>AI[e],TE=e=>{const{openUrl:t,onRedirect:n}=e,r=pi(e,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:t===!1||t?t:n})},gg=new oI;class RI{constructor(t){let n,r;if(this.userCache=new $T().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await gg.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),t),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),t.authorizationParams)}),typeof window<"u"&&(()=>{if(!Ch())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Ch().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)r=t.cache;else{if(n=t.cacheLocation||"memory",!wE(n))throw new Error(`Invalid cache location "${n}"`);r=wE(n)()}this.httpTimeoutMs=t.httpTimeoutInSeconds?1e3*t.httpTimeoutInSeconds:1e4,this.cookieStorage=t.legacySameSiteCookie===!1?ho:EI,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(c=>`auth0.${c}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;const a=t.useCookiesForTransactions?this.cookieStorage:wI;var l;this.scope=mh("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new pI(a,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||KT,this.cacheManager=new gI(r,r.allKeys?void 0:new SI(r,this.options.clientId),this.nowProvider),this.domainUrl=(l=this.options.domain,/^https?:\/\//.test(l)?l:`https://${l}`),this.tokenIssuer=((c,d)=>c?c.startsWith("https://")?c:`https://${c}/`:`${d}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new bI)}_url(t){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||GT)));return`${this.domainUrl}${t}&auth0Client=${n}`}_authorizeUrl(t){return this._url(`/authorize?${jg(t)}`)}async _verifyIdToken(t,n,r){const a=await this.nowProvider();return _I({iss:this.tokenIssuer,aud:this.options.clientId,id_token:t,nonce:n,organization:r,leeway:this.options.leeway,max_age:(l=this.options.authorizationParams.max_age,typeof l!="string"?l:parseInt(l,10)||void 0),now:a});var l}_processOrgHint(t){t?this.cookieStorage.save(this.orgHintCookieName,t,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(t,n,r){const a=pE(fg()),l=pE(fg()),c=fg(),d=(y=>{const v=new Uint8Array(y);return(E=>{const b={"+":"-","/":"_","=":""};return E.replace(/[+/=]/g,I=>b[I])})(window.btoa(String.fromCharCode(...Array.from(v))))})(await(async y=>await Ch().subtle.digest({name:"SHA-256"},new TextEncoder().encode(y)))(c)),m=((y,v,E,b,I,M,N,Y)=>Object.assign(Object.assign(Object.assign({client_id:y.clientId},y.authorizationParams),E),{scope:mh(v,E.scope),response_type:"code",response_mode:Y||"query",state:b,nonce:I,redirect_uri:N||y.authorizationParams.redirect_uri,code_challenge:M,code_challenge_method:"S256"}))(this.options,this.scope,t,a,l,d,t.redirect_uri||this.options.authorizationParams.redirect_uri||r,n==null?void 0:n.response_mode),g=this._authorizeUrl(m);return{nonce:l,code_verifier:c,scope:m.scope,audience:m.audience||"default",redirect_uri:m.redirect_uri,state:a,url:g}}async loginWithPopup(t,n){var r;if(t=t||{},!(n=n||{}).popup&&(n.popup=(d=>{const m=window.screenX+(window.innerWidth-400)/2,g=window.screenY+(window.innerHeight-600)/2;return window.open(d,"auth0:authorize:popup",`left=${m},top=${g},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const a=await this._prepareAuthorizeUrl(t.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=a.url;const l=await(d=>new Promise((m,g)=>{let y;const v=setInterval(()=>{d.popup&&d.popup.closed&&(clearInterval(v),clearTimeout(E),window.removeEventListener("message",y,!1),g(new Up(d.popup)))},1e3),E=setTimeout(()=>{clearInterval(v),g(new Pp(d.popup)),window.removeEventListener("message",y,!1)},1e3*(d.timeoutInSeconds||60));y=function(b){if(b.data&&b.data.type==="authorization_response"){if(clearTimeout(E),clearInterval(v),window.removeEventListener("message",y,!1),d.popup.close(),b.data.response.error)return g(Qe.fromPayload(b.data.response));m(b.data.response)}},window.addEventListener("message",y)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(a.state!==l.state)throw new Qe("state_mismatch","Invalid state");const c=((r=t.authorizationParams)===null||r===void 0?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:a.audience,scope:a.scope,code_verifier:a.code_verifier,grant_type:"authorization_code",code:l.code,redirect_uri:a.redirect_uri},{nonceIn:a.nonce,organization:c})}async getUser(){var t;const n=await this._getIdTokenFromCache();return(t=n==null?void 0:n.decodedToken)===null||t===void 0?void 0:t.user}async getIdTokenClaims(){var t;const n=await this._getIdTokenFromCache();return(t=n==null?void 0:n.decodedToken)===null||t===void 0?void 0:t.claims}async loginWithRedirect(t={}){var n;const r=TE(t),{openUrl:a,fragment:l,appState:c}=r,d=pi(r,["openUrl","fragment","appState"]),m=((n=d.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,g=await this._prepareAuthorizeUrl(d.authorizationParams||{}),{url:y}=g,v=pi(g,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},v),{appState:c}),m&&{organization:m}));const E=l?`${y}#${l}`:y;a?await a(E):window.location.assign(E)}async handleRedirectCallback(t=window.location.href){const n=t.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:r,code:a,error:l,error_description:c}=(v=>{v.indexOf("#")>-1&&(v=v.substring(0,v.indexOf("#")));const E=new URLSearchParams(v);return{state:E.get("state"),code:E.get("code")||void 0,error:E.get("error")||void 0,error_description:E.get("error_description")||void 0}})(n.join("")),d=this.transactionManager.get();if(!d)throw new Qe("missing_transaction","Invalid state");if(this.transactionManager.remove(),l)throw new Vp(l,c||l,r,d.appState);if(!d.code_verifier||d.state&&d.state!==r)throw new Qe("state_mismatch","Invalid state");const m=d.organization,g=d.nonce,y=d.redirect_uri;return await this._requestToken(Object.assign({audience:d.audience,scope:d.scope,code_verifier:d.code_verifier,grant_type:"authorization_code",code:a},y?{redirect_uri:y}:{}),{nonceIn:g,organization:m}),{appState:d.appState}}async checkSession(t){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(t)}catch{}}async getTokenSilently(t={}){var n;const r=Object.assign(Object.assign({cacheMode:"on"},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:mh(this.scope,(n=t.authorizationParams)===null||n===void 0?void 0:n.scope)})}),a=await((l,c)=>{let d=mg[c];return d||(d=l().finally(()=>{delete mg[c],d=null}),mg[c]=d),d})(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return t.detailedResponse?a:a==null?void 0:a.access_token}async _getTokenSilently(t){const{cacheMode:n}=t,r=pi(t,["cacheMode"]);if(n!=="off"){const a=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(a)return a}if(n!=="cache-only"){if(!await(async(a,l=3)=>{for(let c=0;c<l;c++)if(await a())return!0;return!1})(()=>gg.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new yu;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const g=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(g)return g}const a=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r),{id_token:l,access_token:c,oauthTokenScope:d,expires_in:m}=a;return Object.assign(Object.assign({id_token:l,access_token:c},d?{scope:d}:null),{expires_in:m})}finally{await gg.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(t={},n={}){var r;const a=Object.assign(Object.assign({},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:mh(this.scope,(r=t.authorizationParams)===null||r===void 0?void 0:r.scope)})});return n=Object.assign(Object.assign({},lI),n),await this.loginWithPopup(a,n),(await this.cacheManager.get(new _i({scope:a.authorizationParams.scope,audience:a.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(t){t.clientId!==null?t.clientId=t.clientId||this.options.clientId:delete t.clientId;const n=t.logoutParams||{},{federated:r}=n,a=pi(n,["federated"]),l=r?"&federated":"";return this._url(`/v2/logout?${jg(Object.assign({clientId:t.clientId},a))}`)+l}async logout(t={}){const n=TE(t),{openUrl:r}=n,a=pi(n,["openUrl"]);t.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(t.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const l=this._buildLogoutUrl(a);r?await r(l):r!==!1&&window.location.assign(l)}async _getTokenFromIFrame(t){const n=Object.assign(Object.assign({},t.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!n.organization&&(n.organization=r);const{url:a,state:l,nonce:c,code_verifier:d,redirect_uri:m,scope:g,audience:y}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new Qe("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const v=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,E=await((I,M,N=60)=>new Promise((Y,F)=>{const G=window.document.createElement("iframe");G.setAttribute("width","0"),G.setAttribute("height","0"),G.style.display="none";const q=()=>{window.document.body.contains(G)&&(window.document.body.removeChild(G),window.removeEventListener("message",X,!1))};let X;const tt=setTimeout(()=>{F(new yu),q()},1e3*N);X=function(D){if(D.origin!=M||!D.data||D.data.type!=="authorization_response")return;const R=D.source;R&&R.close(),D.data.response.error?F(Qe.fromPayload(D.data.response)):Y(D.data.response),clearTimeout(tt),window.removeEventListener("message",X,!1),setTimeout(q,2e3)},window.addEventListener("message",X,!1),window.document.body.appendChild(G),G.setAttribute("src",I)}))(a,this.domainUrl,v);if(l!==E.state)throw new Qe("state_mismatch","Invalid state");const b=await this._requestToken(Object.assign(Object.assign({},t.authorizationParams),{code_verifier:d,code:E.code,grant_type:"authorization_code",redirect_uri:m,timeout:t.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:c,organization:n.organization});return Object.assign(Object.assign({},b),{scope:g,oauthTokenScope:b.scope,audience:y})}catch(v){throw v.error==="login_required"&&this.logout({openUrl:!1}),v}}async _getTokenUsingRefreshToken(t){const n=await this.cacheManager.get(new _i({scope:t.authorizationParams.scope,audience:t.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw new Cf(t.authorizationParams.audience||"default",t.authorizationParams.scope)}const r=t.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,a=typeof t.timeoutInSeconds=="number"?1e3*t.timeoutInSeconds:null;try{const l=await this._requestToken(Object.assign(Object.assign(Object.assign({},t.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:r}),a&&{timeout:a}));return Object.assign(Object.assign({},l),{scope:t.authorizationParams.scope,oauthTokenScope:l.scope,audience:t.authorizationParams.audience||"default"})}catch(l){if((l.message.indexOf("Missing Refresh Token")>-1||l.message&&l.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw l}}async _saveEntryInCache(t){const{id_token:n,decodedToken:r}=t,a=pi(t,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,t.id_token,t.decodedToken),await this.cacheManager.set(a)}async _getIdTokenFromCache(){const t=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new _i({clientId:this.options.clientId,audience:t,scope:this.scope})),r=this.userCache.get("@@user@@");return n&&n.id_token===(r==null?void 0:r.id_token)?r:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:t,audience:n,clientId:r}){const a=await this.cacheManager.get(new _i({scope:t,audience:n,clientId:r}),60);if(a&&a.access_token){const{access_token:l,oauthTokenScope:c,expires_in:d}=a,m=await this._getIdTokenFromCache();return m&&Object.assign(Object.assign({id_token:m.id_token,access_token:l},c?{scope:c}:null),{expires_in:d})}}async _requestToken(t,n){const{nonceIn:r,organization:a}=n||{},l=await dI(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},t),this.worker),c=await this._verifyIdToken(l.id_token,r,a);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},l),{decodedToken:c,scope:t.scope,audience:t.audience||"default"}),l.scope?{oauthTokenScope:l.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(a||c.claims.org_id),Object.assign(Object.assign({},l),{decodedToken:c})}}var QT={isAuthenticated:!1,isLoading:!0},tr=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},II=Me(Me({},QT),{buildAuthorizeUrl:tr,buildLogoutUrl:tr,getAccessTokenSilently:tr,getAccessTokenWithPopup:tr,getIdTokenClaims:tr,loginWithRedirect:tr,loginWithPopup:tr,logout:tr,handleRedirectCallback:tr}),ZT=lt.createContext(II),bE=function(e){sI(t,e);function t(n,r){var a=e.call(this,r||n)||this;return a.error=n,a.error_description=r,Object.setPrototypeOf(a,t.prototype),a}return t}(Error),CI=/[?&]code=[^&]+/,DI=/[?&]state=[^&]+/,OI=/[?&]error=[^&]+/,NI=function(e){return e===void 0&&(e=window.location.search),(CI.test(e)||OI.test(e))&&DI.test(e)},WT=function(e){return function(t){return t instanceof Error?t:t!==null&&typeof t=="object"&&"error"in t&&typeof t.error=="string"?"error_description"in t&&typeof t.error_description=="string"?new bE(t.error,t.error_description):new bE(t.error):new Error(e)}},SE=WT("Login failed"),pg=WT("Get access token failed"),JT=function(e){var t;e!=null&&e.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),e.authorizationParams=e.authorizationParams||{},e.authorizationParams.redirect_uri=e.redirectUri,delete e.redirectUri),!((t=e==null?void 0:e.authorizationParams)===null||t===void 0)&&t.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),e.authorizationParams.redirect_uri=e.authorizationParams.redirectUri,delete e.authorizationParams.redirectUri)},xI=function(e,t){switch(t.type){case"LOGIN_POPUP_STARTED":return Me(Me({},e),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return Me(Me({},e),{isAuthenticated:!!t.user,user:t.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return e.user===t.user?e:Me(Me({},e),{isAuthenticated:!!t.user,user:t.user});case"LOGOUT":return Me(Me({},e),{isAuthenticated:!1,user:void 0});case"ERROR":return Me(Me({},e),{isLoading:!1,error:t.error})}},kI=function(e){return JT(e),Me(Me({},e),{auth0Client:{name:"auth0-react",version:"2.3.0"}})},MI=function(e){window.history.replaceState({},document.title,(e==null?void 0:e.returnTo)||window.location.pathname)},VI=function(e){var t=e.children,n=e.skipRedirectCallback,r=e.onRedirectCallback,a=r===void 0?MI:r,l=e.context,c=l===void 0?ZT:l,d=aI(e,["children","skipRedirectCallback","onRedirectCallback","context"]),m=lt.useState(function(){return new RI(kI(d))})[0],g=lt.useReducer(xI,QT),y=g[0],v=g[1],E=lt.useRef(!1),b=lt.useCallback(function(tt){return v({type:"ERROR",error:tt}),tt},[]);lt.useEffect(function(){E.current||(E.current=!0,function(){return uo(void 0,void 0,void 0,function(){var tt,D,R;return co(this,function(C){switch(C.label){case 0:return C.trys.push([0,7,,8]),tt=void 0,NI()&&!n?[4,m.handleRedirectCallback()]:[3,3];case 1:return D=C.sent().appState,[4,m.getUser()];case 2:return tt=C.sent(),a(D,tt),[3,6];case 3:return[4,m.checkSession()];case 4:return C.sent(),[4,m.getUser()];case 5:tt=C.sent(),C.label=6;case 6:return v({type:"INITIALISED",user:tt}),[3,8];case 7:return R=C.sent(),b(SE(R)),[3,8];case 8:return[2]}})})}())},[m,a,n,b]);var I=lt.useCallback(function(tt){return JT(tt),m.loginWithRedirect(tt)},[m]),M=lt.useCallback(function(tt,D){return uo(void 0,void 0,void 0,function(){var R,C;return co(this,function(V){switch(V.label){case 0:v({type:"LOGIN_POPUP_STARTED"}),V.label=1;case 1:return V.trys.push([1,3,,4]),[4,m.loginWithPopup(tt,D)];case 2:return V.sent(),[3,4];case 3:return R=V.sent(),b(SE(R)),[2];case 4:return[4,m.getUser()];case 5:return C=V.sent(),v({type:"LOGIN_POPUP_COMPLETE",user:C}),[2]}})})},[m]),N=lt.useCallback(function(tt){return tt===void 0&&(tt={}),uo(void 0,void 0,void 0,function(){return co(this,function(D){switch(D.label){case 0:return[4,m.logout(tt)];case 1:return D.sent(),(tt.openUrl||tt.openUrl===!1)&&v({type:"LOGOUT"}),[2]}})})},[m]),Y=lt.useCallback(function(tt){return uo(void 0,void 0,void 0,function(){var D,R,C,V;return co(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,3,5]),[4,m.getTokenSilently(tt)];case 1:return D=x.sent(),[3,5];case 2:throw R=x.sent(),pg(R);case 3:return C=v,V={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,m.getUser()];case 4:return C.apply(void 0,[(V.user=x.sent(),V)]),[7];case 5:return[2,D]}})})},[m]),F=lt.useCallback(function(tt,D){return uo(void 0,void 0,void 0,function(){var R,C,V,x;return co(this,function(L){switch(L.label){case 0:return L.trys.push([0,2,3,5]),[4,m.getTokenWithPopup(tt,D)];case 1:return R=L.sent(),[3,5];case 2:throw C=L.sent(),pg(C);case 3:return V=v,x={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,m.getUser()];case 4:return V.apply(void 0,[(x.user=L.sent(),x)]),[7];case 5:return[2,R]}})})},[m]),G=lt.useCallback(function(){return m.getIdTokenClaims()},[m]),q=lt.useCallback(function(tt){return uo(void 0,void 0,void 0,function(){var D,R,C;return co(this,function(V){switch(V.label){case 0:return V.trys.push([0,2,3,5]),[4,m.handleRedirectCallback(tt)];case 1:return[2,V.sent()];case 2:throw D=V.sent(),pg(D);case 3:return R=v,C={type:"HANDLE_REDIRECT_COMPLETE"},[4,m.getUser()];case 4:return R.apply(void 0,[(C.user=V.sent(),C)]),[7];case 5:return[2]}})})},[m]),X=lt.useMemo(function(){return Me(Me({},y),{getAccessTokenSilently:Y,getAccessTokenWithPopup:F,getIdTokenClaims:G,loginWithRedirect:I,loginWithPopup:M,logout:N,handleRedirectCallback:q})},[y,Y,F,G,I,M,N,q]);return xp.createElement(c.Provider,{value:X},t)},zp=function(e){return e===void 0&&(e=ZT),lt.useContext(e)};const PI=()=>{};var AE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},UI=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(m>>10)),t[r++]=String.fromCharCode(56320+(m&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,m=a+2<e.length,g=m?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let E=(d&15)<<2|g>>6,b=g&63;m||(b=64,c||(E=64)),r.push(n[y],n[v],n[E],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):UI(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const g=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||g==null||v==null)throw new LI;const E=l<<2|d>>4;if(r.push(E),g!==64){const b=d<<4&240|g>>2;if(r.push(b),v!==64){const I=g<<6&192|v;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class LI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zI=function(e){const t=tb(e);return eb.encodeByteArray(t,!0)},qh=function(e){return zI(e).replace(/\./g,"")},nb=function(e){try{return eb.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=()=>BI().__FIREBASE_DEFAULTS__,HI=()=>{if(typeof process>"u"||typeof AE>"u")return;const e=AE.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qI=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&nb(e[1]);return t&&JSON.parse(t)},Df=()=>{try{return PI()||jI()||HI()||qI()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ib=e=>{var t,n;return(n=(t=Df())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},rb=e=>{const t=ib(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},sb=()=>{var e;return(e=Df())===null||e===void 0?void 0:e.config},ab=e=>{var t;return(t=Df())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(e){return e.endsWith(".cloudworkstations.dev")}async function Bp(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qh(JSON.stringify(n)),qh(JSON.stringify(c)),""].join(".")}const hu={};function KI(){const e={prod:[],emulator:[]};for(const t of Object.keys(hu))hu[t]?e.emulator.push(t):e.prod.push(t);return e}function $I(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let RE=!1;function jp(e,t){if(typeof window>"u"||typeof document>"u"||!ma(window.location.host)||hu[e]===t||hu[e]||RE)return;hu[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=KI().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{RE=!0,c()},E}function y(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=$I(r),b=n("text"),I=document.getElementById(b)||document.createElement("span"),M=n("learnmore"),N=document.getElementById(M)||document.createElement("a"),Y=n("preprendIcon"),F=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const G=E.element;d(G),y(N,M);const q=g();m(F,Y),G.append(F,I,N,q),document.body.appendChild(G)}l?(I.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function XI(){var e;const t=(e=Df())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZI(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function WI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JI(){const e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function tC(){return!XI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eC(){try{return typeof indexedDB=="object"}catch{return!1}}function nC(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="FirebaseError";class Ri extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=iC,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?rC(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ri(a,d,r)}}function rC(e,t){return e.replace(sC,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const sC=/\{\$([^}]+)}/g;function aC(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ia(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(IE(l)&&IE(c)){if(!ia(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function IE(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function oC(e,t){const n=new lC(e,t);return n.subscribe.bind(n)}class lC{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uC(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=yg),a.error===void 0&&(a.error=yg),a.complete===void 0&&(a.complete=yg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uC(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function yg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(e){return e&&e._delegate?e._delegate:e}class ns{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cC=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new FI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(fC(t))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Xs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xs){return this.instances.has(t)}getOptions(t=Xs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hC(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xs){return this.component?this.component.multipleInstances?t:Xs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hC(e){return e===Xs?void 0:e}function fC(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new cC(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Mt||(Mt={}));const mC={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},gC=Mt.INFO,pC={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},yC=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=pC[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hp{constructor(t){this.name=t,this._logLevel=gC,this._logHandler=yC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const _C=(e,t)=>t.some(n=>e instanceof n);let CE,DE;function vC(){return CE||(CE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return DE||(DE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,Hg=new WeakMap,lb=new WeakMap,_g=new WeakMap,qp=new WeakMap;function wC(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Zr(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&ob.set(n,e)}).catch(()=>{}),qp.set(t,e),t}function TC(e){if(Hg.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});Hg.set(e,t)}let qg={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Hg.get(e);if(t==="objectStoreNames")return e.objectStoreNames||lb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function bC(e){qg=e(qg)}function SC(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(vg(this),t,...n);return lb.set(r,t.sort?t.sort():[t]),Zr(r)}:EC().includes(e)?function(...t){return e.apply(vg(this),t),Zr(ob.get(this))}:function(...t){return Zr(e.apply(vg(this),t))}}function AC(e){return typeof e=="function"?SC(e):(e instanceof IDBTransaction&&TC(e),_C(e,vC())?new Proxy(e,qg):e)}function Zr(e){if(e instanceof IDBRequest)return wC(e);if(_g.has(e))return _g.get(e);const t=AC(e);return t!==e&&(_g.set(e,t),qp.set(t,e)),t}const vg=e=>qp.get(e);function RC(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Zr(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Zr(c.result),m.oldVersion,m.newVersion,Zr(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const IC=["get","getKey","getAll","getAllKeys","count"],CC=["put","add","delete","clear"],Eg=new Map;function OE(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Eg.get(t))return Eg.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=CC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||IC.includes(n)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[n](...d),a&&m.done]))[0]};return Eg.set(t,l),l}bC(e=>({...e,get:(t,n,r)=>OE(t,n)||e.get(t,n,r),has:(t,n)=>!!OE(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OC(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Fg="@firebase/app",NE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Hp("@firebase/app"),NC="@firebase/app-compat",xC="@firebase/analytics-compat",kC="@firebase/analytics",MC="@firebase/app-check-compat",VC="@firebase/app-check",PC="@firebase/auth",UC="@firebase/auth-compat",LC="@firebase/database",zC="@firebase/data-connect",BC="@firebase/database-compat",jC="@firebase/functions",HC="@firebase/functions-compat",qC="@firebase/installations",FC="@firebase/installations-compat",GC="@firebase/messaging",KC="@firebase/messaging-compat",$C="@firebase/performance",YC="@firebase/performance-compat",XC="@firebase/remote-config",QC="@firebase/remote-config-compat",ZC="@firebase/storage",WC="@firebase/storage-compat",JC="@firebase/firestore",t2="@firebase/ai",e2="@firebase/firestore-compat",n2="firebase",i2="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",r2={[Fg]:"fire-core",[NC]:"fire-core-compat",[kC]:"fire-analytics",[xC]:"fire-analytics-compat",[VC]:"fire-app-check",[MC]:"fire-app-check-compat",[PC]:"fire-auth",[UC]:"fire-auth-compat",[LC]:"fire-rtdb",[zC]:"fire-data-connect",[BC]:"fire-rtdb-compat",[jC]:"fire-fn",[HC]:"fire-fn-compat",[qC]:"fire-iid",[FC]:"fire-iid-compat",[GC]:"fire-fcm",[KC]:"fire-fcm-compat",[$C]:"fire-perf",[YC]:"fire-perf-compat",[XC]:"fire-rc",[QC]:"fire-rc-compat",[ZC]:"fire-gcs",[WC]:"fire-gcs-compat",[JC]:"fire-fst",[e2]:"fire-fst-compat",[t2]:"fire-vertex","fire-js":"fire-js",[n2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Map,s2=new Map,Kg=new Map;function xE(e,t){try{e.container.addComponent(t)}catch(n){or.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ra(e){const t=e.name;if(Kg.has(t))return or.debug(`There were multiple attempts to register component ${t}.`),!1;Kg.set(t,e);for(const n of Fh.values())xE(n,e);for(const n of s2.values())xE(n,e);return!0}function Of(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Nu("app","Firebase",a2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=i2;function ub(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Gg,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Wr.create("bad-app-name",{appName:String(a)});if(n||(n=sb()),!n)throw Wr.create("no-options");const l=Fh.get(a);if(l){if(ia(n,l.options)&&ia(r,l.config))return l;throw Wr.create("duplicate-app",{appName:a})}const c=new dC(a);for(const m of Kg.values())c.addComponent(m);const d=new o2(n,r,c);return Fh.set(a,d),d}function Fp(e=Gg){const t=Fh.get(e);if(!t&&e===Gg&&sb())return ub();if(!t)throw Wr.create("no-app",{appName:e});return t}function vi(e,t,n){var r;let a=(r=r2[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),or.warn(d.join(" "));return}ra(new ns(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="firebase-heartbeat-database",u2=1,_u="firebase-heartbeat-store";let wg=null;function cb(){return wg||(wg=RC(l2,u2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(_u)}catch(n){console.warn(n)}}}}).catch(e=>{throw Wr.create("idb-open",{originalErrorMessage:e.message})})),wg}async function c2(e){try{const n=(await cb()).transaction(_u),r=await n.objectStore(_u).get(hb(e));return await n.done,r}catch(t){if(t instanceof Ri)or.warn(t.message);else{const n=Wr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});or.warn(n.message)}}}async function kE(e,t){try{const r=(await cb()).transaction(_u,"readwrite");await r.objectStore(_u).put(t,hb(e)),await r.done}catch(n){if(n instanceof Ri)or.warn(n.message);else{const r=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function hb(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=1024,f2=30;class d2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ME();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>f2){const c=p2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ME(),{heartbeatsToSend:r,unsentEntries:a}=m2(this._heartbeatsCache.heartbeats),l=qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return or.warn(n),""}}}function ME(){return new Date().toISOString().substring(0,10)}function m2(e,t=h2){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),VE(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),VE(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class g2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eC()?nC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return kE(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return kE(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function VE(e){return qh(JSON.stringify({version:2,heartbeats:e})).length}function p2(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(e){ra(new ns("platform-logger",t=>new DC(t),"PRIVATE")),ra(new ns("heartbeat",t=>new d2(t),"PRIVATE")),vi(Fg,NE,e),vi(Fg,NE,"esm2017"),vi("fire-js","")}y2("");var PE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,fb;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,R){function C(){}C.prototype=R.prototype,D.D=R.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(V,x,L){for(var O=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)O[ne-2]=arguments[ne];return R.prototype[x].apply(V,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,R,C){C||(C=0);var V=Array(16);if(typeof R=="string")for(var x=0;16>x;++x)V[x]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(x=0;16>x;++x)V[x]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=D.g[0],C=D.g[1],x=D.g[2];var L=D.g[3],O=R+(L^C&(x^L))+V[0]+3614090360&4294967295;R=C+(O<<7&4294967295|O>>>25),O=L+(x^R&(C^x))+V[1]+3905402710&4294967295,L=R+(O<<12&4294967295|O>>>20),O=x+(C^L&(R^C))+V[2]+606105819&4294967295,x=L+(O<<17&4294967295|O>>>15),O=C+(R^x&(L^R))+V[3]+3250441966&4294967295,C=x+(O<<22&4294967295|O>>>10),O=R+(L^C&(x^L))+V[4]+4118548399&4294967295,R=C+(O<<7&4294967295|O>>>25),O=L+(x^R&(C^x))+V[5]+1200080426&4294967295,L=R+(O<<12&4294967295|O>>>20),O=x+(C^L&(R^C))+V[6]+2821735955&4294967295,x=L+(O<<17&4294967295|O>>>15),O=C+(R^x&(L^R))+V[7]+4249261313&4294967295,C=x+(O<<22&4294967295|O>>>10),O=R+(L^C&(x^L))+V[8]+1770035416&4294967295,R=C+(O<<7&4294967295|O>>>25),O=L+(x^R&(C^x))+V[9]+2336552879&4294967295,L=R+(O<<12&4294967295|O>>>20),O=x+(C^L&(R^C))+V[10]+4294925233&4294967295,x=L+(O<<17&4294967295|O>>>15),O=C+(R^x&(L^R))+V[11]+2304563134&4294967295,C=x+(O<<22&4294967295|O>>>10),O=R+(L^C&(x^L))+V[12]+1804603682&4294967295,R=C+(O<<7&4294967295|O>>>25),O=L+(x^R&(C^x))+V[13]+4254626195&4294967295,L=R+(O<<12&4294967295|O>>>20),O=x+(C^L&(R^C))+V[14]+2792965006&4294967295,x=L+(O<<17&4294967295|O>>>15),O=C+(R^x&(L^R))+V[15]+1236535329&4294967295,C=x+(O<<22&4294967295|O>>>10),O=R+(x^L&(C^x))+V[1]+4129170786&4294967295,R=C+(O<<5&4294967295|O>>>27),O=L+(C^x&(R^C))+V[6]+3225465664&4294967295,L=R+(O<<9&4294967295|O>>>23),O=x+(R^C&(L^R))+V[11]+643717713&4294967295,x=L+(O<<14&4294967295|O>>>18),O=C+(L^R&(x^L))+V[0]+3921069994&4294967295,C=x+(O<<20&4294967295|O>>>12),O=R+(x^L&(C^x))+V[5]+3593408605&4294967295,R=C+(O<<5&4294967295|O>>>27),O=L+(C^x&(R^C))+V[10]+38016083&4294967295,L=R+(O<<9&4294967295|O>>>23),O=x+(R^C&(L^R))+V[15]+3634488961&4294967295,x=L+(O<<14&4294967295|O>>>18),O=C+(L^R&(x^L))+V[4]+3889429448&4294967295,C=x+(O<<20&4294967295|O>>>12),O=R+(x^L&(C^x))+V[9]+568446438&4294967295,R=C+(O<<5&4294967295|O>>>27),O=L+(C^x&(R^C))+V[14]+3275163606&4294967295,L=R+(O<<9&4294967295|O>>>23),O=x+(R^C&(L^R))+V[3]+4107603335&4294967295,x=L+(O<<14&4294967295|O>>>18),O=C+(L^R&(x^L))+V[8]+1163531501&4294967295,C=x+(O<<20&4294967295|O>>>12),O=R+(x^L&(C^x))+V[13]+2850285829&4294967295,R=C+(O<<5&4294967295|O>>>27),O=L+(C^x&(R^C))+V[2]+4243563512&4294967295,L=R+(O<<9&4294967295|O>>>23),O=x+(R^C&(L^R))+V[7]+1735328473&4294967295,x=L+(O<<14&4294967295|O>>>18),O=C+(L^R&(x^L))+V[12]+2368359562&4294967295,C=x+(O<<20&4294967295|O>>>12),O=R+(C^x^L)+V[5]+4294588738&4294967295,R=C+(O<<4&4294967295|O>>>28),O=L+(R^C^x)+V[8]+2272392833&4294967295,L=R+(O<<11&4294967295|O>>>21),O=x+(L^R^C)+V[11]+1839030562&4294967295,x=L+(O<<16&4294967295|O>>>16),O=C+(x^L^R)+V[14]+4259657740&4294967295,C=x+(O<<23&4294967295|O>>>9),O=R+(C^x^L)+V[1]+2763975236&4294967295,R=C+(O<<4&4294967295|O>>>28),O=L+(R^C^x)+V[4]+1272893353&4294967295,L=R+(O<<11&4294967295|O>>>21),O=x+(L^R^C)+V[7]+4139469664&4294967295,x=L+(O<<16&4294967295|O>>>16),O=C+(x^L^R)+V[10]+3200236656&4294967295,C=x+(O<<23&4294967295|O>>>9),O=R+(C^x^L)+V[13]+681279174&4294967295,R=C+(O<<4&4294967295|O>>>28),O=L+(R^C^x)+V[0]+3936430074&4294967295,L=R+(O<<11&4294967295|O>>>21),O=x+(L^R^C)+V[3]+3572445317&4294967295,x=L+(O<<16&4294967295|O>>>16),O=C+(x^L^R)+V[6]+76029189&4294967295,C=x+(O<<23&4294967295|O>>>9),O=R+(C^x^L)+V[9]+3654602809&4294967295,R=C+(O<<4&4294967295|O>>>28),O=L+(R^C^x)+V[12]+3873151461&4294967295,L=R+(O<<11&4294967295|O>>>21),O=x+(L^R^C)+V[15]+530742520&4294967295,x=L+(O<<16&4294967295|O>>>16),O=C+(x^L^R)+V[2]+3299628645&4294967295,C=x+(O<<23&4294967295|O>>>9),O=R+(x^(C|~L))+V[0]+4096336452&4294967295,R=C+(O<<6&4294967295|O>>>26),O=L+(C^(R|~x))+V[7]+1126891415&4294967295,L=R+(O<<10&4294967295|O>>>22),O=x+(R^(L|~C))+V[14]+2878612391&4294967295,x=L+(O<<15&4294967295|O>>>17),O=C+(L^(x|~R))+V[5]+4237533241&4294967295,C=x+(O<<21&4294967295|O>>>11),O=R+(x^(C|~L))+V[12]+1700485571&4294967295,R=C+(O<<6&4294967295|O>>>26),O=L+(C^(R|~x))+V[3]+2399980690&4294967295,L=R+(O<<10&4294967295|O>>>22),O=x+(R^(L|~C))+V[10]+4293915773&4294967295,x=L+(O<<15&4294967295|O>>>17),O=C+(L^(x|~R))+V[1]+2240044497&4294967295,C=x+(O<<21&4294967295|O>>>11),O=R+(x^(C|~L))+V[8]+1873313359&4294967295,R=C+(O<<6&4294967295|O>>>26),O=L+(C^(R|~x))+V[15]+4264355552&4294967295,L=R+(O<<10&4294967295|O>>>22),O=x+(R^(L|~C))+V[6]+2734768916&4294967295,x=L+(O<<15&4294967295|O>>>17),O=C+(L^(x|~R))+V[13]+1309151649&4294967295,C=x+(O<<21&4294967295|O>>>11),O=R+(x^(C|~L))+V[4]+4149444226&4294967295,R=C+(O<<6&4294967295|O>>>26),O=L+(C^(R|~x))+V[11]+3174756917&4294967295,L=R+(O<<10&4294967295|O>>>22),O=x+(R^(L|~C))+V[2]+718787259&4294967295,x=L+(O<<15&4294967295|O>>>17),O=C+(L^(x|~R))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+L&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var C=R-this.blockSize,V=this.B,x=this.h,L=0;L<R;){if(x==0)for(;L<=C;)a(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<R;)if(V[x++]=D.charCodeAt(L++),x==this.blockSize){a(this,V),x=0;break}}else for(;L<R;)if(V[x++]=D[L++],x==this.blockSize){a(this,V),x=0;break}}this.h=x,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var C=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=C&255,C/=256;for(this.u(D),D=Array(16),R=C=0;4>R;++R)for(var V=0;32>V;V+=8)D[C++]=this.g[R]>>>V&255;return D};function l(D,R){var C=d;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=R(D)}function c(D,R){this.h=R;for(var C=[],V=!0,x=D.length-1;0<=x;x--){var L=D[x]|0;V&&L==R||(C[x]=L,V=!1)}this.g=C}var d={};function m(D){return-128<=D&&128>D?l(D,function(R){return new c([R|0],0>R?-1:0)}):new c([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return N(g(-D));for(var R=[],C=1,V=0;D>=C;V++)R[V]=D/C|0,C*=4294967296;return new c(R,0)}function y(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return N(y(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(R,8)),V=v,x=0;x<D.length;x+=8){var L=Math.min(8,D.length-x),O=parseInt(D.substring(x,x+L),R);8>L?(L=g(Math.pow(R,L)),V=V.j(L).add(g(O))):(V=V.j(C),V=V.add(g(O)))}return V}var v=m(0),E=m(1),b=m(16777216);e=c.prototype,e.m=function(){if(M(this))return-N(this).m();for(var D=0,R=1,C=0;C<this.g.length;C++){var V=this.i(C);D+=(0<=V?V:4294967296+V)*R,R*=4294967296}return D},e.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(M(this))return"-"+N(this).toString(D);for(var R=g(Math.pow(D,6)),C=this,V="";;){var x=q(C,R).g;C=Y(C,x.j(R));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=x,I(C))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},e.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function M(D){return D.h==-1}e.l=function(D){return D=Y(this,D),M(D)?-1:I(D)?0:1};function N(D){for(var R=D.g.length,C=[],V=0;V<R;V++)C[V]=~D.g[V];return new c(C,~D.h).add(E)}e.abs=function(){return M(this)?N(this):this},e.add=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],V=0,x=0;x<=R;x++){var L=V+(this.i(x)&65535)+(D.i(x)&65535),O=(L>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);V=O>>>16,L&=65535,O&=65535,C[x]=O<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function Y(D,R){return D.add(N(R))}e.j=function(D){if(I(this)||I(D))return v;if(M(this))return M(D)?N(this).j(N(D)):N(N(this).j(D));if(M(D))return N(this.j(N(D)));if(0>this.l(b)&&0>D.l(b))return g(this.m()*D.m());for(var R=this.g.length+D.g.length,C=[],V=0;V<2*R;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(var x=0;x<D.g.length;x++){var L=this.i(V)>>>16,O=this.i(V)&65535,ne=D.i(x)>>>16,te=D.i(x)&65535;C[2*V+2*x]+=O*te,F(C,2*V+2*x),C[2*V+2*x+1]+=L*te,F(C,2*V+2*x+1),C[2*V+2*x+1]+=O*ne,F(C,2*V+2*x+1),C[2*V+2*x+2]+=L*ne,F(C,2*V+2*x+2)}for(V=0;V<R;V++)C[V]=C[2*V+1]<<16|C[2*V];for(V=R;V<2*R;V++)C[V]=0;return new c(C,0)};function F(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function G(D,R){this.g=D,this.h=R}function q(D,R){if(I(R))throw Error("division by zero");if(I(D))return new G(v,v);if(M(D))return R=q(N(D),R),new G(N(R.g),N(R.h));if(M(R))return R=q(D,N(R)),new G(N(R.g),R.h);if(30<D.g.length){if(M(D)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var C=E,V=R;0>=V.l(D);)C=X(C),V=X(V);var x=tt(C,1),L=tt(V,1);for(V=tt(V,2),C=tt(C,2);!I(V);){var O=L.add(V);0>=O.l(D)&&(x=x.add(C),L=O),V=tt(V,1),C=tt(C,1)}return R=Y(D,x.j(R)),new G(x,R)}for(x=v;0<=D.l(R);){for(C=Math.max(1,Math.floor(D.m()/R.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=g(C),O=L.j(R);M(O)||0<O.l(D);)C-=V,L=g(C),O=L.j(R);I(L)&&(L=E),x=x.add(L),D=Y(D,O)}return new G(x,D)}e.A=function(D){return q(this,D).h},e.and=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],V=0;V<R;V++)C[V]=this.i(V)&D.i(V);return new c(C,this.h&D.h)},e.or=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],V=0;V<R;V++)C[V]=this.i(V)|D.i(V);return new c(C,this.h|D.h)},e.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],V=0;V<R;V++)C[V]=this.i(V)^D.i(V);return new c(C,this.h^D.h)};function X(D){for(var R=D.g.length+1,C=[],V=0;V<R;V++)C[V]=D.i(V)<<1|D.i(V-1)>>>31;return new c(C,D.h)}function tt(D,R){var C=R>>5;R%=32;for(var V=D.g.length-C,x=[],L=0;L<V;L++)x[L]=0<R?D.i(L+C)>>>R|D.i(L+C+1)<<32-R:D.i(L+C);return new c(x,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Jr=c}).apply(typeof PE<"u"?PE:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var db,nu,mb,Dh,$g,gb,pb,yb;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,w){return h==Array.prototype||h==Object.prototype||(h[_]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var w=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var B=h[A];if(!(B in w))break t;w=w[B]}h=h[h.length-1],A=w[h],_=_(A),_!=A&&_!=null&&t(w,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var w=0,A=!1,B={next:function(){if(!A&&w<h.length){var Q=w++;return{value:_(Q,h[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,w){return h.call.apply(h.bind,arguments)}function v(h,_,w){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),h.apply(_,B)}}return function(){return h.apply(_,arguments)}}function E(h,_,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function b(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function I(h,_){function w(){}w.prototype=_.prototype,h.aa=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(A,B,Q){for(var at=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)at[Pt-2]=arguments[Pt];return _.prototype[B].apply(A,at)}}function M(h){const _=h.length;if(0<_){const w=Array(_);for(let A=0;A<_;A++)w[A]=h[A];return w}return[]}function N(h,_){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(m(A)){const B=h.length||0,Q=A.length||0;h.length=B+Q;for(let at=0;at<Q;at++)h[B+at]=A[at]}else h.push(A)}}class Y{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function F(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var X=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function tt(h,_,w){for(const A in h)_.call(w,h[A],A,h)}function D(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function R(h){const _={};for(const w in h)_[w]=h[w];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,_){let w,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(w in A)h[w]=A[w];for(let Q=0;Q<C.length;Q++)w=C[Q],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function x(h){var _=1;h=h.split(":");const w=[];for(;0<_&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function L(h){d.setTimeout(()=>{throw h},0)}function O(){var h=Rt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ne{constructor(){this.h=this.g=null}add(_,w){const A=te.get();A.set(_,w),this.h?this.h.next=A:this.g=A,this.h=A}}var te=new Y(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,mt=!1,Rt=new ne,P=()=>{const h=d.Promise.resolve(void 0);ot=()=>{h.then(rt)}};var rt=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(w){L(w)}var _=te;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}mt=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,_),d.removeEventListener("test",w,_)}catch{}return h}();function Ot(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(X){t:{try{q(_.nodeName);var B=!0;break t}catch{}B=!1}B||(_=null)}}else w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:bt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ot.aa.h.call(this)}}I(Ot,st);var bt={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function Wn(h,_,w,A,B){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!A,this.ha=B,this.key=++Wt,this.da=this.fa=!1}function gr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ci(h){this.src=h,this.g={},this.h=0}Ci.prototype.add=function(h,_,w,A,B){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var at=fs(h,_,A,B);return-1<at?(_=h[at],w||(_.fa=!1)):(_=new Wn(_,this.src,Q,!!A,B),_.fa=w,h.push(_)),_};function hs(h,_){var w=_.type;if(w in h.g){var A=h.g[w],B=Array.prototype.indexOf.call(A,_,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(A,B,1),Q&&(gr(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function fs(h,_,w,A){for(var B=0;B<h.length;++B){var Q=h[B];if(!Q.da&&Q.listener==_&&Q.capture==!!w&&Q.ha==A)return B}return-1}var ds="closure_lm_"+(1e6*Math.random()|0),Fo={};function Fu(h,_,w,A,B){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)Fu(h,_[Q],w,A,B);return null}return w=Gu(w),h&&h[Ce]?h.K(_,w,g(A)?!!A.capture:!1,B):Rn(h,_,w,!1,A,B)}function Rn(h,_,w,A,B,Q){if(!_)throw Error("Invalid event type");var at=g(B)?!!B.capture:!!B,Pt=_a(h);if(Pt||(h[ds]=Pt=new Ci(h)),w=Pt.add(_,w,A,at,Q),w.proxy)return w;if(A=ad(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)yt||(B=at),B===void 0&&(B=!1),h.addEventListener(_.toString(),A,B);else if(h.attachEvent)h.attachEvent(ms(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ad(){function h(w){return _.call(h.src,h.listener,w)}const _=od;return h}function Go(h,_,w,A,B){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)Go(h,_[Q],w,A,B);else A=g(A)?!!A.capture:!!A,w=Gu(w),h&&h[Ce]?(h=h.i,_=String(_).toString(),_ in h.g&&(Q=h.g[_],w=fs(Q,w,A,B),-1<w&&(gr(Q[w]),Array.prototype.splice.call(Q,w,1),Q.length==0&&(delete h.g[_],h.h--)))):h&&(h=_a(h))&&(_=h.g[_.toString()],h=-1,_&&(h=fs(_,w,A,B)),(w=-1<h?_[h]:null)&&ya(w))}function ya(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ce])hs(_.i,h);else{var w=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(w,A,h.capture):_.detachEvent?_.detachEvent(ms(w),A):_.addListener&&_.removeListener&&_.removeListener(A),(w=_a(_))?(hs(w,h),w.h==0&&(w.src=null,_[ds]=null)):gr(h)}}}function ms(h){return h in Fo?Fo[h]:Fo[h]="on"+h}function od(h,_){if(h.da)h=!0;else{_=new Ot(_,this);var w=h.listener,A=h.ha||h.src;h.fa&&ya(h),h=w.call(A,_)}return h}function _a(h){return h=h[ds],h instanceof Ci?h:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gu(h){return typeof h=="function"?h:(h[Ko]||(h[Ko]=function(_){return h.handleEvent(_)}),h[Ko])}function oe(){ut.call(this),this.i=new Ci(this),this.M=this,this.F=null}I(oe,ut),oe.prototype[Ce]=!0,oe.prototype.removeEventListener=function(h,_,w,A){Go(this,h,_,w,A)};function Ft(h,_){var w,A=h.F;if(A)for(w=[];A;A=A.F)w.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var B=_;_=new st(A,h),V(_,B)}if(B=!0,w)for(var Q=w.length-1;0<=Q;Q--){var at=_.g=w[Q];B=fn(at,A,!0,_)&&B}if(at=_.g=h,B=fn(at,A,!0,_)&&B,B=fn(at,A,!1,_)&&B,w)for(Q=0;Q<w.length;Q++)at=_.g=w[Q],B=fn(at,A,!1,_)&&B}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var w=h.g[_],A=0;A<w.length;A++)gr(w[A]);delete h.g[_],h.h--}}this.F=null},oe.prototype.K=function(h,_,w,A){return this.i.add(String(h),_,!1,w,A)},oe.prototype.L=function(h,_,w,A){return this.i.add(String(h),_,!0,w,A)};function fn(h,_,w,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var B=!0,Q=0;Q<_.length;++Q){var at=_[Q];if(at&&!at.da&&at.capture==w){var Pt=at.listener,Te=at.ha||at.src;at.fa&&hs(h.i,at),B=Pt.call(Te,A)!==!1&&B}}return B&&!A.defaultPrevented}function Ge(h,_,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Ku(h){h.g=Ge(()=>{h.g=null,h.i&&(h.i=!1,Ku(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class ld extends ut{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ku(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(h){ut.call(this),this.h=h,this.g={}}I(gs,ut);var ps=[];function ys(h){tt(h.g,function(_,w){this.g.hasOwnProperty(w)&&ya(_)},h),h.g={}}gs.prototype.N=function(){gs.aa.N.call(this),ys(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=d.JSON.stringify,va=d.JSON.parse,_s=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function $o(){}$o.prototype.h=null;function Yo(h){return h.h||(h.h=h.i())}function Xo(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oi(){st.call(this,"d")}I(Oi,st);function Qo(){st.call(this,"c")}I(Qo,st);var Jn={},Zo=null;function pr(){return Zo=Zo||new oe}Jn.La="serverreachability";function Ea(h){st.call(this,Jn.La,h)}I(Ea,st);function yr(h){const _=pr();Ft(_,new Ea(_))}Jn.STAT_EVENT="statevent";function $u(h,_){st.call(this,Jn.STAT_EVENT,h),this.stat=_}I($u,st);function ie(h){const _=pr();Ft(_,new $u(_,h))}Jn.Ma="timingevent";function we(h,_){st.call(this,Jn.Ma,h),this.size=_}I(we,st);function ge(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function Wo(h,_,w,A,B,Q){h.info(function(){if(h.g)if(Q)for(var at="",Pt=Q.split("&"),Te=0;Te<Pt.length;Te++){var Ut=Pt[Te].split("=");if(1<Ut.length){var Oe=Ut[0];Ut=Ut[1];var be=Oe.split("_");at=2<=be.length&&be[1]=="type"?at+(Oe+"="+Ut+"&"):at+(Oe+"=redacted&")}}else at=null;else at=Q;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+_+`
`+w+`
`+at})}function ud(h,_,w,A,B,Q,at){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+_+`
`+w+`
`+Q+" "+at})}function _r(h,_,w,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+vs(h,w)+(A?" "+A:"")})}function Yu(h,_){h.info(function(){return"TIMEOUT: "+_})}In.prototype.info=function(){};function vs(h,_){if(!h.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var A=w[h];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var at=1;at<B.length;at++)B[at]=""}}}}return Bn(w)}catch{return _}}var vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ni={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ei(){}I(ei,$o),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},ti=new ei;function Je(h,_,w,A){this.j=h,this.i=_,this.l=w,this.R=A||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var Jo={},wa={};function jn(h,_,w){h.L=1,h.v=Ss(dn(_)),h.m=w,h.P=!0,xi(h,null)}function xi(h,_){h.F=Date.now(),Es(h),h.A=dn(h.v);var w=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),sl(w.i,"t",A),h.C=0,w=h.j.J,h.h=new ce,h.g=cc(h.j,w?_:null,!h.m),0<h.O&&(h.M=new ld(E(h.Y,h,h.g),h.O)),_=h.U,w=h.g,A=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(ps[0]=B.toString()),B=ps);for(var Q=0;Q<B.length;Q++){var at=Fu(w,B[Q],A||_.handleEvent,!1,_.h||_);if(!at)break;_.g[at.key]=at}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),yr(),Wo(h.i,h.u,h.A,h.l,h.R,h.m)}Je.prototype.ca=function(h){h=h.target;const _=this.M;_&&Nn(h)==3?_.j():this.Y(h)},Je.prototype.Y=function(h){try{if(h==this.g)t:{const be=Nn(this.g);var _=this.g.Ba();const Bi=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||nc(this.g)))){this.J||be!=4||_==7||(_==8||0>=Bi?yr(3):yr(2)),Er(this);var w=this.g.Z();this.X=w;e:if(Xu(this)){var A=nc(this.g);h="";var B=A.length,Q=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),ni(this);var at="";break e}this.h.i=new d.TextDecoder}for(_=0;_<B;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(Q&&_==B-1)});A.length=0,this.h.g+=h,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=w==200,ud(this.i,this.u,this.A,this.l,this.R,be,w),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,Te=this.g;if((Pt=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Pt)){var Ut=Pt;break e}}Ut=null}if(w=Ut)_r(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ws(this,w);else{this.o=!1,this.s=3,ie(12),Pe(this),ni(this);break t}}if(this.P){w=!0;let Ue;for(;!this.J&&this.C<at.length;)if(Ue=Qu(this,at),Ue==wa){be==4&&(this.s=4,ie(14),w=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==Jo){this.s=4,ie(15),_r(this.i,this.l,at,"[Invalid Chunk]"),w=!1;break}else _r(this.i,this.l,Ue,null),ws(this,Ue);if(Xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||at.length!=0||this.h.h||(this.s=1,ie(16),w=!1),this.o=this.o&&w,!w)_r(this.i,this.l,at,"[Invalid Chunked Response]"),Pe(this),ni(this);else if(0<at.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),xs(Oe),Oe.M=!0,ie(11))}}else _r(this.i,this.l,at,null),ws(this,at);be==4&&Pe(this),this.o&&!this.J&&(be==4?oc(this.j,this):(this.o=!1,Es(this)))}else md(this.g),w==400&&0<at.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Pe(this),ni(this)}}}catch{}finally{}};function Xu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Qu(h,_){var w=h.C,A=_.indexOf(`
`,w);return A==-1?wa:(w=Number(_.substring(w,A)),isNaN(w)?Jo:(A+=1,A+w>_.length?wa:(_=_.slice(A,A+w),h.C=A+w,_)))}Je.prototype.cancel=function(){this.J=!0,Pe(this)};function Es(h){h.S=Date.now()+h.I,Zu(h,h.I)}function Zu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ge(E(h.ba,h),_)}function Er(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Je.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Yu(this.i,this.A),this.L!=2&&(yr(),ie(17)),Pe(this),this.s=2,ni(this)):Zu(this,this.S-h)};function ni(h){h.j.G==0||h.J||oc(h.j,h)}function Pe(h){Er(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,ys(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function ws(h,_){try{var w=h.j;if(w.G!=0&&(w.g==h||tl(w.h,h))){if(!h.K&&tl(w.h,h)&&w.G==3){try{var A=w.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)ka(w),Na(w);else break t;cl(w),ie(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=ge(E(w.Za,w),6e3));if(1>=ba(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else zi(w,11)}else if((h.K||w.g==h)&&ka(w),!F(_))for(B=w.Da.g.parse(_),_=0;_<B.length;_++){let Ut=B[_];if(w.T=Ut[0],Ut=Ut[1],w.G==2)if(Ut[0]=="c"){w.K=Ut[1],w.ia=Ut[2];const Oe=Ut[3];Oe!=null&&(w.la=Oe,w.j.info("VER="+w.la));const be=Ut[4];be!=null&&(w.Aa=be,w.j.info("SVER="+w.Aa));const Bi=Ut[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(A=1.5*Bi,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Ue=h.g;if(Ue){const ui=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var Q=A.h;Q.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Sa(Q,Q.h),Q.h=null))}if(A.D){const fl=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(A.ya=fl,$t(A.I,A.D,fl))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var at=h;if(A.qa=uc(A,A.J?A.ia:null,A.W),at.K){tn(A.h,at);var Pt=at,Te=A.L;Te&&(Pt.I=Te),Pt.B&&(Er(Pt),Es(Pt)),A.g=at}else sc(A);0<w.i.length&&xa(w)}else Ut[0]!="stop"&&Ut[0]!="close"||zi(w,7);else w.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?zi(w,7):ll(w):Ut[0]!="noop"&&w.l&&w.l.ta(Ut),w.v=0)}}yr(4)}catch{}}var Wu=class{constructor(h,_){this.g=h,this.map=_}};function ki(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ta(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ba(h){return h.h?1:h.g?h.g.size:0}function tl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Sa(h,_){h.g?h.g.add(_):h.h=_}function tn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}ki.prototype.cancel=function(){if(this.i=el(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function el(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.D);return _}return M(h.i)}function cd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],w=h.length,A=0;A<w;A++)_.push(h[A]);return _}_=[],w=0;for(A in h)_[w++]=h[A];return _}function Aa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var w=0;w<h;w++)_.push(w);return _}_=[],w=0;for(const A in h)_[w++]=A;return _}}}function nl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var w=Aa(h),A=cd(h),B=A.length,Q=0;Q<B;Q++)_.call(void 0,A[Q],w&&w[Q],h)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hd(h,_){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var A=h[w].indexOf("="),B=null;if(0<=A){var Q=h[w].substring(0,A);B=h[w].substring(A+1)}else Q=h[w];_(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function pe(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof pe){this.h=h.h,bs(this,h.j),this.o=h.o,this.g=h.g,wr(this,h.s),this.l=h.l;var _=h.i,w=new Vi;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),Mi(this,w),this.m=h.m}else h&&(_=String(h).match(Ts))?(this.h=!1,bs(this,_[1]||"",!0),this.o=Cn(_[2]||""),this.g=Cn(_[3]||"",!0),wr(this,_[4]),this.l=Cn(_[5]||"",!0),Mi(this,_[6]||"",!0),this.m=Cn(_[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}pe.prototype.toString=function(){var h=[],_=this.j;_&&h.push(As(_,il,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(As(_,il,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(As(w,w.charAt(0)=="/"?fd:rl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",As(w,Ra)),h.join("")};function dn(h){return new pe(h)}function bs(h,_,w){h.j=w?Cn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function wr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Mi(h,_,w){_ instanceof Vi?(h.i=_,tc(h.i,h.h)):(w||(_=As(_,dd)),h.i=new Vi(_,h.h))}function $t(h,_,w){h.i.set(_,w)}function Ss(h){return $t(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Cn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function As(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,Ju),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ju(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var il=/[#\/\?@]/g,rl=/[#\?:]/g,fd=/[#\?]/g,dd=/[#\?@]/g,Ra=/#/g;function Vi(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Dn(h){h.g||(h.g=new Map,h.h=0,h.i&&hd(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}e=Vi.prototype,e.add=function(h,_){Dn(this),this.i=null,h=ii(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function Pi(h,_){Dn(h),_=ii(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ui(h,_){return Dn(h),_=ii(h,_),h.g.has(_)}e.forEach=function(h,_){Dn(this),this.g.forEach(function(w,A){w.forEach(function(B){h.call(_,B,A,this)},this)},this)},e.na=function(){Dn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let A=0;A<_.length;A++){const B=h[A];for(let Q=0;Q<B.length;Q++)w.push(_[A])}return w},e.V=function(h){Dn(this);let _=[];if(typeof h=="string")Ui(this,h)&&(_=_.concat(this.g.get(ii(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)_=_.concat(h[w])}return _},e.set=function(h,_){return Dn(this),this.i=null,h=ii(this,h),Ui(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function sl(h,_,w){Pi(h,_),0<w.length&&(h.i=null,h.g.set(ii(h,_),M(w)),h.h+=w.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var A=_[w];const Q=encodeURIComponent(String(A)),at=this.V(A);for(A=0;A<at.length;A++){var B=Q;at[A]!==""&&(B+="="+encodeURIComponent(String(at[A]))),h.push(B)}}return this.i=h.join("&")};function ii(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function tc(h,_){_&&!h.j&&(Dn(h),h.i=null,h.g.forEach(function(w,A){var B=A.toLowerCase();A!=B&&(Pi(this,A),sl(this,B,w))},h)),h.j=_}function Rs(h,_){const w=new In;if(d.Image){const A=new Image;A.onload=b(On,w,"TestLoadImage: loaded",!0,_,A),A.onerror=b(On,w,"TestLoadImage: error",!1,_,A),A.onabort=b(On,w,"TestLoadImage: abort",!1,_,A),A.ontimeout=b(On,w,"TestLoadImage: timeout",!1,_,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function Hn(h,_){const w=new In,A=new AbortController,B=setTimeout(()=>{A.abort(),On(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(Q=>{clearTimeout(B),Q.ok?On(w,"TestPingServer: ok",!0,_):On(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),On(w,"TestPingServer: error",!1,_)})}function On(h,_,w,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(w)}catch{}}function Is(){this.g=new _s}function ri(h,_,w){const A=w||"";try{nl(h,function(B,Q){let at=B;g(B)&&(at=Bn(B)),_.push(A+Q+"="+encodeURIComponent(at))})}catch(B){throw _.push(A+"type="+encodeURIComponent("_badmap")),B}}function Tr(h){this.l=h.Ub||null,this.j=h.eb||!1}I(Tr,$o),Tr.prototype.g=function(){return new Li(this.l,this.j)},Tr.prototype.i=function(h){return function(){return h}}({});function Li(h,_){oe.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Li,oe),e=Li.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ai(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?si(this):ai(this),this.readyState==3&&al(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,si(this))},e.Qa=function(h){this.g&&(this.response=h,si(this))},e.ga=function(){this.g&&si(this)};function si(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ai(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function ai(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ol(h){let _="";return tt(h,function(w,A){_+=A,_+=":",_+=w,_+=`\r
`}),_}function De(h,_,w){t:{for(A in w){var A=!1;break t}A=!0}A||(w=ol(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):$t(h,_,w))}function Ht(h){oe.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ht,oe);var Ia=/^https?$/i,Cs=["POST","PUT"];e=Ht.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?Yo(this.o):Yo(ti),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){ec(this,Q);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)w.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())w.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Cs,_,void 0))||A||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,at]of w)this.g.setRequestHeader(Q,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ds(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){ec(this,Q)}};function ec(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Ca(h),oi(h)}function Ca(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),oi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),Ht.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},e.bb=function(){Da(this)};function Da(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Nn(h)!=4||h.Z()!=2)){if(h.u&&Nn(h)==4)Ge(h.Ea,0,h);else if(Ft(h,"readystatechange"),Nn(h)==4){h.h=!1;try{const at=h.Z();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var w;if(!(w=_)){var A;if(A=at===0){var B=String(h.D).match(Ts)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),A=!Ia.test(B?B.toLowerCase():"")}w=A}if(w)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var Q=2<Nn(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Ca(h)}}finally{oi(h)}}}}function oi(h,_){if(h.g){Ds(h);const w=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{w.onreadystatechange=A}catch{}}}function Ds(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function Nn(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),va(_)}};function nc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function md(h){const _={};h=(h.g&&2<=Nn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(F(h[A]))continue;var w=x(h[A]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=_[B]||[];_[B]=Q,Q.push(w)}D(_,function(A){return A.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function Oa(h){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,h),this.cb=Os("retryDelaySeedMs",1e4,h),this.Wa=Os("forwardChannelMaxRetries",2,h),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ki(h&&h.concurrentRequestLimit),this.Da=new Is,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Oa.prototype,e.la=8,e.G=1,e.connect=function(h,_,w,A){ie(0),this.W=h,this.H=_||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=uc(this,null,this.W),xa(this)};function ll(h){if(ic(h),h.G==3){var _=h.U++,w=dn(h.I);if($t(w,"SID",h.K),$t(w,"RID",_),$t(w,"TYPE","terminate"),Ns(h,w),_=new Je(h,h.j,_),_.L=2,_.v=Ss(dn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=_.v,w=!0),w||(_.g=cc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Es(_)}lc(h)}function Na(h){h.g&&(xs(h),h.g.cancel(),h.g=null)}function ic(h){Na(h),h.u&&(d.clearTimeout(h.u),h.u=null),ka(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function xa(h){if(!Ta(h.h)&&!h.s){h.s=!0;var _=h.Ga;ot||P(),mt||(ot(),mt=!0),Rt.add(_,h),h.B=0}}function gd(h,_){return ba(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ge(E(h.Ga,h,_),hl(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new Je(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=R(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)t:{for(var _=0,w=0;w<this.i.length;w++){e:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=w;break t}if(_===4096||w===this.i.length-1){_=w+1;break t}}_=1e3}else _=1e3;_=rc(this,B,_),w=dn(this.I),$t(w,"RID",h),$t(w,"CVER",22),this.D&&$t(w,"X-HTTP-Session-Id",this.D),Ns(this,w),Q&&(this.O?_="headers="+encodeURIComponent(String(ol(Q)))+"&"+_:this.m&&De(w,this.m,Q)),Sa(this.h,B),this.Ua&&$t(w,"TYPE","init"),this.P?($t(w,"$req",_),$t(w,"SID","null"),B.T=!0,jn(B,w,null)):jn(B,w,_),this.G=2}}else this.G==3&&(h?ul(this,h):this.i.length==0||Ta(this.h)||ul(this))};function ul(h,_){var w;_?w=_.l:w=h.U++;const A=dn(h.I);$t(A,"SID",h.K),$t(A,"RID",w),$t(A,"AID",h.T),Ns(h,A),h.m&&h.o&&De(A,h.m,h.o),w=new Je(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),_&&(h.i=_.D.concat(h.i)),_=rc(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Sa(h.h,w),jn(w,A,_)}function Ns(h,_){h.H&&tt(h.H,function(w,A){$t(_,A,w)}),h.l&&nl({},function(w,A){$t(_,A,w)})}function rc(h,_,w){w=Math.min(h.i.length,w);var A=h.l?E(h.l.Na,h.l,h):null;t:{var B=h.i;let Q=-1;for(;;){const at=["count="+w];Q==-1?0<w?(Q=B[0].g,at.push("ofs="+Q)):Q=0:at.push("ofs="+Q);let Pt=!0;for(let Te=0;Te<w;Te++){let Ut=B[Te].g;const Oe=B[Te].map;if(Ut-=Q,0>Ut)Q=Math.max(0,B[Te].g-100),Pt=!1;else try{ri(Oe,at,"req"+Ut+"_")}catch{A&&A(Oe)}}if(Pt){A=at.join("&");break t}}}return h=h.i.splice(0,w),_.D=h,A}function sc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ot||P(),mt||(ot(),mt=!0),Rt.add(_,h),h.v=0}}function cl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ge(E(h.Fa,h),hl(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ge(E(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),Na(this),ac(this))};function xs(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function ac(h){h.g=new Je(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=dn(h.qa);$t(_,"RID","rpc"),$t(_,"SID",h.K),$t(_,"AID",h.T),$t(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&$t(_,"TO",h.ja),$t(_,"TYPE","xmlhttp"),Ns(h,_),h.m&&h.o&&De(_,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Ss(dn(_)),w.m=null,w.P=!0,xi(w,h)}e.Za=function(){this.C!=null&&(this.C=null,Na(this),cl(this),ie(19))};function ka(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function oc(h,_){var w=null;if(h.g==_){ka(h),xs(h),h.g=null;var A=2}else if(tl(h.h,_))w=_.D,tn(h.h,_),A=1;else return;if(h.G!=0){if(_.o)if(A==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var B=h.B;A=pr(),Ft(A,new we(A,w)),xa(h)}else sc(h);else if(B=_.s,B==3||B==0&&0<_.X||!(A==1&&gd(h,_)||A==2&&cl(h)))switch(w&&0<w.length&&(_=h.h,_.i=_.i.concat(w)),B){case 1:zi(h,5);break;case 4:zi(h,10);break;case 3:zi(h,6);break;default:zi(h,2)}}}function hl(h,_){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*_}function zi(h,_){if(h.j.info("Error code "+_),_==2){var w=E(h.fb,h),A=h.Xa;const B=!A;A=new pe(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||bs(A,"https"),Ss(A),B?Rs(A.toString(),w):Hn(A.toString(),w)}else ie(2);h.G=0,h.l&&h.l.sa(_),lc(h),ic(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function lc(h){if(h.G=0,h.ka=[],h.l){const _=el(h.h);(_.length!=0||h.i.length!=0)&&(N(h.ka,_),N(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function uc(h,_,w){var A=w instanceof pe?dn(w):new pe(w);if(A.g!="")_&&(A.g=_+"."+A.g),wr(A,A.s);else{var B=d.location;A=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;var Q=new pe(null);A&&bs(Q,A),_&&(Q.g=_),B&&wr(Q,B),w&&(Q.l=w),A=Q}return w=h.D,_=h.ya,w&&_&&$t(A,w,_),$t(A,"VER",h.la),Ns(h,A),A}function cc(h,_,w){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Ht(new Tr({eb:w})):new Ht(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function hc(){}e=hc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ma(){}Ma.prototype.g=function(h,_){return new en(h,_)};function en(h,_){oe.call(this),this.g=new Oa(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new li(this)}I(en,oe),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){ll(this.g)},en.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Bn(h),h=w);_.i.push(new Wu(_.Ya++,h)),_.G==3&&xa(_)},en.prototype.N=function(){this.g.l=null,delete this.j,ll(this.g),delete this.g,en.aa.N.call(this)};function fc(h){Oi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const w in _){h=w;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}I(fc,Oi);function dc(){Qo.call(this),this.status=1}I(dc,Qo);function li(h){this.g=h}I(li,hc),li.prototype.ua=function(){Ft(this.g,"a")},li.prototype.ta=function(h){Ft(this.g,new fc(h))},li.prototype.sa=function(h){Ft(this.g,new dc)},li.prototype.ra=function(){Ft(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,yb=function(){return new Ma},pb=function(){return pr()},gb=Jn,$g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,Dh=vr,Ni.COMPLETE="complete",mb=Ni,Xo.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",oe.prototype.listen=oe.prototype.K,nu=Xo,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,db=Ht}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const UE="@firebase/firestore",LE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new Hp("@firebase/firestore");function fo(){return sa.logLevel}function ct(e,...t){if(sa.logLevel<=Mt.DEBUG){const n=t.map(Gp);sa.debug(`Firestore (${Uo}): ${e}`,...n)}}function lr(e,...t){if(sa.logLevel<=Mt.ERROR){const n=t.map(Gp);sa.error(`Firestore (${Uo}): ${e}`,...n)}}function So(e,...t){if(sa.logLevel<=Mt.WARN){const n=t.map(Gp);sa.warn(`Firestore (${Uo}): ${e}`,...n)}}function Gp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,_b(e,r,n)}function _b(e,t,n){let r=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lr(r),new Error(r)}function qt(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||_b(t,a,r)}function At(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Xe.UNAUTHENTICATED))}shutdown(){}}class v2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class E2{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){qt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let l=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new sr,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new sr)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qt(typeof r.accessToken=="string",31837,{l:r}),new vb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class w2{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class T2{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new w2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){qt(this.o===void 0,3512);const r=l=>{l.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ct("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=S2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Dt(e,t){return e<t?-1:e>t?1:0}function Yg(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Dt(r,a);{const l=Eb(),c=A2(l.encode(BE(e,n)),l.encode(BE(t,n)));return c!==0?c:Dt(r,a)}}n+=r>65535?2:1}return Dt(e.length,t.length)}function BE(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function A2(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Dt(e[n],t[n]);return Dt(e.length,t.length)}function Ao(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=-62135596800,HE=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(t){return me.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*HE);return new me(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<jE)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HE}_compareTo(t){return this.seconds===t.seconds?Dt(this.nanoseconds,t.nanoseconds):Dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-jE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new me(0,0))}static max(){return new St(new me(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__name__";class gi{constructor(t,n,r){n===void 0?n=0:n>t.length&&Et(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Et(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return gi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof gi?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=gi.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Dt(t.length,n.length)}static compareSegments(t,n){const r=gi.isNumericId(t),a=gi.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?gi.extractNumericId(t).compare(gi.extractNumericId(n)):Yg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Jr.fromString(t.substring(4,t.length-2))}}class ee extends gi{construct(t,n,r){return new ee(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ht(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new ee(n)}static emptyPath(){return new ee([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends gi{construct(t,n,r){return new qe(t,n,r)}static isValidIdentifier(t){return R2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qE}static keyField(){return new qe([qE])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new ht(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ht(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ht(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(ee.fromString(t))}static fromName(t){return new pt(ee.fromString(t).popFirst(5))}static empty(){return new pt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ee.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new ee(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function I2(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=St.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new is(a,pt.empty(),t)}function C2(e){return new is(e.readTime,e.key,vu)}class is{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new is(St.min(),pt.empty(),vu)}static max(){return new is(St.max(),pt.empty(),vu)}}function D2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=pt.comparator(e.documentKey,t.documentKey),n!==0?n:Dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(e){if(e.code!==nt.FAILED_PRECONDITION||e.message!==O2)throw e;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new it((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof it?n:it.resolve(n)}catch(n){return it.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):it.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):it.reject(n)}static resolve(t){return new it((n,r)=>{n(t)})}static reject(t){return new it((n,r)=>{r(t)})}static waitFor(t){return new it((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},m=>r(m))}),c=!0,l===a&&n()})}static or(t){let n=it.resolve(!1);for(const r of t)n=n.next(a=>a?it.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new it((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;n(t[g]).next(y=>{c[g]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new it((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function x2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zo(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Nf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=-1;function xf(e){return e==null}function Gh(e){return e===0&&1/e==-1/0}function k2(e){return typeof e=="number"&&Number.isInteger(e)&&!Gh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="";function M2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=FE(t)),t=V2(e.get(n),t);return FE(t)}function V2(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case Tb:n+="";break;default:n+=l}}return n}function FE(e){return e+Tb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function us(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n){this.comparator=t,this.root=n||He.EMPTY}insert(t,n){return new ae(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(t){return new ae(this.comparator,this.root.remove(t,this.comparator).copy(null,null,He.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ph(this.root,t,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ph(this.root,t,this.comparator,!0)}}class ph{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class He{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??He.RED,this.left=a??He.EMPTY,this.right=l??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new He(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return He.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new He(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.comparator=t,this.data=new ae(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new KE(this.data.getIterator())}getIteratorFrom(t){return new KE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Re)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Re(this.comparator);return n.data=t,n}}class KE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.fields=t,t.sort(qe.comparator)}static empty(){return new wn([])}unionWith(t){let n=new Re(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new wn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ao(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Sb("Invalid base64 string: "+l):l}}(t);return new Fe(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new Fe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const P2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(e){if(qt(!!e,39018),typeof e=="string"){let t=0;const n=P2.exec(e);if(qt(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:de(e.seconds),nanos:de(e.nanos)}}function de(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ss(e){return typeof e=="string"?Fe.fromBase64String(e):Fe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="server_timestamp",Rb="__type__",Ib="__previous_value__",Cb="__local_write_time__";function $p(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Rb])===null||n===void 0?void 0:n.stringValue)===Ab}function kf(e){const t=e.mapValue.fields[Ib];return $p(t)?kf(t):t}function Eu(e){const t=rs(e.mapValue.fields[Cb].timestampValue);return new me(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t,n,r,a,l,c,d,m,g,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const Kh="(default)";class wu{constructor(t,n){this.projectId=t,this.database=n||Kh}static empty(){return new wu("","")}get isDefaultDatabase(){return this.database===Kh}isEqual(t){return t instanceof wu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__type__",L2="__max__",yh={mapValue:{}},Ob="__vector__",$h="value";function as(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$p(e)?4:B2(e)?9007199254740991:z2(e)?10:11:Et(28295,{value:e})}function Ai(e,t){if(e===t)return!0;const n=as(e);if(n!==as(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Eu(e).isEqual(Eu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=rs(a.timestampValue),d=rs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return ss(a.bytesValue).isEqual(ss(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return de(a.geoPointValue.latitude)===de(l.geoPointValue.latitude)&&de(a.geoPointValue.longitude)===de(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return de(a.integerValue)===de(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=de(a.doubleValue),d=de(l.doubleValue);return c===d?Gh(c)===Gh(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return Ao(e.arrayValue.values||[],t.arrayValue.values||[],Ai);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(GE(c)!==GE(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ai(c[m],d[m])))return!1;return!0}(e,t);default:return Et(52216,{left:e})}}function Tu(e,t){return(e.values||[]).find(n=>Ai(n,t))!==void 0}function Ro(e,t){if(e===t)return 0;const n=as(e),r=as(t);if(n!==r)return Dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=de(l.integerValue||l.doubleValue),m=de(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(e,t);case 3:return $E(e.timestampValue,t.timestampValue);case 4:return $E(Eu(e),Eu(t));case 5:return Yg(e.stringValue,t.stringValue);case 6:return function(l,c){const d=ss(l),m=ss(c);return d.compareTo(m)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const y=Dt(d[g],m[g]);if(y!==0)return y}return Dt(d.length,m.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Dt(de(l.latitude),de(c.latitude));return d!==0?d:Dt(de(l.longitude),de(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return YE(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,m,g,y;const v=l.fields||{},E=c.fields||{},b=(d=v[$h])===null||d===void 0?void 0:d.arrayValue,I=(m=E[$h])===null||m===void 0?void 0:m.arrayValue,M=Dt(((g=b==null?void 0:b.values)===null||g===void 0?void 0:g.length)||0,((y=I==null?void 0:I.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:YE(b,I)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===yh.mapValue&&c===yh.mapValue)return 0;if(l===yh.mapValue)return 1;if(c===yh.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const E=Yg(m[v],y[v]);if(E!==0)return E;const b=Ro(d[m[v]],g[y[v]]);if(b!==0)return b}return Dt(m.length,y.length)}(e.mapValue,t.mapValue);default:throw Et(23264,{Pe:n})}}function $E(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Dt(e,t);const n=rs(e),r=rs(t),a=Dt(n.seconds,r.seconds);return a!==0?a:Dt(n.nanos,r.nanos)}function YE(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=Ro(n[a],r[a]);if(l)return l}return Dt(n.length,r.length)}function Io(e){return Xg(e)}function Xg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ss(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return pt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=Xg(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Xg(n.fields[c])}`;return a+"}"}(e.mapValue):Et(61005,{value:e})}function Oh(e){switch(as(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=kf(e);return t?16+Oh(t):16;case 5:return 2*e.stringValue.length;case 6:return ss(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Oh(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return us(r.fields,(l,c)=>{a+=l.length+Oh(c)}),a}(e.mapValue);default:throw Et(13486,{value:e})}}function XE(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qg(e){return!!e&&"integerValue"in e}function Yp(e){return!!e&&"arrayValue"in e}function QE(e){return!!e&&"nullValue"in e}function ZE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nh(e){return!!e&&"mapValue"in e}function z2(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Db])===null||n===void 0?void 0:n.stringValue)===Ob}function fu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return us(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=fu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function B2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===L2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.value=t}static empty(){return new ln({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Nh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=fu(n)}setAll(t){let n=qe.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=fu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());Nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ai(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];Nh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){us(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new ln(fu(this.value))}}function Nb(e){const t=[];return us(e.fields,(n,r)=>{const a=new qe([n]);if(Nh(r)){const l=Nb(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Ze(t,0,St.min(),St.min(),St.min(),ln.empty(),0)}static newFoundDocument(t,n,r,a){return new Ze(t,1,n,St.min(),r,a,0)}static newNoDocument(t,n){return new Ze(t,2,n,St.min(),St.min(),ln.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,St.min(),St.min(),ln.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,n){this.position=t,this.inclusive=n}}function WE(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=pt.comparator(pt.fromName(c.referenceValue),n.key):r=Ro(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function JE(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ai(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,n="asc"){this.field=t,this.dir=n}}function j2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{}class Ee extends xb{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new q2(t,n,r):n==="array-contains"?new K2(t,r):n==="in"?new $2(t,r):n==="not-in"?new Y2(t,r):n==="array-contains-any"?new X2(t,r):new Ee(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new F2(t,r):new G2(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends xb{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Qn(t,n)}matches(t){return kb(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kb(e){return e.op==="and"}function Mb(e){return H2(e)&&kb(e)}function H2(e){for(const t of e.filters)if(t instanceof Qn)return!1;return!0}function Zg(e){if(e instanceof Ee)return e.field.canonicalString()+e.op.toString()+Io(e.value);if(Mb(e))return e.filters.map(t=>Zg(t)).join(",");{const t=e.filters.map(n=>Zg(n)).join(",");return`${e.op}(${t})`}}function Vb(e,t){return e instanceof Ee?function(r,a){return a instanceof Ee&&r.op===a.op&&r.field.isEqual(a.field)&&Ai(r.value,a.value)}(e,t):e instanceof Qn?function(r,a){return a instanceof Qn&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Vb(c,a.filters[d]),!0):!1}(e,t):void Et(19439)}function Pb(e){return e instanceof Ee?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(e):e instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(Pb).join(" ,")+"}"}(e):"Filter"}class q2 extends Ee{constructor(t,n,r){super(t,n,r),this.key=pt.fromName(r.referenceValue)}matches(t){const n=pt.comparator(t.key,this.key);return this.matchesComparison(n)}}class F2 extends Ee{constructor(t,n){super(t,"in",n),this.keys=Ub("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class G2 extends Ee{constructor(t,n){super(t,"not-in",n),this.keys=Ub("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Ub(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pt.fromName(r.referenceValue))}class K2 extends Ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Yp(n)&&Tu(n.arrayValue,this.value)}}class $2 extends Ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Tu(this.value.arrayValue,n)}}class Y2 extends Ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tu(this.value.arrayValue,n)}}class X2 extends Ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function tw(e,t=null,n=[],r=[],a=null,l=null,c=null){return new Q2(e,t,n,r,a,l,c)}function Xp(e){const t=At(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Zg(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),xf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Io(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Io(r)).join(",")),t.Ie=n}return t.Ie}function Qp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!j2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!JE(e.startAt,t.startAt)&&JE(e.endAt,t.endAt)}function Wg(e){return pt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Z2(e,t,n,r,a,l,c,d){return new ku(e,t,n,r,a,l,c,d)}function Zp(e){return new ku(e)}function ew(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Lb(e){return e.collectionGroup!==null}function du(e){const t=At(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Re(qe.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Xh(l,r))}),n.has(qe.keyField().canonicalString())||t.Ee.push(new Xh(qe.keyField(),r))}return t.Ee}function Ei(e){const t=At(e);return t.de||(t.de=W2(t,du(e))),t.de}function W2(e,t){if(e.limitType==="F")return tw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Xh(a.field,l)});const n=e.endAt?new Yh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yh(e.startAt.position,e.startAt.inclusive):null;return tw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Jg(e,t){const n=e.filters.concat([t]);return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function tp(e,t,n){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mf(e,t){return Qp(Ei(e),Ei(t))&&e.limitType===t.limitType}function zb(e){return`${Xp(Ei(e))}|lt:${e.limitType}`}function mo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>Pb(a)).join(", ")}]`),xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>Io(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>Io(a)).join(",")),`Target(${r})`}(Ei(e))}; limitType=${e.limitType})`}function Vf(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):pt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of du(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,m){const g=WE(c,d,m);return c.inclusive?g<=0:g<0}(r.startAt,du(r),a)||r.endAt&&!function(c,d,m){const g=WE(c,d,m);return c.inclusive?g>=0:g>0}(r.endAt,du(r),a))}(e,t)}function J2(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bb(e){return(t,n)=>{let r=!1;for(const a of du(e)){const l=tD(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function tD(e,t,n){const r=e.field.isKeyField()?pt.comparator(t.key,n.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Ro(m,g):Et(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){us(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new ae(pt.comparator);function ur(){return eD}const jb=new ae(pt.comparator);function iu(...e){let t=jb;for(const n of e)t=t.insert(n.key,n);return t}function Hb(e){let t=jb;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Js(){return mu()}function qb(){return mu()}function mu(){return new ga(e=>e.toString(),(e,t)=>e.isEqual(t))}const nD=new ae(pt.comparator),iD=new Re(pt.comparator);function Vt(...e){let t=iD;for(const n of e)t=t.add(n);return t}const rD=new Re(Dt);function sD(){return rD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(t)?"-0":t}}function Fb(e){return{integerValue:""+e}}function aD(e,t){return k2(t)?Fb(t):Wp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function oD(e,t,n){return e instanceof Qh?function(a,l){const c={fields:{[Rb]:{stringValue:Ab},[Cb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&$p(l)&&(l=kf(l)),l&&(c.fields[Ib]=l),{mapValue:c}}(n,t):e instanceof bu?Kb(e,t):e instanceof Su?$b(e,t):function(a,l){const c=Gb(a,l),d=nw(c)+nw(a.Re);return Qg(c)&&Qg(a.Re)?Fb(d):Wp(a.serializer,d)}(e,t)}function lD(e,t,n){return e instanceof bu?Kb(e,t):e instanceof Su?$b(e,t):n}function Gb(e,t){return e instanceof Zh?function(r){return Qg(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Qh extends Pf{}class bu extends Pf{constructor(t){super(),this.elements=t}}function Kb(e,t){const n=Yb(t);for(const r of e.elements)n.some(a=>Ai(a,r))||n.push(r);return{arrayValue:{values:n}}}class Su extends Pf{constructor(t){super(),this.elements=t}}function $b(e,t){let n=Yb(t);for(const r of e.elements)n=n.filter(a=>!Ai(a,r));return{arrayValue:{values:n}}}class Zh extends Pf{constructor(t,n){super(),this.serializer=t,this.Re=n}}function nw(e){return de(e.integerValue||e.doubleValue)}function Yb(e){return Yp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function uD(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof bu&&a instanceof bu||r instanceof Su&&a instanceof Su?Ao(r.elements,a.elements,Ai):r instanceof Zh&&a instanceof Zh?Ai(r.Re,a.Re):r instanceof Qh&&a instanceof Qh}(e.transform,t.transform)}class cD{constructor(t,n){this.version=t,this.transformResults=n}}class Tn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Tn}static exists(t){return new Tn(void 0,t)}static updateTime(t){return new Tn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Uf{}function Xb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Lf(e.key,Tn.none()):new Mu(e.key,e.data,Tn.none());{const n=e.data,r=ln.empty();let a=new Re(qe.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new cs(e.key,r,new wn(a.toArray()),Tn.none())}}function hD(e,t,n){e instanceof Mu?function(a,l,c){const d=a.value.clone(),m=rw(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof cs?function(a,l,c){if(!xh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=rw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Qb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function gu(e,t,n,r){return e instanceof Mu?function(l,c,d,m){if(!xh(l.precondition,c))return d;const g=l.value.clone(),y=sw(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(e,t,n,r):e instanceof cs?function(l,c,d,m){if(!xh(l.precondition,c))return d;const g=sw(l.fieldTransforms,m,c),y=c.data;return y.setAll(Qb(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return xh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function fD(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=Gb(r.transform,a||null);l!=null&&(n===null&&(n=ln.empty()),n.set(r.field,l))}return n||null}function iw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ao(r,a,(l,c)=>uD(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mu extends Uf{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class cs extends Uf{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Qb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function rw(e,t,n){const r=new Map;qt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,lD(c,d,n[a]))}return r}function sw(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,oD(l,c,t))}return r}class Lf extends Uf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dD extends Uf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&hD(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=gu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=gu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=qb();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const m=Xb(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Ao(this.mutations,t.mutations,(n,r)=>iw(n,r))&&Ao(this.baseMutations,t.baseMutations,(n,r)=>iw(n,r))}}class Jp{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){qt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return nD}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Jp(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,zt;function yD(e){switch(e){case nt.OK:return Et(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return Et(15467,{code:e})}}function Zb(e){if(e===void 0)return lr("GRPC error has no .code"),nt.UNKNOWN;switch(e){case ve.OK:return nt.OK;case ve.CANCELLED:return nt.CANCELLED;case ve.UNKNOWN:return nt.UNKNOWN;case ve.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case ve.INTERNAL:return nt.INTERNAL;case ve.UNAVAILABLE:return nt.UNAVAILABLE;case ve.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case ve.NOT_FOUND:return nt.NOT_FOUND;case ve.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case ve.ABORTED:return nt.ABORTED;case ve.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case ve.DATA_LOSS:return nt.DATA_LOSS;default:return Et(39323,{code:e})}}(zt=ve||(ve={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new Jr([4294967295,4294967295],0);function aw(e){const t=Eb().encode(e),n=new fb;return n.update(t),new Uint8Array(n.digest())}function ow(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Jr([n,r],0),new Jr([a,l],0)]}class ty{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ru(`Invalid padding: ${n}`);if(r<0)throw new ru(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ru(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Jr.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(Jr.fromNumber(r)));return a.compare(_D)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=aw(t),[r,a]=ow(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new ty(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=aw(t),[r,a]=ow(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,Vu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new zf(St.min(),a,new ae(Dt),ur(),Vt())}}class Vu{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Vu(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class Wb{constructor(t,n){this.targetId=t,this.Ce=n}}class Jb{constructor(t,n,r=Fe.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class lw{constructor(){this.Fe=0,this.Me=uw(),this.xe=Fe.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Vt(),n=Vt(),r=Vt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Et(38017,{changeType:l})}}),new Vu(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=uw()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,qt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class vD{constructor(t){this.ze=t,this.je=new Map,this.He=ur(),this.Je=_h(),this.Ye=_h(),this.Ze=new ae(Dt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Et(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(Wg(l))if(r===0){const c=new pt(l.path);this.tt(n,c,Ze.newNoDocument(c,St.min()))}else qt(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),m=d?this.lt(d,t,c):1;if(m!==0){this.st(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=ss(r).toUint8Array()}catch(m){if(m instanceof Sb)return So("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new ty(c,a,l)}catch(m){return So(m instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&Wg(d.target)){const m=new pt(d.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,Ze.newNoDocument(m,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Vt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this._t(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new zf(t,n,this.Ze,this.He,r);return this.He=ur(),this.Je=_h(),this.Ye=_h(),this.Ze=new ae(Dt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new lw,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Re(Dt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Re(Dt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||ct("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new lw),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function _h(){return new ae(pt.comparator)}function uw(){return new ae(pt.comparator)}const ED={asc:"ASCENDING",desc:"DESCENDING"},wD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TD={and:"AND",or:"OR"};class bD{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ep(e,t){return e.useProto3Json||xf(t)?t:{value:t}}function Wh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function SD(e,t){return Wh(e,t.toTimestamp())}function wi(e){return qt(!!e,49232),St.fromTimestamp(function(n){const r=rs(n);return new me(r.seconds,r.nanos)}(e))}function ey(e,t){return np(e,t).canonicalString()}function np(e,t){const n=function(a){return new ee(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function eS(e){const t=ee.fromString(e);return qt(aS(t),10190,{key:t.toString()}),t}function ip(e,t){return ey(e.databaseId,t.path)}function Tg(e,t){const n=eS(t);if(n.get(1)!==e.databaseId.projectId)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pt(iS(n))}function nS(e,t){return ey(e.databaseId,t)}function AD(e){const t=eS(e);return t.length===4?ee.emptyPath():iS(t)}function rp(e){return new ee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iS(e){return qt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function cw(e,t,n){return{name:ip(e,t),fields:n.value.mapValue.fields}}function RD(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Et(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(g,y){return g.useProto3Json?(qt(y===void 0||typeof y=="string",58123),Fe.fromBase64String(y||"")):(qt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Fe.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(g){const y=g.code===void 0?nt.UNKNOWN:Zb(g.code);return new ht(y,g.message||"")}(c);n=new Jb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Tg(e,r.document.name),l=wi(r.document.updateTime),c=r.document.createTime?wi(r.document.createTime):St.min(),d=new ln({mapValue:{fields:r.document.fields}}),m=Ze.newFoundDocument(a,l,c,d),g=r.targetIds||[],y=r.removedTargetIds||[];n=new kh(g,y,m.key,m)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Tg(e,r.document),l=r.readTime?wi(r.readTime):St.min(),c=Ze.newNoDocument(a,l),d=r.removedTargetIds||[];n=new kh([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Tg(e,r.document),l=r.removedTargetIds||[];n=new kh([],l,a,null)}else{if(!("filter"in t))return Et(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new pD(a,l),d=r.targetId;n=new Wb(d,c)}}return n}function ID(e,t){let n;if(t instanceof Mu)n={update:cw(e,t.key,t.value)};else if(t instanceof Lf)n={delete:ip(e,t.key)};else if(t instanceof cs)n={update:cw(e,t.key,t.data),updateMask:PD(t.fieldMask)};else{if(!(t instanceof dD))return Et(16599,{ft:t.type});n={verify:ip(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Qh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof bu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zh)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Et(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:SD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Et(27497)}(e,t.precondition)),n}function CD(e,t){return e&&e.length>0?(qt(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?wi(a.updateTime):wi(l);return c.isEqual(St.min())&&(c=wi(l)),new cD(c,a.transformResults||[])}(n,t))):[]}function DD(e,t){return{documents:[nS(e,t.path)]}}function OD(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nS(e,a);const l=function(g){if(g.length!==0)return sS(Qn.create(g,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(y=>function(E){return{field:go(E.field),direction:kD(E.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=ep(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:n,parent:a}}function ND(e){let t=AD(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){qt(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const E=rS(v);return E instanceof Qn&&Mb(E)?E.getFilters():[E]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(E=>function(I){return new Xh(po(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(E))}(n.orderBy));let d=null;n.limit&&(d=function(v){let E;return E=typeof v=="object"?v.value:v,xf(E)?null:E}(n.limit));let m=null;n.startAt&&(m=function(v){const E=!!v.before,b=v.values||[];return new Yh(b,E)}(n.startAt));let g=null;return n.endAt&&(g=function(v){const E=!v.before,b=v.values||[];return new Yh(b,E)}(n.endAt)),Z2(t,a,c,l,d,"F",m,g)}function xD(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function rS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=po(n.unaryFilter.field);return Ee.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=po(n.unaryFilter.field);return Ee.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=po(n.unaryFilter.field);return Ee.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=po(n.unaryFilter.field);return Ee.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ee.create(po(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(r=>rS(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(n.compositeFilter.op))}(e):Et(30097,{filter:e})}function kD(e){return ED[e]}function MD(e){return wD[e]}function VD(e){return TD[e]}function go(e){return{fieldPath:e.canonicalString()}}function po(e){return qe.fromServerFormat(e.fieldPath)}function sS(e){return e instanceof Ee?function(n){if(n.op==="=="){if(ZE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(QE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(QE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:MD(n.op),value:n.value}}}(e):e instanceof Qn?function(n){const r=n.getFilters().map(a=>sS(a));return r.length===1?r[0]:{compositeFilter:{op:VD(n.op),filters:r}}}(e):Et(54877,{filter:e})}function PD(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function aS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,n,r,a,l=St.min(),c=St.min(),d=Fe.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new Qr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t){this.wt=t}}function LD(e){const t=ND({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?tp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.Cn=new BD}addToCollectionParentIndex(t,n){return this.Cn.add(n),it.resolve()}getCollectionParents(t,n){return it.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return it.resolve()}deleteFieldIndex(t,n){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,n){return it.resolve()}getDocumentsMatchingTarget(t,n){return it.resolve(null)}getIndexType(t,n){return it.resolve(0)}getFieldIndexes(t,n){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,n){return it.resolve(is.min())}getMinOffsetFromCollectionGroup(t,n){return it.resolve(is.min())}updateCollectionGroup(t,n,r){return it.resolve()}updateIndexEntries(t,n){return it.resolve()}}class BD{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new Re(ee.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new Re(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oS=41943040;class on{static withCacheSize(t){return new on(t,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(oS,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Co(0)}static lr(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="LruGarbageCollector",jD=1048576;function dw([e,t],[n,r]){const a=Dt(e,n);return a===0?Dt(t,r):a}class HD{constructor(t){this.Er=t,this.buffer=new Re(dw),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qD{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){ct(fw,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zo(n)?ct(fw,"Ignoring IndexedDB error during garbage collection: ",n):await Lo(n)}await this.mr(3e5)})}}class FD{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return it.resolve(Nf.le);const r=new HD(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(hw)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hw):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,m,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(g=Date.now(),fo()<=Mt.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function GD(e,t){return new FD(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.changes=new ga(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?it.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&gu(r.mutation,a,wn.empty(),me.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Vt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Vt()){const a=Js();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=iu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Js();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Vt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=ur();const c=mu(),d=function(){return mu()}();return n.forEach((m,g)=>{const y=r.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof cs)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),gu(y.mutation,g,y.mutation.getFieldMask(),me.now())):c.set(g.key,wn.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((g,y)=>c.set(g,y)),n.forEach((g,y)=>{var v;return d.set(g,new $D(y,(v=c.get(g))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=mu();let a=new ae((c,d)=>c-d),l=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=n.get(m);if(g===null)return;let y=r.get(m)||wn.empty();y=d.applyToLocalView(g,y),r.set(m,y);const v=(a.get(d.batchId)||Vt()).add(m);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,y=m.value,v=qb();y.forEach(E=>{if(!l.has(E)){const b=Xb(n.get(E),r.get(E));b!==null&&v.set(E,b),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,v))}return it.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Lb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):it.resolve(Js());let d=vu,m=l;return c.next(g=>it.forEach(g,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?it.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{m=m.insert(y,E)}))).next(()=>this.populateOverlays(t,g,l)).next(()=>this.computeViews(t,m,g,Vt())).next(y=>({batchId:d,changes:Hb(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new pt(n)).next(r=>{let a=iu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=iu();return this.indexManager.getCollectionParents(t,l).next(d=>it.forEach(d,m=>{const g=function(v,E){return new ku(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,r,a).next(y=>{y.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Ze.newInvalidDocument(y)))});let d=iu();return c.forEach((m,g)=>{const y=l.get(m);y!==void 0&&gu(y.mutation,g,wn.empty(),me.now()),Vf(n,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return it.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:wi(a.createTime)}}(n)),it.resolve()}getNamedQuery(t,n){return it.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:LD(a.bundledQuery),readTime:wi(a.readTime)}}(n)),it.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.overlays=new ae(pt.comparator),this.Qr=new Map}getOverlay(t,n){return it.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Js();return it.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),it.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),it.resolve()}getOverlaysForCollection(t,n,r){const a=Js(),l=n.length+1,c=new pt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return it.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new ae((g,y)=>g-y);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=Js(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=Js(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,y)=>d.set(g,y)),!(d.size()>=a)););return it.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new gD(n,r));let l=this.Qr.get(n);l===void 0&&(l=Vt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,it.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.$r=new Re(Ve.Ur),this.Kr=new Re(Ve.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new Ve(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new Ve(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new pt(new ee([])),r=new Ve(n,t),a=new Ve(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new pt(new ee([])),r=new Ve(n,t),a=new Ve(n,t+1);let l=Vt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new Ve(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ve{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return pt.comparator(t.key,n.key)||Dt(t.Zr,n.Zr)}static Wr(t,n){return Dt(t.Zr,n.Zr)||pt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Re(Ve.Ur)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new mD(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new Ve(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,n){return it.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return it.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?Kp:this.nr-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ve(n,0),a=new Ve(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),it.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Re(Dt);return n.forEach(a=>{const l=new Ve(a,0),c=new Ve(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),it.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;pt.isDocumentKey(l)||(l=l.child(""));const c=new Ve(new pt(l),0);let d=new Re(Dt);return this.Xr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Zr)),!0)},c),it.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){qt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return it.forEach(n.mutations,a=>{const l=new Ve(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new Ve(n,0),a=this.Xr.firstAfterOrEqual(r);return it.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t){this.ii=t,this.docs=function(){return new ae(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return it.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let r=ur();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Ze.newInvalidDocument(a))}),it.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=ur();const c=n.path,d=new pt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||D2(C2(y),r)<=0||(a.has(y.key)||Vf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return it.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Et(9500)}si(t,n){return it.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new tO(this)}getSize(t){return it.resolve(this.size)}}class tO extends KD{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),it.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(t){this.persistence=t,this.oi=new ga(n=>Xp(n),Qp),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this._i=0,this.ai=new ny,this.targetCount=0,this.ui=Co.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),it.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new Co(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,it.resolve()}updateTargetData(t,n){return this.Tr(n),it.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),it.waitFor(l).next(()=>a)}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return it.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),it.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),it.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),it.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return it.resolve(r)}containsKey(t,n){return it.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t,n){this.ci={},this.overlays={},this.li=new Nf(0),this.hi=!1,this.hi=!0,this.Pi=new ZD,this.referenceDelegate=t(this),this.Ti=new eO(this),this.indexManager=new zD,this.remoteDocumentCache=function(a){return new JD(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new UD(n),this.Ei=new XD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QD,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new WD(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){ct("MemoryPersistence","Starting transaction:",t);const a=new nO(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return it.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class nO extends N2{constructor(t){super(),this.currentSequenceNumber=t}}class iy{constructor(t){this.persistence=t,this.Vi=new ny,this.mi=null}static fi(t){return new iy(t)}get gi(){if(this.mi)return this.mi;throw Et(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),it.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),it.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),it.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.gi,r=>{const a=pt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,St.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return it.or([()=>it.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Jh{constructor(t,n){this.persistence=t,this.yi=new ga(r=>M2(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=GD(this,n)}static fi(t,n){return new Jh(t,n)}di(){}Ai(t){return it.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return it.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?it.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,St.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),it.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),it.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),it.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Oh(t.data.value)),n}Dr(t,n,r){return it.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return it.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Vt(),a=Vt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ry(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return tC()?8:x2(We())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new iO;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(fo()<=Mt.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),it.resolve()):(fo()<=Mt.DEBUG&&ct("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(fo()<=Mt.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ei(n))):it.resolve())}ws(t,n){if(ew(n))return it.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=tp(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Vt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(m=>{const g=this.vs(n,d);return this.Cs(n,g,c,m.readTime)?this.ws(t,tp(n,null,"F")):this.Fs(t,g,n,m)}))})))}bs(t,n,r,a){return ew(n)||a.isEqual(St.min())?it.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?it.resolve(null):(fo()<=Mt.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),mo(n)),this.Fs(t,c,n,I2(a,vu)).next(d=>d))})}vs(t,n){let r=new Re(Bb(t));return n.forEach((a,l)=>{Vf(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return fo()<=Mt.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ys.getDocumentsMatchingQuery(t,n,is.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LocalStore",sO=3e8;class aO{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new ae(Dt),this.Os=new ga(l=>Xp(l),Qp),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new YD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function oO(e,t,n,r){return new aO(e,t,n,r)}async function uS(e,t){const n=At(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=Vt();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(r,m).next(g=>({ks:g,removedBatchIds:c,addedBatchIds:d}))})})}function lO(e,t){const n=At(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,m,g,y){const v=g.batch,E=v.keys();let b=it.resolve();return E.forEach(I=>{b=b.next(()=>y.getEntry(m,I)).next(M=>{const N=g.docVersions.get(I);qt(N!==null,48541),M.version.compareTo(N)<0&&(v.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),y.addEntry(M)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(m,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Vt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function cS(e){const t=At(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function uO(e,t){const n=At(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const E=a.get(v);if(!E)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let b=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?b=b.withResumeToken(Fe.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,r)),a=a.insert(v,b),function(M,N,Y){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=sO?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(E,b,y)&&d.push(n.Ti.updateTargetData(l,b))});let m=ur(),g=Vt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(cO(l,c,t.documentUpdates).next(y=>{m=y.qs,g=y.Qs})),!r.isEqual(St.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return it.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(n.xs=a,l))}function cO(e,t,n){let r=Vt(),a=Vt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=ur();return n.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(St.min())?(t.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(d,m)):ct(sy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{qs:c,Qs:a}})}function hO(e,t){const n=At(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Kp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function fO(e,t){const n=At(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,it.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new Qr(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function sp(e,t,n){const r=At(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!zo(c))throw c;ct(sy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function mw(e,t,n){const r=At(e);let a=St.min(),l=Vt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,y){const v=At(m),E=v.Os.get(y);return E!==void 0?it.resolve(v.xs.get(E)):v.Ti.getTargetData(g,y)}(r,c,Ei(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:St.min(),n?l:Vt())).next(d=>(dO(r,J2(t),d),{documents:d,$s:l})))}function dO(e,t,n){let r=e.Ns.get(t)||St.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class gw{constructor(){this.activeTargetIds=sD()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mO{constructor(){this.xo=new gw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new gw,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="ConnectivityMonitor";class yw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ct(pw,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){ct(pw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh=null;function ap(){return vh===null?vh=function(){return 268435456+Math.round(2147483648*Math.random())}():vh++,"0x"+vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="RestConnection",pO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yO{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===Kh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=ap(),d=this.jo(t,n.toUriEncodedString());ct(bg,`Sending RPC '${t}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,a,l);const{host:g}=new URL(d),y=ma(g);return this.Jo(t,d,m,r,y).then(v=>(ct(bg,`Received RPC '${t}' ${c}: `,v),v),v=>{throw So(bg,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=pO[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class vO extends yO{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=ap();return new Promise((d,m)=>{const g=new db;g.setWithCredentials(!0),g.listenOnce(mb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Dh.NO_ERROR:const v=g.getResponseJson();ct(Ye,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case Dh.TIMEOUT:ct(Ye,`RPC '${t}' ${c} timed out`),m(new ht(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const E=g.getStatus();if(ct(Ye,`RPC '${t}' ${c} failed with status:`,E,"response text:",g.getResponseText()),E>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const I=b==null?void 0:b.error;if(I&&I.status&&I.message){const M=function(Y){const F=Y.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(F)>=0?F:nt.UNKNOWN}(I.status);m(new ht(M,I.message))}else m(new ht(nt.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ht(nt.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{h_:t,streamId:c,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{ct(Ye,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);ct(Ye,`RPC '${t}' ${c} sending request:`,a),g.send(n,"POST",y,r,15)})}I_(t,n,r){const a=ap(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=yb(),d=pb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=l.join("");ct(Ye,`Creating RPC '${t}' stream ${a}: ${y}`,m);const v=c.createWebChannel(y,m);this.E_(v);let E=!1,b=!1;const I=new _O({Zo:N=>{b?ct(Ye,`Not sending because RPC '${t}' stream ${a} is closed:`,N):(E||(ct(Ye,`Opening RPC '${t}' stream ${a} transport.`),v.open(),E=!0),ct(Ye,`RPC '${t}' stream ${a} sending:`,N),v.send(N))},Xo:()=>v.close()}),M=(N,Y,F)=>{N.listen(Y,G=>{try{F(G)}catch(q){setTimeout(()=>{throw q},0)}})};return M(v,nu.EventType.OPEN,()=>{b||(ct(Ye,`RPC '${t}' stream ${a} transport opened.`),I.__())}),M(v,nu.EventType.CLOSE,()=>{b||(b=!0,ct(Ye,`RPC '${t}' stream ${a} transport closed`),I.u_(),this.d_(v))}),M(v,nu.EventType.ERROR,N=>{b||(b=!0,So(Ye,`RPC '${t}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),I.u_(new ht(nt.UNAVAILABLE,"The operation could not be completed")))}),M(v,nu.EventType.MESSAGE,N=>{var Y;if(!b){const F=N.data[0];qt(!!F,16349);const G=F,q=(G==null?void 0:G.error)||((Y=G[0])===null||Y===void 0?void 0:Y.error);if(q){ct(Ye,`RPC '${t}' stream ${a} received error:`,q);const X=q.status;let tt=function(C){const V=ve[C];if(V!==void 0)return Zb(V)}(X),D=q.message;tt===void 0&&(tt=nt.INTERNAL,D="Unknown error status: "+X+" with message "+q.message),b=!0,I.u_(new ht(tt,D)),v.close()}else ct(Ye,`RPC '${t}' stream ${a} received:`,F),I.c_(F)}}),M(d,gb.STAT_EVENT,N=>{N.stat===$g.PROXY?ct(Ye,`RPC '${t}' stream ${a} detected buffering proxy`):N.stat===$g.NOPROXY&&ct(Ye,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(e){return new bD(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&ct("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="PersistentStream";class fS{constructor(t,n,r,a,l,c,d,m){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new hS(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new ht(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return ct(_w,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(ct(_w,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EO extends fS{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=RD(this.serializer,t),r=function(l){if(!("targetChange"in l))return St.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?St.min():c.readTime?wi(c.readTime):St.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=rp(this.serializer),n.addTarget=function(l,c){let d;const m=c.target;if(d=Wg(m)?{documents:DD(l,m)}:{query:OD(l,m).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=tS(l,c.resumeToken);const g=ep(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(St.min())>0){d.readTime=Wh(l,c.snapshotVersion.toTimestamp());const g=ep(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,t);const r=xD(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=rp(this.serializer),n.removeTarget=t,this.Q_(n)}}class wO extends fS{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=CD(t.writeResults,t.commitTime),r=wi(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=rp(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ID(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{}class bO extends TO{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,np(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ht(nt.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,np(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ht(nt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class SO{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(lr(n),this.ua=!1):ct("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="RemoteStore";class AO{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{pa(this)&&(ct(aa,"Restarting streams for network reachability change."),await async function(m){const g=At(m);g.da.add(4),await Pu(g),g.Va.set("Unknown"),g.da.delete(4),await jf(g)}(this))})}),this.Va=new SO(r,a)}}async function jf(e){if(pa(e))for(const t of e.Aa)await t(!0)}async function Pu(e){for(const t of e.Aa)await t(!1)}function dS(e,t){const n=At(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),uy(n)?ly(n):Bo(n).N_()&&oy(n,t))}function ay(e,t){const n=At(e),r=Bo(n);n.Ea.delete(t),r.N_()&&mS(n,t),n.Ea.size===0&&(r.N_()?r.k_():pa(n)&&n.Va.set("Unknown"))}function oy(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bo(e).Z_(t)}function mS(e,t){e.ma.Ke(t),Bo(e).X_(t)}function ly(e){e.ma=new vD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Bo(e).start(),e.Va.ca()}function uy(e){return pa(e)&&!Bo(e).O_()&&e.Ea.size>0}function pa(e){return At(e).da.size===0}function gS(e){e.ma=void 0}async function RO(e){e.Va.set("Online")}async function IO(e){e.Ea.forEach((t,n)=>{oy(e,t)})}async function CO(e,t){gS(e),uy(e)?(e.Va.Pa(t),ly(e)):e.Va.set("Unknown")}async function DO(e,t,n){if(e.Va.set("Online"),t instanceof Jb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){ct(aa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await tf(e,r)}else if(t instanceof kh?e.ma.Xe(t):t instanceof Wb?e.ma.ot(t):e.ma.nt(t),!n.isEqual(St.min()))try{const r=await cS(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ea.get(g);y&&l.Ea.set(g,y.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const y=l.Ea.get(m);if(!y)return;l.Ea.set(m,y.withResumeToken(Fe.EMPTY_BYTE_STRING,y.snapshotVersion)),mS(l,m);const v=new Qr(y.target,m,g,y.sequenceNumber);oy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){ct(aa,"Failed to raise snapshot:",r),await tf(e,r)}}async function tf(e,t,n){if(!zo(t))throw t;e.da.add(1),await Pu(e),e.Va.set("Offline"),n||(n=()=>cS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ct(aa,"Retrying IndexedDB access"),await n(),e.da.delete(1),await jf(e)})}function pS(e,t){return t().catch(n=>tf(e,n,t))}async function Hf(e){const t=At(e),n=os(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Kp;for(;OO(t);)try{const a=await hO(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,NO(t,a)}catch(a){await tf(t,a)}yS(t)&&_S(t)}function OO(e){return pa(e)&&e.Ia.length<10}function NO(e,t){e.Ia.push(t);const n=os(e);n.N_()&&n.ea&&n.ta(t.mutations)}function yS(e){return pa(e)&&!os(e).O_()&&e.Ia.length>0}function _S(e){os(e).start()}async function xO(e){os(e).ia()}async function kO(e){const t=os(e);for(const n of e.Ia)t.ta(n.mutations)}async function MO(e,t,n){const r=e.Ia.shift(),a=Jp.from(r,t,n);await pS(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Hf(e)}async function VO(e,t){t&&os(e).ea&&await async function(r,a){if(function(c){return yD(c)&&c!==nt.ABORTED}(a.code)){const l=r.Ia.shift();os(r).L_(),await pS(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Hf(r)}}(e,t),yS(e)&&_S(e)}async function vw(e,t){const n=At(e);n.asyncQueue.verifyOperationInProgress(),ct(aa,"RemoteStore received new credentials");const r=pa(n);n.da.add(3),await Pu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await jf(n)}async function PO(e,t){const n=At(e);t?(n.da.delete(2),await jf(n)):t||(n.da.add(2),await Pu(n),n.Va.set("Unknown"))}function Bo(e){return e.fa||(e.fa=function(n,r,a){const l=At(n);return l.oa(),new EO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:RO.bind(null,e),n_:IO.bind(null,e),i_:CO.bind(null,e),Y_:DO.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),uy(e)?ly(e):e.Va.set("Unknown")):(await e.fa.stop(),gS(e))})),e.fa}function os(e){return e.ga||(e.ga=function(n,r,a){const l=At(n);return l.oa(),new wO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:xO.bind(null,e),i_:VO.bind(null,e),na:kO.bind(null,e),ra:MO.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Hf(e)):(await e.ga.stop(),e.Ia.length>0&&(ct(aa,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new cy(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(e,t){if(lr("AsyncQueue",`${t}: ${e}`),zo(e))return new ht(nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(t){return new vo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||pt.comparator(n.key,r.key):(n,r)=>pt.comparator(n.key,r.key),this.keyedMap=iu(),this.sortedSet=new ae(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof vo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new vo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.pa=new ae(pt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Et(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class Do{constructor(t,n,r,a,l,c,d,m,g){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new Do(t,n,vo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class LO{constructor(){this.queries=ww(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=At(n),l=a.queries;a.queries=ww(),l.forEach((c,d)=>{for(const m of d.Sa)m.onError(r)})})(this,new ht(nt.ABORTED,"Firestore shutting down"))}}function ww(){return new ga(e=>zb(e),Mf)}async function vS(e,t){const n=At(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new UO,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=hy(c,`Initialization of query '${mo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&fy(n)}async function ES(e,t){const n=At(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zO(e,t){const n=At(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&fy(n)}function BO(e,t,n){const r=At(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function fy(e){e.Ca.forEach(t=>{t.next()})}var op,Tw;(Tw=op||(op={})).xa="default",Tw.Cache="cache";class wS{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new Do(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=Do.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(t){this.key=t}}class bS{constructor(t){this.key=t}}class jO{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Vt(),this.mutatedKeys=Vt(),this.Za=Bb(t),this.Xa=new vo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new Ew,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const E=a.get(y),b=Vf(this.query,v)?v:null,I=!!E&&this.mutatedKeys.has(E.key),M=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let N=!1;E&&b?E.data.isEqual(b.data)?I!==M&&(r.track({type:3,doc:b}),N=!0):this.ru(E,b)||(r.track({type:2,doc:b}),N=!0,(m&&this.Za(b,m)>0||g&&this.Za(b,g)<0)&&(d=!0)):!E&&b?(r.track({type:0,doc:b}),N=!0):E&&!b&&(r.track({type:1,doc:E}),N=!0,(m||g)&&(d=!0)),N&&(b?(c=c.add(b),l=M?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(b,I){const M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Vt:N})}};return M(b)-M(I)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Ja;return this.Ja=m,c.length!==0||g?{snapshot:new Do(this.query,t.Xa,l,c,t.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Ew,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Vt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new bS(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new TS(r))}),n}au(t){this.Ha=t.$s,this.Ya=Vt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return Do.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const dy="SyncEngine";class HO{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class qO{constructor(t){this.key=t,this.cu=!1}}class FO{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new ga(d=>zb(d),Mf),this.Pu=new Map,this.Tu=new Set,this.Iu=new ae(pt.comparator),this.Eu=new Map,this.du=new ny,this.Au={},this.Ru=new Map,this.Vu=Co.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function GO(e,t,n=!0){const r=DS(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await SS(r,t,n,!0),a}async function KO(e,t){const n=DS(e);await SS(n,t,!0,!1)}async function SS(e,t,n,r){const a=await fO(e.localStore,Ei(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await $O(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&dS(e.remoteStore,a),d}async function $O(e,t,n,r,a){e.fu=(v,E,b)=>async function(M,N,Y,F){let G=N.view.tu(Y);G.Cs&&(G=await mw(M.localStore,N.query,!1).then(({documents:D})=>N.view.tu(D,G)));const q=F&&F.targetChanges.get(N.targetId),X=F&&F.targetMismatches.get(N.targetId)!=null,tt=N.view.applyChanges(G,M.isPrimaryClient,q,X);return Sw(M,N.targetId,tt.ou),tt.snapshot}(e,v,E,b);const l=await mw(e.localStore,t,!0),c=new jO(t,l.$s),d=c.tu(l.documents),m=Vu.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),g=c.applyChanges(d,e.isPrimaryClient,m);Sw(e,n,g.ou);const y=new HO(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),g.snapshot}async function YO(e,t,n){const r=At(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!Mf(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await sp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&ay(r.remoteStore,a.targetId),lp(r,a.targetId)}).catch(Lo)):(lp(r,a.targetId),await sp(r.localStore,a.targetId,!0))}async function XO(e,t){const n=At(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ay(n.remoteStore,r.targetId))}async function QO(e,t,n){const r=iN(e);try{const a=await function(c,d){const m=At(c),g=me.now(),y=d.reduce((b,I)=>b.add(I.key),Vt());let v,E;return m.persistence.runTransaction("Locally write mutations","readwrite",b=>{let I=ur(),M=Vt();return m.Bs.getEntries(b,y).next(N=>{I=N,I.forEach((Y,F)=>{F.isValidDocument()||(M=M.add(Y))})}).next(()=>m.localDocuments.getOverlayedDocuments(b,I)).next(N=>{v=N;const Y=[];for(const F of d){const G=fD(F,v.get(F.key).overlayedDocument);G!=null&&Y.push(new cs(F.key,G,Nb(G.value.mapValue),Tn.exists(!0)))}return m.mutationQueue.addMutationBatch(b,g,Y,d)}).next(N=>{E=N;const Y=N.applyToLocalDocumentSet(v,M);return m.documentOverlayCache.saveOverlays(b,N.batchId,Y)})}).then(()=>({batchId:E.batchId,changes:Hb(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let g=c.Au[c.currentUser.toKey()];g||(g=new ae(Dt)),g=g.insert(d,m),c.Au[c.currentUser.toKey()]=g}(r,a.batchId,n),await Uu(r,a.changes),await Hf(r.remoteStore)}catch(a){const l=hy(a,"Failed to persist write");n.reject(l)}}async function AS(e,t){const n=At(e);try{const r=await uO(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(qt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?qt(c.cu,14607):a.removedDocuments.size>0&&(qt(c.cu,42227),c.cu=!1))}),await Uu(n,r,t)}catch(r){await Lo(r)}}function bw(e,t,n){const r=At(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=At(c);m.onlineState=d;let g=!1;m.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(d)&&(g=!0)}),g&&fy(m)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZO(e,t,n){const r=At(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new ae(pt.comparator);c=c.insert(l,Ze.newNoDocument(l,St.min()));const d=Vt().add(l),m=new zf(St.min(),new Map,new ae(Dt),c,d);await AS(r,m),r.Iu=r.Iu.remove(l),r.Eu.delete(t),my(r)}else await sp(r.localStore,t,!1).then(()=>lp(r,t,n)).catch(Lo)}async function WO(e,t){const n=At(e),r=t.batch.batchId;try{const a=await lO(n.localStore,t);IS(n,r,null),RS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uu(n,a)}catch(a){await Lo(a)}}async function JO(e,t,n){const r=At(e);try{const a=await function(c,d){const m=At(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return m.mutationQueue.lookupMutationBatch(g,d).next(v=>(qt(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(g,v))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>m.localDocuments.getDocuments(g,y))})}(r.localStore,t);IS(r,t,n),RS(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uu(r,a)}catch(a){await Lo(a)}}function RS(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function IS(e,t,n){const r=At(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function lp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||CS(e,r)})}function CS(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(ay(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),my(e))}function Sw(e,t,n){for(const r of n)r instanceof TS?(e.du.addReference(r.key,t),tN(e,r)):r instanceof bS?(ct(dy,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||CS(e,r.key)):Et(19791,{pu:r})}function tN(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(ct(dy,"New document in limbo: "+n),e.Tu.add(r),my(e))}function my(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new pt(ee.fromString(t)),r=e.Vu.next();e.Eu.set(r,new qO(n)),e.Iu=e.Iu.insert(n,r),dS(e.remoteStore,new Qr(Ei(Zp(n.path)),r,"TargetPurposeLimboResolution",Nf.le))}}async function Uu(e,t,n){const r=At(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,m)=>{c.push(r.fu(m,t,n).then(g=>{var y;if((g||n)&&r.isPrimaryClient){const v=g?!g.fromCache:(y=n==null?void 0:n.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=ry.Rs(m.targetId,g);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(m,g){const y=At(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>it.forEach(g,E=>it.forEach(E.ds,b=>y.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>it.forEach(E.As,b=>y.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!zo(v))throw v;ct(sy,"Failed to update sequence numbers: "+v)}for(const v of g){const E=v.targetId;if(!v.fromCache){const b=y.xs.get(E),I=b.snapshotVersion,M=b.withLastLimboFreeSnapshotVersion(I);y.xs=y.xs.insert(E,M)}}}(r.localStore,l))}async function eN(e,t){const n=At(e);if(!n.currentUser.isEqual(t)){ct(dy,"User change. New user:",t.toKey());const r=await uS(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(m=>{m.reject(new ht(nt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Uu(n,r.ks)}}function nN(e,t){const n=At(e),r=n.Eu.get(t);if(r&&r.cu)return Vt().add(r.key);{let a=Vt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function DS(e){const t=At(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=AS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZO.bind(null,t),t.lu.Y_=zO.bind(null,t.eventManager),t.lu.gu=BO.bind(null,t.eventManager),t}function iN(e){const t=At(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=JO.bind(null,t),t}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Bf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return oO(this.persistence,new rO,t.initialUser,this.serializer)}Su(t){return new lS(iy.fi,this.serializer)}bu(t){return new mO}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class rN extends ef{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){qt(this.persistence.referenceDelegate instanceof Jh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qD(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new lS(r=>Jh.fi(r,n),this.serializer)}}class up{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eN.bind(null,this.syncEngine),await PO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new LO}()}createDatastore(t){const n=Bf(t.databaseInfo.databaseId),r=function(l){return new vO(l)}(t.databaseInfo);return function(l,c,d,m){return new bO(l,c,d,m)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new AO(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>bw(this.syncEngine,n,0),function(){return yw.C()?new yw:new gO}())}createSyncEngine(t,n){return function(a,l,c,d,m,g,y){const v=new FO(a,l,c,d,m,g);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=At(a);ct(aa,"RemoteStore shutting down."),l.da.add(5),await Pu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):lr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class sN{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Xe.UNAUTHENTICATED,this.clientId=wb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{ct(ls,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ct(ls,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hy(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ag(e,t){e.asyncQueue.verifyOperationInProgress(),ct(ls,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await uS(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Aw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aN(e);ct(ls,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>vw(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>vw(t.remoteStore,a)),e._onlineComponents=t}async function aN(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ct(ls,"Using user provided OfflineComponentProvider");try{await Ag(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===nt.FAILED_PRECONDITION||a.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await Ag(e,new ef)}}else ct(ls,"Using default OfflineComponentProvider"),await Ag(e,new rN(void 0));return e._offlineComponents}async function NS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ct(ls,"Using user provided OnlineComponentProvider"),await Aw(e,e._uninitializedComponentsProvider._online)):(ct(ls,"Using default OnlineComponentProvider"),await Aw(e,new up))),e._onlineComponents}function oN(e){return NS(e).then(t=>t.syncEngine)}async function xS(e){const t=await NS(e),n=t.eventManager;return n.onListen=GO.bind(null,t.syncEngine),n.onUnlisten=YO.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=KO.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=XO.bind(null,t.syncEngine),n}function lN(e,t,n={}){const r=new sr;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const y=new OS({next:E=>{y.xu(),c.enqueueAndForget(()=>ES(l,v));const b=E.docs.has(d);!b&&E.fromCache?g.reject(new ht(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&m&&m.source==="server"?g.reject(new ht(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(E)},error:E=>g.reject(E)}),v=new wS(Zp(d.path),y,{includeMetadataChanges:!0,Qa:!0});return vS(l,v)}(await xS(e),e.asyncQueue,t,n,r)),r.promise}function uN(e,t,n={}){const r=new sr;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const y=new OS({next:E=>{y.xu(),c.enqueueAndForget(()=>ES(l,v)),E.fromCache&&m.source==="server"?g.reject(new ht(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(E)},error:E=>g.reject(E)}),v=new wS(d,y,{includeMetadataChanges:!0,Qa:!0});return vS(l,v)}(await xS(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(e,t,n){if(!n)throw new ht(nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function cN(e,t,n,r){if(t===!0&&r===!0)throw new ht(nt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Iw(e){if(!pt.isDocumentKey(e))throw new ht(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Cw(e){if(pt.isDocumentKey(e))throw new ht(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qf(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Et(12329,{type:typeof e})}function cr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ht(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qf(e);throw new ht(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firestore.googleapis.com",Dw=!0;class Ow{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VS,this.ssl=Dw}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Dw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=oS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jD)throw new ht(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}cN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kS((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ff{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _2;switch(r.type){case"firstParty":return new T2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ht(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rw.get(n);r&&(ct("ComponentProvider","Removing Datastore"),Rw.delete(n),r.terminate())}(this),Promise.resolve()}}function hN(e,t,n,r={}){var a;e=cr(e,Ff);const l=ma(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),m=`${t}:${n}`;l&&(Bp(`https://${m}`),jp("Firestore",!0)),c.host!==VS&&c.host!==m&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:r});if(!ia(g,d)&&(e._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=Xe.MOCK_USER;else{y=GI(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ht(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Xe(E)}e._authCredentials=new v2(new vb(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new jo(this.firestore,t,this._query)}}class hn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hn(this.firestore,t,this._key)}}class ts extends jo{constructor(t,n,r){super(t,n,Zp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hn(this.firestore,null,new pt(t))}withConverter(t){return new ts(this.firestore,t,this._path)}}function nr(e,t,...n){if(e=Ie(e),MS("collection","path",t),e instanceof Ff){const r=ee.fromString(t,...n);return Cw(r),new ts(e,null,r)}{if(!(e instanceof hn||e instanceof ts))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ee.fromString(t,...n));return Cw(r),new ts(e.firestore,null,r)}}function Gr(e,t,...n){if(e=Ie(e),arguments.length===1&&(t=wb.newId()),MS("doc","path",t),e instanceof Ff){const r=ee.fromString(t,...n);return Iw(r),new hn(e,null,new pt(r))}{if(!(e instanceof hn||e instanceof ts))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ee.fromString(t,...n));return Iw(r),new hn(e.firestore,e instanceof ts?e.converter:null,new pt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="AsyncQueue";class xw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new hS(this,"async_queue_retry"),this.rc=()=>{const r=Sg();r&&ct(Nw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new sr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!zo(t))throw t;ct(Nw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,lr("INTERNAL UNHANDLED ERROR: ",kw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=cy.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Et(47125,{cc:kw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function kw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ho extends Ff{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new xw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new xw(t),this._firestoreClient=void 0,await t}}}function PS(e,t){const n=Fp(),r=Kh,a=Of(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=rb("firestore");l&&hN(a,...l)}return a}function Gf(e){if(e._terminated)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fN(e),e._firestoreClient}function fN(e){var t,n,r;const a=e._freezeSettings(),l=function(d,m,g,y){return new U2(d,m,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,kS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new sN(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Oo(Fe.fromBase64String(t))}catch(n){throw new ht(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Oo(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ht(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ht(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ht(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Dt(this._lat,t._lat)||Dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=/^__.*__$/;class mN{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new cs(t,this.data,this.fieldMask,n,this.fieldTransforms):new Mu(t,this.data,n,this.fieldTransforms)}}class US{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new cs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function LS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ic:e})}}class _y{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new _y(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return nf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(LS(this.Ic)&&dN.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class gN{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Bf(t)}bc(t,n,r,a=!1){return new _y({Ic:t,methodName:n,wc:r,path:qe.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vy(e){const t=e._freezeSettings(),n=Bf(e._databaseId);return new gN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zS(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);Ey("Data must be an object, but it was:",c,r);const d=BS(r,c);let m,g;if(l.merge)m=new wn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=cp(t,v,n);if(!c.contains(E))throw new ht(nt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);HS(y,E)||y.push(E)}m=new wn(y),g=c.fieldTransforms.filter(v=>m.covers(v.field))}else m=null,g=c.fieldTransforms;return new mN(new ln(d),m,g)}class $f extends gy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $f}}function pN(e,t,n,r){const a=e.bc(1,t,n);Ey("Data must be an object, but it was:",a,r);const l=[],c=ln.empty();us(r,(m,g)=>{const y=wy(t,m,n);g=Ie(g);const v=a.mc(y);if(g instanceof $f)l.push(y);else{const E=Lu(g,v);E!=null&&(l.push(y),c.set(y,E))}});const d=new wn(l);return new US(c,d,a.fieldTransforms)}function yN(e,t,n,r,a,l){const c=e.bc(1,t,n),d=[cp(t,r,n)],m=[a];if(l.length%2!=0)throw new ht(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(cp(t,l[E])),m.push(l[E+1]);const g=[],y=ln.empty();for(let E=d.length-1;E>=0;--E)if(!HS(g,d[E])){const b=d[E];let I=m[E];I=Ie(I);const M=c.mc(b);if(I instanceof $f)g.push(b);else{const N=Lu(I,M);N!=null&&(g.push(b),y.set(b,N))}}const v=new wn(g);return new US(y,v,c.fieldTransforms)}function _N(e,t,n,r=!1){return Lu(n,e.bc(r?4:3,t))}function Lu(e,t){if(jS(e=Ie(e)))return Ey("Unsupported field value:",t,e),BS(e,t);if(e instanceof gy)return function(r,a){if(!LS(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Lu(d,a.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=me.fromDate(r);return{timestampValue:Wh(a.serializer,l)}}if(r instanceof me){const l=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wh(a.serializer,l)}}if(r instanceof py)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oo)return{bytesValue:tS(a.serializer,r._byteString)};if(r instanceof hn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ey(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof yy)return function(c,d){return{mapValue:{fields:{[Db]:{stringValue:Ob},[$h]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.gc("VectorValues must only contain numeric values.");return Wp(d.serializer,g)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${qf(r)}`)}(e,t)}function BS(e,t){const n={};return bb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):us(e,(r,a)=>{const l=Lu(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function jS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof me||e instanceof py||e instanceof Oo||e instanceof hn||e instanceof gy||e instanceof yy)}function Ey(e,t,n){if(!jS(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=qf(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function cp(e,t,n){if((t=Ie(t))instanceof Kf)return t._internalPath;if(typeof t=="string")return wy(e,t);throw nf("Field path arguments must be of type string or ",e,!1,void 0,n)}const vN=new RegExp("[~\\*/\\[\\]]");function wy(e,t,n){if(t.search(vN)>=0)throw nf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Kf(...t.split("."))._internalPath}catch{throw nf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function nf(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ht(nt.INVALID_ARGUMENT,d+e+m)}function HS(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new EN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ty("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EN extends qS{data(){return super.data()}}function Ty(e,t){return typeof t=="string"?wy(e,t):t instanceof Kf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ht(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class TN extends by{}function bN(e,t,...n){let r=[];t instanceof by&&r.push(t),r=r.concat(n),function(l){const c=l.filter(m=>m instanceof Sy).length,d=l.filter(m=>m instanceof Yf).length;if(c>1||c>0&&d>0)throw new ht(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class Yf extends TN{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Yf(t,n,r)}_apply(t){const n=this._parse(t);return FS(t._query,n),new jo(t.firestore,t.converter,Jg(t._query,n))}_parse(t){const n=vy(t.firestore);return function(l,c,d,m,g,y,v){let E;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Vw(v,y);const I=[];for(const M of v)I.push(Mw(m,l,M));E={arrayValue:{values:I}}}else E=Mw(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Vw(v,y),E=_N(d,c,v,y==="in"||y==="not-in");return Ee.create(g,y,E)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function SN(e,t,n){const r=t,a=Ty("where",e);return Yf._create(a,r,n)}class Sy extends by{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Sy(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)FS(c,m),c=Jg(c,m)}(t._query,n),new jo(t.firestore,t.converter,Jg(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Mw(e,t,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new ht(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lb(t)&&n.indexOf("/")!==-1)throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ee.fromString(n));if(!pt.isDocumentKey(r))throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return XE(e,new pt(r))}if(n instanceof hn)return XE(e,n._key);throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(n)}.`)}function Vw(e,t){if(!Array.isArray(e)||e.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FS(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(t,n="none"){switch(as(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ss(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return us(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[$h].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>de(c.doubleValue));return new yy(l)}convertGeoPoint(t){return new py(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=kf(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eu(t));default:return null}}convertTimestamp(t){const n=rs(t);return new me(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ee.fromString(t);qt(aS(r),9688,{name:t});const a=new wu(r.get(1),r.get(3)),l=new pt(r.popFirst(5));return a.isEqual(n)||lr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class KS extends qS{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ty("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Mh extends KS{data(t={}){return super.data(t)}}class RN{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new su(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Mh(this._firestore,this._userDataWriter,r.key,r,new su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ht(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Mh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new su(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Mh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new su(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:IN(d.type),doc:m,oldIndex:g,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(e){e=cr(e,hn);const t=cr(e.firestore,Ho);return lN(Gf(t),e._key).then(n=>DN(t,e,n))}class $S extends AN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oo(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function ea(e){e=cr(e,jo);const t=cr(e.firestore,Ho),n=Gf(t),r=new $S(t);return wN(e._query),uN(n,e._query).then(a=>new RN(t,r,e,a))}function hp(e,t,n){e=cr(e,hn);const r=cr(e.firestore,Ho),a=GS(e.converter,t,n);return Ay(r,[zS(vy(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Tn.none())])}function CN(e){return Ay(cr(e.firestore,Ho),[new Lf(e._key,Tn.none())])}function Ay(e,t){return function(r,a){const l=new sr;return r.asyncQueue.enqueueAndForget(async()=>QO(await oN(r),a,l)),l.promise}(Gf(e),t)}function DN(e,t,n){const r=n.docs.get(t._key),a=new $S(e);return new KS(e,a,t._key,r,new su(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vy(t)}set(t,n,r){this._verifyNotCommitted();const a=Rg(t,this._firestore),l=GS(a.converter,n,r),c=zS(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Tn.none())),this}update(t,n,r,...a){this._verifyNotCommitted();const l=Rg(t,this._firestore);let c;return c=typeof(n=Ie(n))=="string"||n instanceof Kf?yN(this._dataReader,"WriteBatch.update",l._key,n,r,a):pN(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Tn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Rg(t,this._firestore);return this._mutations=this._mutations.concat(new Lf(n._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ht(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rg(e,t){if((e=Ie(e)).firestore!==t)throw new ht(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(e){return Gf(e=cr(e,Ho)),new ON(e,t=>Ay(e,t))}(function(t,n=!0){(function(a){Uo=a})(Po),ra(new ns("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ho(new E2(r.getProvider("auth-internal")),new b2(c,r.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ht(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(g.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),vi(UE,LE,t),vi(UE,LE,"esm2017")})();var xN="firebase",kN="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(xN,kN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="type.googleapis.com/google.protobuf.Int64Value",VN="type.googleapis.com/google.protobuf.UInt64Value";function YS(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function rf(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>rf(t));if(typeof e=="function"||typeof e=="object")return YS(e,t=>rf(t));throw new Error("Data cannot be encoded in JSON: "+e)}function No(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case MN:case VN:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>No(t)):typeof e=="function"||typeof e=="object"?YS(e,t=>No(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class un extends Ri{constructor(t,n,r){super(`${Ry}/${t}`,n||""),this.details=r,Object.setPrototypeOf(this,un.prototype)}}function PN(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function sf(e,t){let n=PN(e),r=n,a;try{const l=t&&t.error;if(l){const c=l.status;if(typeof c=="string"){if(!Uw[c])return new un("internal","internal");n=Uw[c],r=c}const d=l.message;typeof d=="string"&&(r=d),a=l.details,a!==void 0&&(a=No(a))}}catch{}return n==="ok"?null:new un(n,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(t,n,r,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,zn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||r.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a==null||a.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(t){const n=await this.getAuthToken(),r=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:n,messagingToken:r,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="us-central1",LN=/^data: (.*?)(?:\n|$)/;function zN(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new un("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class BN{constructor(t,n,r,a,l=fp,c=(...d)=>fetch(...d)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new UN(t,n,r,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=fp}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(t){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}}function jN(e,t,n){const r=ma(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&(Bp(e.emulatorOrigin),jp("Functions",!0))}function HN(e,t,n){const r=a=>FN(e,t,a,{});return r.stream=(a,l)=>KN(e,t,a,l),r}async function qN(e,t,n,r){n["Content-Type"]="application/json";let a;try{a=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function XS(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function FN(e,t,n,r){const a=e._url(t);return GN(e,a,n,r)}async function GN(e,t,n,r){n=rf(n);const a={data:n},l=await XS(e,r),c=r.timeout||7e4,d=zN(c),m=await Promise.race([qN(t,a,l,e.fetchImpl),d.promise,e.cancelAllRequests]);if(d.cancel(),!m)throw new un("cancelled","Firebase Functions instance was deleted.");const g=sf(m.status,m.json);if(g)throw g;if(!m.json)throw new un("internal","Response is not valid JSON object.");let y=m.json.data;if(typeof y>"u"&&(y=m.json.result),typeof y>"u")throw new un("internal","Response is missing data field.");return{data:No(y)}}function KN(e,t,n,r){const a=e._url(t);return $N(e,a,n,r||{})}async function $N(e,t,n,r){var a;n=rf(n);const l={data:n},c=await XS(e,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(l),headers:c,signal:r==null?void 0:r.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const M=new un("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const I=sf(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let m,g;const y=new Promise((b,I)=>{m=b,g=I});(a=r==null?void 0:r.signal)===null||a===void 0||a.addEventListener("abort",()=>{const b=new un("cancelled","Request was cancelled.");g(b)});const v=d.body.getReader(),E=YN(v,m,g,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const b=E.getReader();return{async next(){const{value:I,done:M}=await b.read();return{value:I,done:M}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:y}}function YN(e,t,n,r){const a=(c,d)=>{const m=c.match(LN);if(!m)return;const g=m[1];try{const y=JSON.parse(g);if("result"in y){t(No(y.result));return}if("message"in y){d.enqueue(No(y.message));return}if("error"in y){const v=sf(0,y);d.error(v),n(v);return}}catch(y){if(y instanceof un){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return m();async function m(){if(r!=null&&r.aborted){const g=new un("cancelled","Request was cancelled");return c.error(g),n(g),Promise.resolve()}try{const{value:g,done:y}=await e.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(r!=null&&r.aborted){const E=new un("cancelled","Request was cancelled");c.error(E),n(E),await e.cancel();return}d+=l.decode(g,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const E of v)E.trim()&&a(E.trim(),c);return m()}catch(g){const y=g instanceof un?g:sf(0,null);c.error(y),n(y)}}},cancel(){return e.cancel()}})}const Lw="@firebase/functions",zw="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="auth-internal",QN="app-check-internal",ZN="messaging-internal";function WN(e){const t=(n,{instanceIdentifier:r})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(XN),c=n.getProvider(ZN),d=n.getProvider(QN);return new BN(a,l,c,d,r)};ra(new ns(Ry,t,"PUBLIC").setMultipleInstances(!0)),vi(Lw,zw,e),vi(Lw,zw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(e=Fp(),t=fp){const r=Of(Ie(e),Ry).getImmediate({identifier:t}),a=rb("functions");return a&&tx(r,...a),r}function tx(e,t,n){jN(Ie(e),t,n)}function ex(e,t,n){return HN(Ie(e),t)}WN();function Iy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function QS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nx=QS,ZS=new Nu("auth","Firebase",QS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Hp("@firebase/auth");function ix(e,...t){af.logLevel<=Mt.WARN&&af.warn(`Auth (${Po}): ${e}`,...t)}function Vh(e,...t){af.logLevel<=Mt.ERROR&&af.error(`Auth (${Po}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(e,...t){throw Cy(e,...t)}function Ti(e,...t){return Cy(e,...t)}function WS(e,t,n){const r=Object.assign(Object.assign({},nx()),{[t]:n});return new Nu("auth","Firebase",r).create(t,{appName:e.name})}function es(e){return WS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ZS.create(e,...t)}function Tt(e,t,...n){if(!e)throw Cy(t,...n)}function ir(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Vh(t),new Error(t)}function fr(e,t){e||ir(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function rx(){return Bw()==="http:"||Bw()==="https:"}function Bw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rx()||ZI()||"connection"in navigator)?navigator.onLine:!0}function ax(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n){this.shortDelay=t,this.longDelay=n,fr(n>t,"Short delay should be less than long delay!"),this.isMobile=YI()||WI()}get(){return sx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(e,t){fr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ux=new zu(3e4,6e4);function Xf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qo(e,t,n,r,a={}){return tA(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=xu(Object.assign({key:e.config.apiKey},c)).slice(1),m=await e._getAdditionalHeaders();m["Content-Type"]="application/json",e.languageCode&&(m["X-Firebase-Locale"]=e.languageCode);const g=Object.assign({method:t,headers:m},l);return QI()||(g.referrerPolicy="no-referrer"),e.emulatorConfig&&ma(e.emulatorConfig.host)&&(g.credentials="include"),JS.fetch()(await nA(e,e.config.apiHost,n,d),g)})}async function tA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ox),t);try{const a=new cx(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Eh(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(e,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Eh(e,"email-already-in-use",c);if(m==="USER_DISABLED")throw Eh(e,"user-disabled",c);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw WS(e,y,g);hr(e,y)}}catch(a){if(a instanceof Ri)throw a;hr(e,"network-request-failed",{message:String(a)})}}async function eA(e,t,n,r,a={}){const l=await qo(e,t,n,r,a);return"mfaPendingCredential"in l&&hr(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function nA(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?Dy(e.config,a):`${e.config.apiScheme}://${a}`;return lx.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class cx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ti(this.auth,"network-request-failed")),ux.get())})}}function Eh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Ti(e,t,r);return a.customData._tokenResponse=n,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(e,t){return qo(e,"POST","/v1/accounts:delete",t)}async function of(e,t){return qo(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fx(e,t=!1){const n=Ie(e),r=await n.getIdToken(t),a=Oy(r);Tt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:pu(Ig(a.auth_time)),issuedAtTime:pu(Ig(a.iat)),expirationTime:pu(Ig(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ig(e){return Number(e)*1e3}function Oy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const a=nb(n);return a?JSON.parse(a):(Vh("Failed to decode base64 JWT payload"),null)}catch(a){return Vh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function jw(e){const t=Oy(e);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Ri&&dx(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function dx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await Au(e,of(n,{idToken:r}));Tt(a==null?void 0:a.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?iA(l.providerUserInfo):[],d=px(e.providerData,c),m=e.isAnonymous,g=!(e.email&&l.passwordHash)&&!(d!=null&&d.length),y=m?g:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new mp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function gx(e){const t=Ie(e);await lf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function px(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function iA(e){return e.map(t=>{var{providerId:n}=t,r=Iy(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(e,t){const n=await tA(e,{},async()=>{const r=xu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await nA(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return e.emulatorConfig&&ma(e.emulatorConfig.host)&&(m.credentials="include"),JS.fetch()(c,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _x(e,t){return qo(e,"POST","/v2/accounts:revokeToken",Xf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):jw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const n=jw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await yx(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Eo;return r&&(Tt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Tt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Tt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(e,t){Tt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Xn{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=Iy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new mp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Au(this,this.stsTokenManager.getToken(this.auth,t));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return fx(this,t)}reload(){return gx(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Xn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(es(this.auth));const t=await this.getIdToken();return await Au(this,hx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,m,g,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,b=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,I=(c=n.photoURL)!==null&&c!==void 0?c:void 0,M=(d=n.tenantId)!==null&&d!==void 0?d:void 0,N=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:q,isAnonymous:X,providerData:tt,stsTokenManager:D}=n;Tt(G&&D,t,"internal-error");const R=Eo.fromJSON(this.name,D);Tt(typeof G=="string",t,"internal-error"),Fr(v,t.name),Fr(E,t.name),Tt(typeof q=="boolean",t,"internal-error"),Tt(typeof X=="boolean",t,"internal-error"),Fr(b,t.name),Fr(I,t.name),Fr(M,t.name),Fr(N,t.name),Fr(Y,t.name),Fr(F,t.name);const C=new Xn({uid:G,auth:t,email:E,emailVerified:q,displayName:v,isAnonymous:X,photoURL:I,phoneNumber:b,tenantId:M,stsTokenManager:R,createdAt:Y,lastLoginAt:F});return tt&&Array.isArray(tt)&&(C.providerData=tt.map(V=>Object.assign({},V))),N&&(C._redirectEventId=N),C}static async _fromIdTokenResponse(t,n,r=!1){const a=new Eo;a.updateFromServerResponse(n);const l=new Xn({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await lf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Tt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?iA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Eo;d.updateFromIdToken(r);const m=new Xn({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new mp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new Map;function rr(e){fr(e instanceof Function,"Expected a class definition");let t=Hw.get(e);return t?(fr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}rA.type="NONE";const qw=rA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(e,t,n){return`firebase:${e}:${t}:${n}`}class wo{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Ph(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ph("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await of(this.auth,{idToken:t}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,t):null}return Xn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new wo(rr(qw),t,r);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||rr(qw);const c=Ph(r,t.config.apiKey,t.name);let d=null;for(const g of n)try{const y=await g._get(c);if(y){let v;if(typeof y=="string"){const E=await of(t,{idToken:y}).catch(()=>{});if(!E)break;v=await Xn._fromGetAccountInfoResponse(t,E,y)}else v=Xn._fromJSON(t,y);g!==l&&(d=v),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new wo(l,t,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new wo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(sA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cA(t))return"Blackberry";if(hA(t))return"Webos";if(aA(t))return"Safari";if((t.includes("chrome/")||oA(t))&&!t.includes("edge/"))return"Chrome";if(uA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sA(e=We()){return/firefox\//i.test(e)}function aA(e=We()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function oA(e=We()){return/crios\//i.test(e)}function lA(e=We()){return/iemobile/i.test(e)}function uA(e=We()){return/android/i.test(e)}function cA(e=We()){return/blackberry/i.test(e)}function hA(e=We()){return/webos/i.test(e)}function Ny(e=We()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vx(e=We()){var t;return Ny(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Ex(){return JI()&&document.documentMode===10}function fA(e=We()){return Ny(e)||uA(e)||hA(e)||cA(e)||/windows phone/i.test(e)||lA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(e,t=[]){let n;switch(e){case"Browser":n=Fw(We());break;case"Worker":n=`${Fw(We())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const m=t(l);c(m)}catch(m){d(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tx(e,t={}){return qo(e,"GET","/v2/passwordPolicy",Xf(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=6;class Sx{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:bx,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gw(this),this.idTokenSubscription=new Gw(this),this.beforeStateQueue=new wx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await wo.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await of(this,{idToken:t}),r=await Xn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(zn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await lf(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ax()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject(es(this));const n=t?Ie(t):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Tx(this),n=new Sx(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Nu("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _x(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&rr(t)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const m=t.addObserver(n,r,a);return()=>{c=!0,m()}}else{const m=t.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&ix(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qf(e){return Ie(e)}class Gw{constructor(t){this.auth=t,this.observer=null,this.addObserver=oC(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rx(e){xy=e}function Ix(e){return xy.loadJS(e)}function Cx(){return xy.gapiScript}function Dx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e,t){const n=Of(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(ia(l,t??{}))return a;hr(a,"already-initialized")}return n.initialize({options:t})}function Nx(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function xx(e,t,n){const r=Qf(e);Tt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=mA(t),{host:c,port:d}=kx(t),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Tt(ia(g,r.config.emulator)&&ia(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,ma(c)?(Bp(`${l}//${c}${m}`),jp("Auth",!0)):Mx()}function mA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kx(e){const t=mA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Kw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Kw(c)}}}function Kw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Mx(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(t){return ir("not implemented")}_linkToIdToken(t,n){return ir("not implemented")}_getReauthenticationResolver(t){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(e,t){return eA(e,"POST","/v1/accounts:signInWithIdp",Xf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="http://localhost";class oa extends gA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new oa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=Iy(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new oa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return To(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,To(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,To(t,n)}buildRequest(){const t={requestUri:Vx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=xu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends pA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Bu{constructor(){super("facebook.com")}static credential(t){return oa._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Kr.credentialFromTaggedObject(t)}static credentialFromError(t){return Kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Kr.credential(t.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return oa._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return $r.credentialFromTaggedObject(t)}static credentialFromError(t){return $r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Bu{constructor(){super("github.com")}static credential(t){return oa._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yr.credentialFromTaggedObject(t)}static credentialFromError(t){return Yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Yr.credential(t.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Bu{constructor(){super("twitter.com")}static credential(t,n){return oa._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Xr.credentialFromTaggedObject(t)}static credentialFromError(t){return Xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Xn._fromIdTokenResponse(t,r,a),c=$w(r);return new la({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=$w(r);return new la({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function $w(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends Ri{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new uf(t,n,r,a)}}function yA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(e,l,t,r):l})}async function Px(e,t,n=!1){const r=await Au(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return la._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(e,t,n=!1){const{auth:r}=e;if(zn(r.app))return Promise.reject(es(r));const a="reauthenticate";try{const l=await Au(e,yA(r,a,t,e),n);Tt(l.idToken,r,"internal-error");const c=Oy(l.idToken);Tt(c,r,"internal-error");const{sub:d}=c;return Tt(e.uid===d,r,"user-mismatch"),la._forOperation(e,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&hr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(e,t,n=!1){if(zn(e.app))return Promise.reject(es(e));const r="signIn",a=await yA(e,r,t),l=await la._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(e,t){return eA(e,"POST","/v1/accounts:signInWithCustomToken",Xf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(e,t){if(zn(e.app))return Promise.reject(es(e));const n=Qf(e),r=await zx(n,{token:t,returnSecureToken:!0}),a=await la._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(a.user),a}function jx(e,t,n,r){return Ie(e).onIdTokenChanged(t,n,r)}function Hx(e,t,n){return Ie(e).beforeAuthStateChanged(t,n)}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=1e3,Fx=10;class vA extends _A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Ex()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,Fx):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},qx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}vA.type="LOCAL";const Gx=vA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA extends _A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}EA.type="SESSION";const wA=EA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new Zf(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(n.origin,l)),m=await Kx(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=ky("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function Yx(e){bi().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function Xx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qx(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Zx(){return TA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebaseLocalStorageDb",Wx=1,hf="firebaseLocalStorage",SA="fbase_key";class ju{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wf(e,t){return e.transaction([hf],t?"readwrite":"readonly").objectStore(hf)}function Jx(){const e=indexedDB.deleteDatabase(bA);return new ju(e).toPromise()}function gp(){const e=indexedDB.open(bA,Wx);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(hf,{keyPath:SA})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(hf)?t(r):(r.close(),await Jx(),t(await gp()))})})}async function Yw(e,t,n){const r=Wf(e,!0).put({[SA]:t,value:n});return new ju(r).toPromise()}async function tk(e,t){const n=Wf(e,!1).get(t),r=await new ju(n).toPromise();return r===void 0?null:r.value}function Xw(e,t){const n=Wf(e,!0).delete(t);return new ju(n).toPromise()}const ek=800,nk=3;class AA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>nk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(Zx()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Xx(),!this.activeServiceWorker)return;this.sender=new $x(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Qx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gp();return await Yw(t,cf,"1"),await Xw(t,cf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>tk(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Wf(a,!1).getAll();return new ju(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AA.type="LOCAL";const ik=AA;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(e,t){return t?rr(t):(Tt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends gA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return To(t,this._buildIdpRequest())}_linkToIdToken(t,n){return To(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return To(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function sk(e){return Lx(e.auth,new My(e),e.bypassAuthState)}function ak(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),Ux(n,new My(e),e.bypassAuthState)}async function ok(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),Px(n,new My(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return sk;case"linkViaPopup":case"linkViaRedirect":return ok;case"reauthViaPopup":case"reauthViaRedirect":return ak;default:hr(this.auth,"internal-error")}}resolve(t){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new zu(2e3,1e4);class yo extends RA{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const t=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,lk.get())};t()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="pendingRedirect",Uh=new Map;class ck extends RA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Uh.get(this.auth._key());if(!t){try{const r=await hk(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Uh.set(this.auth._key(),t)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hk(e,t){const n=mk(t),r=dk(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function fk(e,t){Uh.set(e._key(),t)}function dk(e){return rr(e._redirectPersistence)}function mk(e){return Ph(uk,e.config.apiKey,e.name)}async function gk(e,t,n=!1){if(zn(e.app))return Promise.reject(es(e));const r=Qf(e),a=rk(r,t),c=await new ck(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=10*60*1e3;class yk{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_k(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!IA(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ti(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=pk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(t))}saveEventToCache(t){this.cachedEventUids.add(Qw(t)),this.lastProcessedEventTime=Date.now()}}function Qw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function IA({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function _k(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(e,t={}){return qo(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wk=/^https?/;async function Tk(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vk(e);for(const n of t)try{if(bk(n))return}catch{}hr(e,"unauthorized-domain")}function bk(e){const t=dp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!wk.test(n))return!1;if(Ek.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=new zu(3e4,6e4);function Zw(){const e=bi().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Ak(e){return new Promise((t,n)=>{var r,a,l;function c(){Zw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Zw(),n(Ti(e,"network-request-failed"))},timeout:Sk.get()})}if(!((a=(r=bi().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=bi().gapi)===null||l===void 0)&&l.load)c();else{const d=Dx("iframefcb");return bi()[d]=()=>{gapi.load?c():n(Ti(e,"network-request-failed"))},Ix(`${Cx()}?onload=${d}`).catch(m=>n(m))}}).catch(t=>{throw Lh=null,t})}let Lh=null;function Rk(e){return Lh=Lh||Ak(e),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new zu(5e3,15e3),Ck="__/auth/iframe",Dk="emulator/auth/iframe",Ok={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xk(e){const t=e.config;Tt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Dy(t,Dk):`https://${e.config.authDomain}/${Ck}`,r={apiKey:t.apiKey,appName:e.name,v:Po},a=Nk.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${xu(r).slice(1)}`}async function kk(e){const t=await Rk(e),n=bi().gapi;return Tt(n,e,"internal-error"),t.open({where:document.body,url:xk(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ok,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ti(e,"network-request-failed"),d=bi().setTimeout(()=>{l(c)},Ik.get());function m(){bi().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vk=500,Pk=600,Uk="_blank",Lk="http://localhost";class Ww{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zk(e,t,n,r=Vk,a=Pk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m=Object.assign(Object.assign({},Mk),{width:r.toString(),height:a.toString(),top:l,left:c}),g=We().toLowerCase();n&&(d=oA(g)?Uk:n),sA(g)&&(t=t||Lk,m.scrollbars="yes");const y=Object.entries(m).reduce((E,[b,I])=>`${E}${b}=${I},`,"");if(vx(g)&&d!=="_self")return Bk(t||"",d),new Ww(null);const v=window.open(t||"",d,y);Tt(v,e,"popup-blocked");try{v.focus()}catch{}return new Ww(v)}function Bk(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="__/auth/handler",Hk="emulator/auth/handler",qk=encodeURIComponent("fac");async function Jw(e,t,n,r,a,l){Tt(e.config.authDomain,e,"auth-domain-config-required"),Tt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Po,eventId:a};if(t instanceof pA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",aC(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof Bu){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await e._getAppCheckToken(),g=m?`#${qk}=${encodeURIComponent(m)}`:"";return`${Fk(e)}?${xu(d).slice(1)}${g}`}function Fk({config:e}){return e.emulator?Dy(e,Hk):`https://${e.authDomain}/${jk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="webStorageSupport";class Gk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=gk,this._overrideRedirectResult=fk}async _openPopup(t,n,r,a){var l;fr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Jw(t,n,r,dp(),a);return zk(t,c,ky())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await Jw(t,n,r,dp(),a);return Yx(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(fr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await kk(t),r=new yk(t);return n.register("authEvent",a=>(Tt(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Cg,{type:Cg},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Cg];c!==void 0&&n(!!c),hr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Tk(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return fA()||aA()||Ny()}}const Kk=Gk;var tT="@firebase/auth",eT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xk(e){ra(new ns("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Tt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dA(e)},g=new Ax(r,a,l,m);return Nx(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ra(new ns("auth-internal",t=>{const n=Qf(t.getProvider("auth").getImmediate());return(r=>new $k(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(tT,eT,Yk(e)),vi(tT,eT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=5*60,Zk=ab("authIdTokenMaxAge")||Qk;let nT=null;const Wk=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Zk)return;const a=n==null?void 0:n.token;nT!==a&&(nT=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function CA(e=Fp()){const t=Of(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Ox(e,{popupRedirectResolver:Kk,persistence:[ik,Gx,wA]}),r=ab("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=Wk(l.toString());Hx(n,c,()=>c(n.currentUser)),jx(n,d=>c(d))}}const a=ib("auth");return a&&xx(n,`http://${a}`),n}function Jk(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Rx({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=Ti("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",Jk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xk("Browser");const tM={apiKey:"AIzaSyCV9KLDUWG25081Nz_DwxCwrYFA1qi82_U",authDomain:"dashboard-41ee0.firebaseapp.com",projectId:"dashboard-41ee0",storageBucket:"dashboard-41ee0.firebasestorage.app",messagingSenderId:"576683404898",appId:"1:576683404898:web:d45dd398286841f11eeb3b"},Vy=ub(tM);console.log(CA(Vy));const yi=CA(Vy),eM=JN(Vy);function nM(e,t){const n=PS(),[r,a]=lt.useState(null);lt.useEffect(()=>{c()},[]);async function l(y){const v=yi.currentUser;if(!v)return Promise.reject(new Error("Not authenticated 1"));const E=nr(n,"users",v.uid,"widget-layouts",y,"widgets"),b=await ea(E);return b.empty?(console.warn("No widgets found in layout."),[]):b.docs.map(I=>({id:I.id,dbRef:Gr(n,"users",v.uid,"widget-layouts",y,"widgets",I.id),...I.data()}))}function c(y){const v=yi.currentUser;if(!v){t("Not Authenticated 2");return}y||e(!0);const E=nr(n,"users",v.uid,"widget-layouts"),b=bN(E,SN("active","==",!0));ea(b).then(I=>{if(I.empty)throw new Error("No active widget grid layout found");const M=I.docs[0],N=M.id;l(N).then(Y=>{a({id:M.id,widgets:Y,...M.data()})})}).catch(I=>{t(I.message||String(I))}).finally(()=>{y||e(!1)})}function d(y,v){const E=yi.currentUser;if(!E){t("Not authenticated 3");return}const b=Gr(nr(n,"users",E.uid,"widget-layouts",y,"widgets")),{id:I,...M}=v,N=v.datasources.default,Y={componentLayoutRef:Gr(n,"widgets",M.type,"component-layouts",I),type:M.type,datasources:Object.entries(v.datasources).reduce((F,[G,q])=>{const X=q.datasource?q.datasource:N.datasourceApp?Gr(n,"users",E.uid,"apps",N.datasourceApp):null;return X&&(F[G]={datasource:X,datasourceQuery:q.datasourceQuery}),F},{}),position:M.position};hp(b,Y,{merge:!0}).then(()=>c(!0)).catch(F=>{throw t(F.message||String(F)),F})}function m(y,v){const E=yi.currentUser;if(!E){t("Not authenticated 4");return}const b=Gr(n,"users",E.uid,"widget-layouts",y,"widgets",v);CN(b).then(()=>c(!0)).catch(I=>{throw t(I.message||String(I)),I})}function g(y){const v=yi.currentUser;if(!v){t("Not authenticated 5");return}const E=y.id||crypto.randomUUID(),b=Gr(n,"users",v.uid,"widget-layouts",E),I=nr(b,"widgets"),{widgets:M,id:N,...Y}=y;hp(b,Y,{merge:!0}).then(()=>{const F=NN(n);M.forEach(G=>{const q=G.id||crypto.randomUUID(),X=Gr(I,q),{id:tt,...D}=G;F.set(X,D)}),F.commit().catch(G=>{throw t(G.message||String(G)),G})}).then(()=>c(!0)).catch(F=>{throw t(F.message||String(F)),F})}return{activeLayout:r,saveWidget:d,deleteWidget:m,saveLayout:g}}function iM(e){const{getAccessTokenSilently:t}=zp(),[n,r]=lt.useState(null),[a,l]=lt.useState(!1),c=lt.useCallback(async d=>{if(!d){r(null);return}l(!0),e(null);try{console.log("trying");const y=(await ex(eM,"auth0ToFirebase")({token:d})).data.firebaseToken,v=await Bx(yi,y);r(v.user)}catch(m){console.log(m),e(m),r(null)}finally{l(!1)}},[]);return lt.useEffect(()=>{(async()=>{try{const m=await t();m&&(console.log("auth token"),await c(m))}catch(m){console.error("Auth0 token retrieval failed",m)}})()},[t,c]),{user:n,loading:a}}const rM=e=>dt.jsx("div",{className:"widget-grid__filler","data-selected":e.selected,onMouseDown:t=>e.handleMouseDown(e,t),onMouseEnter:t=>e.handleMouseEnter(e,t)});function sM(e="CELL_DRAG"){if(e==="NONE")return{selectedFiller:[],placedGridItem:null,setPlacedItemToLoading:()=>{},removePlacedItem:()=>{},handleMouseDown:()=>{},handleMouseEnter:()=>{},handleMouseUp:()=>{},setOccupiedPositions:()=>{}};const[t,n]=lt.useState(!1),[r,a]=lt.useState([]),[l,c]=lt.useState(null),[d,m]=lt.useState([]),g=lt.useRef(t);lt.useEffect(()=>{g.current=t},[t]);const y=lt.useRef(r);lt.useEffect(()=>{y.current=r},[r]);const v=F=>{c(F)},E=()=>{c(null)},b=()=>{l&&c({...l,isLoading:{isLoading:!0,message:"Saving widget"}})},I=(F,G)=>{g.current||(n(!0),c(null),a([F]),G.preventDefault())},M=F=>{if(!g.current||y.current.length===0)return!1;let G=1/0,q=-1/0,X=1/0,tt=-1/0;for(const D of[...y.current,F])D.row<G&&(G=D.row),D.row>q&&(q=D.row),D.column<X&&(X=D.column),D.column>tt&&(tt=D.column);for(const[D,R]of d)if(D>=G&&D<=q&&R>=X&&R<=tt)return!1;return!0};return{selectedFiller:r,placedGridItem:l,setPlacedItemToLoading:b,removePlacedItem:E,handleMouseDown:I,handleMouseEnter:(F,G)=>{if(!M(F))return;const q=y.current.findIndex(X=>X.row===F.row&&X.column===F.column);q>-1?a(y.current.slice(0,q+1)):a([...y.current,F]),G.preventDefault()},handleMouseUp:F=>{g.current&&(n(!1),v({position:{rowStart:Math.min(...y.current.map(G=>G.row)),rowEnd:Math.max(...y.current.map(G=>G.row))+1,colStart:Math.min(...y.current.map(G=>G.column)),colEnd:Math.max(...y.current.map(G=>G.column))+1}}),a([]),F.preventDefault())},setOccupiedPositions:m}}const DA=e=>{const{selectedFiller:t,placedGridItem:n,removePlacedItem:r,setPlacedItemToLoading:a,handleMouseUp:l,handleMouseDown:c,handleMouseEnter:d,setOccupiedPositions:m}=sM(e.placerMode);lt.useEffect(()=>{window.addEventListener("mouseup",b=>l(b))},[]),lt.useEffect(()=>{r()},[e.children]);const g=b=>{e.onSaveGridItem?e.onSaveGridItem(b):console.error("onSaveGridItem is udnefined"),a()},y=lt.useMemo(()=>{const b=xp.Children.toArray(e.children),I=b.filter(M=>M.type===e.ItemComponent);return b.length>I.length&&console.error(`${b.length-I.length} child(ren) of Grid aren't GridItems`),n?[...I,lt.createElement(e.ItemComponent,{...n,unsaved:!0,removeItem:r,onSave:g,key:"unsaved"})]:I},[e.children,n]),v=lt.useMemo(()=>y.reduce((b,I)=>{const M=[];for(let N=I.props.position.colStart;N<I.props.position.colEnd;N++)for(let Y=I.props.position.rowStart;Y<I.props.position.rowEnd;Y++)M.push([Y,N]);return[...b,...M]},[]),[y]);lt.useEffect(()=>{m(v)},[v]);const E=[];for(let b=1;b<=e.rows;b++)for(let I=1;I<=e.columns;I++)v.some(([N,Y])=>N==I&&Y==b)||E.push(dt.jsx(rM,{row:I,column:b,selected:t&&t.some(N=>N.row===I&&N.column===b),handleMouseDown:c,handleMouseEnter:d},`widget-filler-${I}-${b}`));return dt.jsxs("div",{className:"widget-grid",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`,gridTemplateRows:`repeat(${e.rows}, 1fr)`},children:[y,E]})},aM=e=>{const t=lt.useRef([]),[n,r]=lt.useState(),[a,l]=lt.useState();return lt.useEffect(()=>{t.current.forEach(c=>{c&&c.scrollWidth>c.clientWidth&&c.classList.add("scroll-animate")})},[e.widgetDefinitions]),lt.useEffect(()=>{if(e.widgetDefinitions&&e.widgetDefinitions.length>0)if(!a)r(dt.jsx("div",{className:"widget__widget-type-select",children:e.widgetDefinitions.map((c,d)=>dt.jsx("div",{className:"widget__widget-type-select__option",onClick:()=>l(c.type),ref:m=>{t.current[d]=m},children:c.type}))}));else{const c=e.widgetDefinitions.find(d=>d.type===a);c?r(dt.jsx("div",{className:"widget__widget-type-select",children:c.widgetComponentLayoutDefinitions.map((d,m)=>dt.jsx("div",{className:"widget__widget-type-select__option",onClick:()=>e.onSave({position:e.widgetPosition,type:a,...d}),ref:g=>{t.current[m]=g},children:d.name}))})):console.error("error")}},[a,e.widgetDefinitions]),n},iT=e=>dt.jsx("div",{"data-unsaved":e.unsaved,className:"widget-component",style:{gridArea:`${e.position.colStart} / ${e.position.rowStart} / ${e.position.colEnd} / ${e.position.rowEnd}`},children:e.children});function zh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oM(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function OA(e){let t,n,r;e.length!==2?(t=zh,n=(d,m)=>zh(e(d),m),r=(d,m)=>e(d)-m):(t=e===zh||e===oM?e:lM,n=e,r=e);function a(d,m,g=0,y=d.length){if(g<y){if(t(m,m)!==0)return y;do{const v=g+y>>>1;n(d[v],m)<0?g=v+1:y=v}while(g<y)}return g}function l(d,m,g=0,y=d.length){if(g<y){if(t(m,m)!==0)return y;do{const v=g+y>>>1;n(d[v],m)<=0?g=v+1:y=v}while(g<y)}return g}function c(d,m,g=0,y=d.length){const v=a(d,m,g,y-1);return v>g&&r(d[v-1],m)>-r(d[v],m)?v-1:v}return{left:a,center:c,right:l}}function lM(){return 0}function uM(e){return e===null?NaN:+e}const cM=OA(zh),hM=cM.right;OA(uM).center;class rT extends Map{constructor(t,n=mM){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(sT(this,t))}has(t){return super.has(sT(this,t))}set(t,n){return super.set(fM(this,t),n)}delete(t){return super.delete(dM(this,t))}}function sT({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function fM({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function dM({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function mM(e){return e!==null&&typeof e=="object"?e.valueOf():e}const gM=Math.sqrt(50),pM=Math.sqrt(10),yM=Math.sqrt(2);function ff(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),l=r/Math.pow(10,a),c=l>=gM?10:l>=pM?5:l>=yM?2:1;let d,m,g;return a<0?(g=Math.pow(10,-a)/c,d=Math.round(e*g),m=Math.round(t*g),d/g<e&&++d,m/g>t&&--m,g=-g):(g=Math.pow(10,a)*c,d=Math.round(e/g),m=Math.round(t/g),d*g<e&&++d,m*g>t&&--m),m<d&&.5<=n&&n<2?ff(e,t,n*2):[d,m,g]}function _M(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,l,c]=r?ff(t,e,n):ff(e,t,n);if(!(l>=a))return[];const d=l-a+1,m=new Array(d);if(r)if(c<0)for(let g=0;g<d;++g)m[g]=(l-g)/-c;else for(let g=0;g<d;++g)m[g]=(l-g)*c;else if(c<0)for(let g=0;g<d;++g)m[g]=(a+g)/-c;else for(let g=0;g<d;++g)m[g]=(a+g)*c;return m}function pp(e,t,n){return t=+t,e=+e,n=+n,ff(e,t,n)[2]}function vM(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?pp(t,e,n):pp(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function EM(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function wM(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(a);++r<a;)l[r]=e+r*n;return l}function TM(e){return e}var Dg=1,Og=2,yp=3,au=4,aT=1e-6;function bM(e){return"translate("+e+",0)"}function SM(e){return"translate(0,"+e+")"}function AM(e){return t=>+e(t)}function RM(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function IM(){return!this.__axis}function NA(e,t){var n=[],r=null,a=null,l=6,c=6,d=3,m=typeof window<"u"&&window.devicePixelRatio>1?0:.5,g=e===Dg||e===au?-1:1,y=e===au||e===Og?"x":"y",v=e===Dg||e===yp?bM:SM;function E(b){var I=r??(t.ticks?t.ticks.apply(t,n):t.domain()),M=a??(t.tickFormat?t.tickFormat.apply(t,n):TM),N=Math.max(l,0)+d,Y=t.range(),F=+Y[0]+m,G=+Y[Y.length-1]+m,q=(t.bandwidth?RM:AM)(t.copy(),m),X=b.selection?b.selection():b,tt=X.selectAll(".domain").data([null]),D=X.selectAll(".tick").data(I,t).order(),R=D.exit(),C=D.enter().append("g").attr("class","tick"),V=D.select("line"),x=D.select("text");tt=tt.merge(tt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(C),V=V.merge(C.append("line").attr("stroke","currentColor").attr(y+"2",g*l)),x=x.merge(C.append("text").attr("fill","currentColor").attr(y,g*N).attr("dy",e===Dg?"0em":e===yp?"0.71em":"0.32em")),b!==X&&(tt=tt.transition(b),D=D.transition(b),V=V.transition(b),x=x.transition(b),R=R.transition(b).attr("opacity",aT).attr("transform",function(L){return isFinite(L=q(L))?v(L+m):this.getAttribute("transform")}),C.attr("opacity",aT).attr("transform",function(L){var O=this.parentNode.__axis;return v((O&&isFinite(O=O(L))?O:q(L))+m)})),R.remove(),tt.attr("d",e===au||e===Og?c?"M"+g*c+","+F+"H"+m+"V"+G+"H"+g*c:"M"+m+","+F+"V"+G:c?"M"+F+","+g*c+"V"+m+"H"+G+"V"+g*c:"M"+F+","+m+"H"+G),D.attr("opacity",1).attr("transform",function(L){return v(q(L)+m)}),V.attr(y+"2",g*l),x.attr(y,g*N).text(M),X.filter(IM).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Og?"start":e===au?"end":"middle"),X.each(function(){this.__axis=q})}return E.scale=function(b){return arguments.length?(t=b,E):t},E.ticks=function(){return n=Array.from(arguments),E},E.tickArguments=function(b){return arguments.length?(n=b==null?[]:Array.from(b),E):n.slice()},E.tickValues=function(b){return arguments.length?(r=b==null?null:Array.from(b),E):r&&r.slice()},E.tickFormat=function(b){return arguments.length?(a=b,E):a},E.tickSize=function(b){return arguments.length?(l=c=+b,E):l},E.tickSizeInner=function(b){return arguments.length?(l=+b,E):l},E.tickSizeOuter=function(b){return arguments.length?(c=+b,E):c},E.tickPadding=function(b){return arguments.length?(d=+b,E):d},E.offset=function(b){return arguments.length?(m=+b,E):m},E}function CM(e){return NA(yp,e)}function DM(e){return NA(au,e)}var OM={value:()=>{}};function xA(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bh(n)}function Bh(e){this._=e}function NM(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bh.prototype=xA.prototype={constructor:Bh,on:function(e,t){var n=this._,r=NM(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=xM(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=oT(n[a],e.name,t);else if(t==null)for(a in n)n[a]=oT(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bh(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function xM(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function oT(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=OM,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var _p="http://www.w3.org/1999/xhtml";const lT={svg:"http://www.w3.org/2000/svg",xhtml:_p,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lT.hasOwnProperty(t)?{space:lT[t],local:e}:e}function kM(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_p&&t.documentElement.namespaceURI===_p?t.createElement(e):t.createElementNS(n,e)}}function MM(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kA(e){var t=Jf(e);return(t.local?MM:kM)(t)}function VM(){}function Py(e){return e==null?VM:function(){return this.querySelector(e)}}function PM(e){typeof e!="function"&&(e=Py(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),m,g,y=0;y<c;++y)(m=l[y])&&(g=e.call(m,m.__data__,y,l))&&("__data__"in m&&(g.__data__=m.__data__),d[y]=g);return new bn(r,this._parents)}function UM(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function LM(){return[]}function MA(e){return e==null?LM:function(){return this.querySelectorAll(e)}}function zM(e){return function(){return UM(e.apply(this,arguments))}}function BM(e){typeof e=="function"?e=zM(e):e=MA(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,m,g=0;g<d;++g)(m=c[g])&&(r.push(e.call(m,m.__data__,g,c)),a.push(m));return new bn(r,a)}function VA(e){return function(){return this.matches(e)}}function PA(e){return function(t){return t.matches(e)}}var jM=Array.prototype.find;function HM(e){return function(){return jM.call(this.children,e)}}function qM(){return this.firstElementChild}function FM(e){return this.select(e==null?qM:HM(typeof e=="function"?e:PA(e)))}var GM=Array.prototype.filter;function KM(){return Array.from(this.children)}function $M(e){return function(){return GM.call(this.children,e)}}function YM(e){return this.selectAll(e==null?KM:$M(typeof e=="function"?e:PA(e)))}function XM(e){typeof e!="function"&&(e=VA(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],m,g=0;g<c;++g)(m=l[g])&&e.call(m,m.__data__,g,l)&&d.push(m);return new bn(r,this._parents)}function UA(e){return new Array(e.length)}function QM(){return new bn(this._enter||this._groups.map(UA),this._parents)}function df(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}df.prototype={constructor:df,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ZM(e){return function(){return e}}function WM(e,t,n,r,a,l){for(var c=0,d,m=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new df(e,l[c]);for(;c<m;++c)(d=t[c])&&(a[c]=d)}function JM(e,t,n,r,a,l,c){var d,m,g=new Map,y=t.length,v=l.length,E=new Array(y),b;for(d=0;d<y;++d)(m=t[d])&&(E[d]=b=c.call(m,m.__data__,d,t)+"",g.has(b)?a[d]=m:g.set(b,m));for(d=0;d<v;++d)b=c.call(e,l[d],d,l)+"",(m=g.get(b))?(r[d]=m,m.__data__=l[d],g.delete(b)):n[d]=new df(e,l[d]);for(d=0;d<y;++d)(m=t[d])&&g.get(E[d])===m&&(a[d]=m)}function t4(e){return e.__data__}function e4(e,t){if(!arguments.length)return Array.from(this,t4);var n=t?JM:WM,r=this._parents,a=this._groups;typeof e!="function"&&(e=ZM(e));for(var l=a.length,c=new Array(l),d=new Array(l),m=new Array(l),g=0;g<l;++g){var y=r[g],v=a[g],E=v.length,b=n4(e.call(y,y&&y.__data__,g,r)),I=b.length,M=d[g]=new Array(I),N=c[g]=new Array(I),Y=m[g]=new Array(E);n(y,v,M,N,Y,b,t);for(var F=0,G=0,q,X;F<I;++F)if(q=M[F]){for(F>=G&&(G=F+1);!(X=N[G])&&++G<I;);q._next=X||null}}return c=new bn(c,r),c._enter=d,c._exit=m,c}function n4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i4(){return new bn(this._exit||this._groups.map(UA),this._parents)}function r4(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function s4(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),m=0;m<c;++m)for(var g=n[m],y=r[m],v=g.length,E=d[m]=new Array(v),b,I=0;I<v;++I)(b=g[I]||y[I])&&(E[I]=b);for(;m<a;++m)d[m]=n[m];return new bn(d,this._parents)}function a4(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function o4(e){e||(e=l4);function t(v,E){return v&&E?e(v.__data__,E.__data__):!v-!E}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,m=a[l]=new Array(d),g,y=0;y<d;++y)(g=c[y])&&(m[y]=g);m.sort(t)}return new bn(a,this._parents).order()}function l4(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function u4(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function c4(){return Array.from(this)}function h4(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function f4(){let e=0;for(const t of this)++e;return e}function d4(){return!this.node()}function m4(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function g4(e){return function(){this.removeAttribute(e)}}function p4(e){return function(){this.removeAttributeNS(e.space,e.local)}}function y4(e,t){return function(){this.setAttribute(e,t)}}function _4(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function v4(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function E4(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function w4(e,t){var n=Jf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?p4:g4:typeof t=="function"?n.local?E4:v4:n.local?_4:y4)(n,t))}function LA(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function T4(e){return function(){this.style.removeProperty(e)}}function b4(e,t,n){return function(){this.style.setProperty(e,t,n)}}function S4(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function A4(e,t,n){return arguments.length>1?this.each((t==null?T4:typeof t=="function"?S4:b4)(e,t,n??"")):xo(this.node(),e)}function xo(e,t){return e.style.getPropertyValue(t)||LA(e).getComputedStyle(e,null).getPropertyValue(t)}function R4(e){return function(){delete this[e]}}function I4(e,t){return function(){this[e]=t}}function C4(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function D4(e,t){return arguments.length>1?this.each((t==null?R4:typeof t=="function"?C4:I4)(e,t)):this.node()[e]}function zA(e){return e.trim().split(/^|\s+/)}function Uy(e){return e.classList||new BA(e)}function BA(e){this._node=e,this._names=zA(e.getAttribute("class")||"")}BA.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function jA(e,t){for(var n=Uy(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function HA(e,t){for(var n=Uy(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function O4(e){return function(){jA(this,e)}}function N4(e){return function(){HA(this,e)}}function x4(e,t){return function(){(t.apply(this,arguments)?jA:HA)(this,e)}}function k4(e,t){var n=zA(e+"");if(arguments.length<2){for(var r=Uy(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?x4:t?O4:N4)(n,t))}function M4(){this.textContent=""}function V4(e){return function(){this.textContent=e}}function P4(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function U4(e){return arguments.length?this.each(e==null?M4:(typeof e=="function"?P4:V4)(e)):this.node().textContent}function L4(){this.innerHTML=""}function z4(e){return function(){this.innerHTML=e}}function B4(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function j4(e){return arguments.length?this.each(e==null?L4:(typeof e=="function"?B4:z4)(e)):this.node().innerHTML}function H4(){this.nextSibling&&this.parentNode.appendChild(this)}function q4(){return this.each(H4)}function F4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G4(){return this.each(F4)}function K4(e){var t=typeof e=="function"?e:kA(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $4(){return null}function Y4(e,t){var n=typeof e=="function"?e:kA(e),r=t==null?$4:typeof t=="function"?t:Py(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function X4(){var e=this.parentNode;e&&e.removeChild(this)}function Q4(){return this.each(X4)}function Z4(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function W4(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J4(e){return this.select(e?W4:Z4)}function tV(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eV(e){return function(t){e.call(this,t,this.__data__)}}function nV(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function iV(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function rV(e,t,n){return function(){var r=this.__on,a,l=eV(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function sV(e,t,n){var r=nV(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var m=0,g=d.length,y;m<g;++m)for(a=0,y=d[m];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?rV:iV,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function qA(e,t,n){var r=LA(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function aV(e,t){return function(){return qA(this,e,t)}}function oV(e,t){return function(){return qA(this,e,t.apply(this,arguments))}}function lV(e,t){return this.each((typeof t=="function"?oV:aV)(e,t))}function*uV(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var FA=[null];function bn(e,t){this._groups=e,this._parents=t}function Hu(){return new bn([[document.documentElement]],FA)}function cV(){return this}bn.prototype=Hu.prototype={constructor:bn,select:PM,selectAll:BM,selectChild:FM,selectChildren:YM,filter:XM,data:e4,enter:QM,exit:i4,join:r4,merge:s4,selection:cV,order:a4,sort:o4,call:u4,nodes:c4,node:h4,size:f4,empty:d4,each:m4,attr:w4,style:A4,property:D4,classed:k4,text:U4,html:j4,raise:q4,lower:G4,append:K4,insert:Y4,remove:Q4,clone:J4,datum:tV,on:sV,dispatch:lV,[Symbol.iterator]:uV};function ua(e){return typeof e=="string"?new bn([[document.querySelector(e)]],[document.documentElement]):new bn([[e]],FA)}function Ly(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function GA(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qu(){}var Ru=.7,mf=1/Ru,bo="\\s*([+-]?\\d+)\\s*",Iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hV=/^#([0-9a-f]{3,8})$/,fV=new RegExp(`^rgb\\(${bo},${bo},${bo}\\)$`),dV=new RegExp(`^rgb\\(${Si},${Si},${Si}\\)$`),mV=new RegExp(`^rgba\\(${bo},${bo},${bo},${Iu}\\)$`),gV=new RegExp(`^rgba\\(${Si},${Si},${Si},${Iu}\\)$`),pV=new RegExp(`^hsl\\(${Iu},${Si},${Si}\\)$`),yV=new RegExp(`^hsla\\(${Iu},${Si},${Si},${Iu}\\)$`),uT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ly(qu,ca,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cT,formatHex:cT,formatHex8:_V,formatHsl:vV,formatRgb:hT,toString:hT});function cT(){return this.rgb().formatHex()}function _V(){return this.rgb().formatHex8()}function vV(){return KA(this).formatHsl()}function hT(){return this.rgb().formatRgb()}function ca(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hV.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fT(t):n===3?new cn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fV.exec(e))?new cn(t[1],t[2],t[3],1):(t=dV.exec(e))?new cn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mV.exec(e))?wh(t[1],t[2],t[3],t[4]):(t=gV.exec(e))?wh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pV.exec(e))?gT(t[1],t[2]/100,t[3]/100,1):(t=yV.exec(e))?gT(t[1],t[2]/100,t[3]/100,t[4]):uT.hasOwnProperty(e)?fT(uT[e]):e==="transparent"?new cn(NaN,NaN,NaN,0):null}function fT(e){return new cn(e>>16&255,e>>8&255,e&255,1)}function wh(e,t,n,r){return r<=0&&(e=t=n=NaN),new cn(e,t,n,r)}function EV(e){return e instanceof qu||(e=ca(e)),e?(e=e.rgb(),new cn(e.r,e.g,e.b,e.opacity)):new cn}function vp(e,t,n,r){return arguments.length===1?EV(e):new cn(e,t,n,r??1)}function cn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ly(cn,vp,GA(qu,{brighter(e){return e=e==null?mf:Math.pow(mf,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cn(na(this.r),na(this.g),na(this.b),gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dT,formatHex:dT,formatHex8:wV,formatRgb:mT,toString:mT}));function dT(){return`#${ta(this.r)}${ta(this.g)}${ta(this.b)}`}function wV(){return`#${ta(this.r)}${ta(this.g)}${ta(this.b)}${ta((isNaN(this.opacity)?1:this.opacity)*255)}`}function mT(){const e=gf(this.opacity);return`${e===1?"rgb(":"rgba("}${na(this.r)}, ${na(this.g)}, ${na(this.b)}${e===1?")":`, ${e})`}`}function gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function na(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ta(e){return e=na(e),(e<16?"0":"")+e.toString(16)}function gT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $n(e,t,n,r)}function KA(e){if(e instanceof $n)return new $n(e.h,e.s,e.l,e.opacity);if(e instanceof qu||(e=ca(e)),!e)return new $n;if(e instanceof $n)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,m=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=m<.5?l+a:2-l-a,c*=60):d=m>0&&m<1?0:c,new $n(c,d,m,e.opacity)}function TV(e,t,n,r){return arguments.length===1?KA(e):new $n(e,t,n,r??1)}function $n(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ly($n,TV,GA(qu,{brighter(e){return e=e==null?mf:Math.pow(mf,e),new $n(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new $n(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new cn(Ng(e>=240?e-240:e+120,a,r),Ng(e,a,r),Ng(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new $n(pT(this.h),Th(this.s),Th(this.l),gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gf(this.opacity);return`${e===1?"hsl(":"hsla("}${pT(this.h)}, ${Th(this.s)*100}%, ${Th(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pT(e){return e=(e||0)%360,e<0?e+360:e}function Th(e){return Math.max(0,Math.min(1,e||0))}function Ng(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zy=e=>()=>e;function bV(e,t){return function(n){return e+n*t}}function SV(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function AV(e){return(e=+e)==1?$A:function(t,n){return n-t?SV(t,n,e):zy(isNaN(t)?n:t)}}function $A(e,t){var n=t-e;return n?bV(e,n):zy(isNaN(e)?t:e)}const pf=function e(t){var n=AV(t);function r(a,l){var c=n((a=vp(a)).r,(l=vp(l)).r),d=n(a.g,l.g),m=n(a.b,l.b),g=$A(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=m(y),a.opacity=g(y),a+""}}return r.gamma=e,r}(1);function RV(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(l){for(a=0;a<n;++a)r[a]=e[a]*(1-l)+t[a]*l;return r}}function IV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function CV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),l=new Array(n),c;for(c=0;c<r;++c)a[c]=By(e[c],t[c]);for(;c<n;++c)l[c]=t[c];return function(d){for(c=0;c<r;++c)l[c]=a[c](d);return l}}function DV(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function OV(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=By(e[a],t[a]):r[a]=t[a];return function(l){for(a in n)r[a]=n[a](l);return r}}var Ep=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xg=new RegExp(Ep.source,"g");function NV(e){return function(){return e}}function xV(e){return function(t){return e(t)+""}}function YA(e,t){var n=Ep.lastIndex=xg.lastIndex=0,r,a,l,c=-1,d=[],m=[];for(e=e+"",t=t+"";(r=Ep.exec(e))&&(a=xg.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,m.push({i:c,x:Kn(r,a)})),n=xg.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?m[0]?xV(m[0].x):NV(t):(t=m.length,function(g){for(var y=0,v;y<t;++y)d[(v=m[y]).i]=v.x(g);return d.join("")})}function By(e,t){var n=typeof t,r;return t==null||n==="boolean"?zy(t):(n==="number"?Kn:n==="string"?(r=ca(t))?(t=r,pf):YA:t instanceof ca?pf:t instanceof Date?DV:IV(t)?RV:Array.isArray(t)?CV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OV:Kn)(e,t)}function kV(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var yT=180/Math.PI,wp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function XA(e,t,n,r,a,l){var c,d,m;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(m=e*n+t*r)&&(n-=e*m,r-=t*m),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,m/=d),e*r<t*n&&(e=-e,t=-t,m=-m,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*yT,skewX:Math.atan(m)*yT,scaleX:c,scaleY:d}}var bh;function MV(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wp:XA(t.a,t.b,t.c,t.d,t.e,t.f)}function VV(e){return e==null||(bh||(bh=document.createElementNS("http://www.w3.org/2000/svg","g")),bh.setAttribute("transform",e),!(e=bh.transform.baseVal.consolidate()))?wp:(e=e.matrix,XA(e.a,e.b,e.c,e.d,e.e,e.f))}function QA(e,t,n,r){function a(g){return g.length?g.pop()+" ":""}function l(g,y,v,E,b,I){if(g!==v||y!==E){var M=b.push("translate(",null,t,null,n);I.push({i:M-4,x:Kn(g,v)},{i:M-2,x:Kn(y,E)})}else(v||E)&&b.push("translate("+v+t+E+n)}function c(g,y,v,E){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),E.push({i:v.push(a(v)+"rotate(",null,r)-2,x:Kn(g,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(g,y,v,E){g!==y?E.push({i:v.push(a(v)+"skewX(",null,r)-2,x:Kn(g,y)}):y&&v.push(a(v)+"skewX("+y+r)}function m(g,y,v,E,b,I){if(g!==v||y!==E){var M=b.push(a(b)+"scale(",null,",",null,")");I.push({i:M-4,x:Kn(g,v)},{i:M-2,x:Kn(y,E)})}else(v!==1||E!==1)&&b.push(a(b)+"scale("+v+","+E+")")}return function(g,y){var v=[],E=[];return g=e(g),y=e(y),l(g.translateX,g.translateY,y.translateX,y.translateY,v,E),c(g.rotate,y.rotate,v,E),d(g.skewX,y.skewX,v,E),m(g.scaleX,g.scaleY,y.scaleX,y.scaleY,v,E),g=y=null,function(b){for(var I=-1,M=E.length,N;++I<M;)v[(N=E[I]).i]=N.x(b);return v.join("")}}}var PV=QA(MV,"px, ","px)","deg)"),UV=QA(VV,", ",")",")"),ko=0,ou=0,eu=0,ZA=1e3,yf,lu,_f=0,ha=0,td=0,Cu=typeof performance=="object"&&performance.now?performance:Date,WA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jy(){return ha||(WA(LV),ha=Cu.now()+td)}function LV(){ha=0}function vf(){this._call=this._time=this._next=null}vf.prototype=JA.prototype={constructor:vf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jy():+n)+(t==null?0:+t),!this._next&&lu!==this&&(lu?lu._next=this:yf=this,lu=this),this._call=e,this._time=n,Tp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tp())}};function JA(e,t,n){var r=new vf;return r.restart(e,t,n),r}function zV(){jy(),++ko;for(var e=yf,t;e;)(t=ha-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ko}function _T(){ha=(_f=Cu.now())+td,ko=ou=0;try{zV()}finally{ko=0,jV(),ha=0}}function BV(){var e=Cu.now(),t=e-_f;t>ZA&&(td-=t,_f=e)}function jV(){for(var e,t=yf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yf=n);lu=e,Tp(r)}function Tp(e){if(!ko){ou&&(ou=clearTimeout(ou));var t=e-ha;t>24?(e<1/0&&(ou=setTimeout(_T,e-Cu.now()-td)),eu&&(eu=clearInterval(eu))):(eu||(_f=Cu.now(),eu=setInterval(BV,ZA)),ko=1,WA(_T))}}function vT(e,t,n){var r=new vf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var HV=xA("start","end","cancel","interrupt"),qV=[],t1=0,ET=1,bp=2,jh=3,wT=4,Sp=5,Hh=6;function ed(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;FV(e,n,{name:t,index:r,group:a,on:HV,tween:qV,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:t1})}function Hy(e,t){var n=Zn(e,t);if(n.state>t1)throw new Error("too late; already scheduled");return n}function Ii(e,t){var n=Zn(e,t);if(n.state>jh)throw new Error("too late; already running");return n}function Zn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function FV(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=JA(l,0,n.time);function l(g){n.state=ET,n.timer.restart(c,n.delay,n.time),n.delay<=g&&c(g-n.delay)}function c(g){var y,v,E,b;if(n.state!==ET)return m();for(y in r)if(b=r[y],b.name===n.name){if(b.state===jh)return vT(c);b.state===wT?(b.state=Hh,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete r[y]):+y<t&&(b.state=Hh,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete r[y])}if(vT(function(){n.state===jh&&(n.state=wT,n.timer.restart(d,n.delay,n.time),d(g))}),n.state=bp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bp){for(n.state=jh,a=new Array(E=n.tween.length),y=0,v=-1;y<E;++y)(b=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=b);a.length=v+1}}function d(g){for(var y=g<n.duration?n.ease.call(null,g/n.duration):(n.timer.restart(m),n.state=Sp,1),v=-1,E=a.length;++v<E;)a[v].call(e,y);n.state===Sp&&(n.on.call("end",e,e.__data__,n.index,n.group),m())}function m(){n.state=Hh,n.timer.stop(),delete r[t];for(var g in r)return;delete e.__transition}}function GV(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>bp&&r.state<Sp,r.state=Hh,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function KV(e){return this.each(function(){GV(this,e)})}function $V(e,t){var n,r;return function(){var a=Ii(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function YV(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=Ii(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},m=0,g=a.length;m<g;++m)if(a[m].name===t){a[m]=d;break}m===g&&a.push(d)}l.tween=a}}function XV(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Zn(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?$V:YV)(n,e,t))}function qy(e,t,n){var r=e._id;return e.each(function(){var a=Ii(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Zn(a,r).value[t]}}function e1(e,t){var n;return(typeof t=="number"?Kn:t instanceof ca?pf:(n=ca(t))?(t=n,pf):YA)(e,t)}function QV(e){return function(){this.removeAttribute(e)}}function ZV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WV(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function JV(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function tP(e,t,n){var r,a,l;return function(){var c,d=n(this),m;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),m=d+"",c===m?null:c===r&&m===a?l:(a=m,l=t(r=c,d)))}}function eP(e,t,n){var r,a,l;return function(){var c,d=n(this),m;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),m=d+"",c===m?null:c===r&&m===a?l:(a=m,l=t(r=c,d)))}}function nP(e,t){var n=Jf(e),r=n==="transform"?UV:e1;return this.attrTween(e,typeof t=="function"?(n.local?eP:tP)(n,r,qy(this,"attr."+e,t)):t==null?(n.local?ZV:QV)(n):(n.local?JV:WV)(n,r,t))}function iP(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rP(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sP(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&rP(e,l)),n}return a._value=t,a}function aP(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&iP(e,l)),n}return a._value=t,a}function oP(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Jf(e);return this.tween(n,(r.local?sP:aP)(r,t))}function lP(e,t){return function(){Hy(this,e).delay=+t.apply(this,arguments)}}function uP(e,t){return t=+t,function(){Hy(this,e).delay=t}}function cP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lP:uP)(t,e)):Zn(this.node(),t).delay}function hP(e,t){return function(){Ii(this,e).duration=+t.apply(this,arguments)}}function fP(e,t){return t=+t,function(){Ii(this,e).duration=t}}function dP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hP:fP)(t,e)):Zn(this.node(),t).duration}function mP(e,t){if(typeof t!="function")throw new Error;return function(){Ii(this,e).ease=t}}function gP(e){var t=this._id;return arguments.length?this.each(mP(t,e)):Zn(this.node(),t).ease}function pP(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ii(this,e).ease=n}}function yP(e){if(typeof e!="function")throw new Error;return this.each(pP(this._id,e))}function _P(e){typeof e!="function"&&(e=VA(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],m,g=0;g<c;++g)(m=l[g])&&e.call(m,m.__data__,g,l)&&d.push(m);return new dr(r,this._parents,this._name,this._id)}function vP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var m=t[d],g=n[d],y=m.length,v=c[d]=new Array(y),E,b=0;b<y;++b)(E=m[b]||g[b])&&(v[b]=E);for(;d<r;++d)c[d]=t[d];return new dr(c,this._parents,this._name,this._id)}function EP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wP(e,t,n){var r,a,l=EP(t)?Hy:Ii;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function TP(e,t){var n=this._id;return arguments.length<2?Zn(this.node(),n).on.on(e):this.each(wP(n,e,t))}function bP(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function SP(){return this.on("end.remove",bP(this._id))}function AP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Py(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],m=d.length,g=l[c]=new Array(m),y,v,E=0;E<m;++E)(y=d[E])&&(v=e.call(y,y.__data__,E,d))&&("__data__"in y&&(v.__data__=y.__data__),g[E]=v,ed(g[E],t,n,E,g,Zn(y,n)));return new dr(l,this._parents,t,n)}function RP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=MA(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var m=r[d],g=m.length,y,v=0;v<g;++v)if(y=m[v]){for(var E=e.call(y,y.__data__,v,m),b,I=Zn(y,n),M=0,N=E.length;M<N;++M)(b=E[M])&&ed(b,t,n,M,E,I);l.push(E),c.push(y)}return new dr(l,c,t,n)}var IP=Hu.prototype.constructor;function CP(){return new IP(this._groups,this._parents)}function DP(e,t){var n,r,a;return function(){var l=xo(this,e),c=(this.style.removeProperty(e),xo(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function n1(e){return function(){this.style.removeProperty(e)}}function OP(e,t,n){var r,a=n+"",l;return function(){var c=xo(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function NP(e,t,n){var r,a,l;return function(){var c=xo(this,e),d=n(this),m=d+"";return d==null&&(m=d=(this.style.removeProperty(e),xo(this,e))),c===m?null:c===r&&m===a?l:(a=m,l=t(r=c,d))}}function xP(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var m=Ii(this,e),g=m.on,y=m.value[l]==null?d||(d=n1(t)):void 0;(g!==n||a!==y)&&(r=(n=g).copy()).on(c,a=y),m.on=r}}function kP(e,t,n){var r=(e+="")=="transform"?PV:e1;return t==null?this.styleTween(e,DP(e,r)).on("end.style."+e,n1(e)):typeof t=="function"?this.styleTween(e,NP(e,r,qy(this,"style."+e,t))).each(xP(this._id,e)):this.styleTween(e,OP(e,r,t),n).on("end.style."+e,null)}function MP(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function VP(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&MP(e,c,n)),r}return l._value=t,l}function PP(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,VP(e,t,n??""))}function UP(e){return function(){this.textContent=e}}function LP(e){return function(){var t=e(this);this.textContent=t??""}}function zP(e){return this.tween("text",typeof e=="function"?LP(qy(this,"text",e)):UP(e==null?"":e+""))}function BP(e){return function(t){this.textContent=e.call(this,t)}}function jP(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&BP(a)),t}return r._value=e,r}function HP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jP(e))}function qP(){for(var e=this._name,t=this._id,n=i1(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,m,g=0;g<d;++g)if(m=c[g]){var y=Zn(m,t);ed(m,e,n,g,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new dr(r,this._parents,e,n)}function FP(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},m={value:function(){--a===0&&l()}};n.each(function(){var g=Ii(this,r),y=g.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(m)),g.on=t}),a===0&&l()})}var GP=0;function dr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function i1(){return++GP}var er=Hu.prototype;dr.prototype={constructor:dr,select:AP,selectAll:RP,selectChild:er.selectChild,selectChildren:er.selectChildren,filter:_P,merge:vP,selection:CP,transition:qP,call:er.call,nodes:er.nodes,node:er.node,size:er.size,empty:er.empty,each:er.each,on:TP,attr:nP,attrTween:oP,style:kP,styleTween:PP,text:zP,textTween:HP,remove:SP,tween:XV,delay:cP,duration:dP,ease:gP,easeVarying:yP,end:FP,[Symbol.iterator]:er[Symbol.iterator]};function KP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $P={time:null,delay:0,duration:250,ease:KP};function YP(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function XP(e){var t,n;e instanceof dr?(t=e._id,e=e._name):(t=i1(),(n=$P).time=jy(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,m,g=0;g<d;++g)(m=c[g])&&ed(m,e,t,g,c,n||YP(m,t));return new dr(r,this._parents,e,t)}Hu.prototype.interrupt=KV;Hu.prototype.transition=XP;function QP(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ef(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Mo(e){return e=Ef(Math.abs(e)),e?e[1]:NaN}function ZP(e,t){return function(n,r){for(var a=n.length,l=[],c=0,d=e[0],m=0;a>0&&d>0&&(m+d+1>r&&(d=Math.max(1,r-m)),l.push(n.substring(a-=d,a+d)),!((m+=d+1)>r));)d=e[c=(c+1)%e.length];return l.reverse().join(t)}}function WP(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var JP=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wf(e){if(!(t=JP.exec(e)))throw new Error("invalid format: "+e);var t;return new Fy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}wf.prototype=Fy.prototype;function Fy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Fy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t3(e){t:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var r1;function e3(e,t){var n=Ef(e,t);if(!n)return e+"";var r=n[0],a=n[1],l=a-(r1=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=r.length;return l===c?r:l>c?r+new Array(l-c+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Ef(e,Math.max(0,t+l-1))[0]}function TT(e,t){var n=Ef(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const bT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:QP,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>TT(e*100,t),r:TT,s:e3,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ST(e){return e}var AT=Array.prototype.map,RT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function n3(e){var t=e.grouping===void 0||e.thousands===void 0?ST:ZP(AT.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?ST:WP(AT.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function g(v){v=wf(v);var E=v.fill,b=v.align,I=v.sign,M=v.symbol,N=v.zero,Y=v.width,F=v.comma,G=v.precision,q=v.trim,X=v.type;X==="n"?(F=!0,X="g"):bT[X]||(G===void 0&&(G=12),q=!0,X="g"),(N||E==="0"&&b==="=")&&(N=!0,E="0",b="=");var tt=M==="$"?n:M==="#"&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",D=M==="$"?r:/[%p]/.test(X)?c:"",R=bT[X],C=/[defgprs%]/.test(X);G=G===void 0?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function V(x){var L=tt,O=D,ne,te,Z;if(X==="c")O=R(x)+O,x="";else{x=+x;var ot=x<0||1/x<0;if(x=isNaN(x)?m:R(Math.abs(x),G),q&&(x=t3(x)),ot&&+x==0&&I!=="+"&&(ot=!1),L=(ot?I==="("?I:d:I==="-"||I==="("?"":I)+L,O=(X==="s"?RT[8+r1/3]:"")+O+(ot&&I==="("?")":""),C){for(ne=-1,te=x.length;++ne<te;)if(Z=x.charCodeAt(ne),48>Z||Z>57){O=(Z===46?a+x.slice(ne+1):x.slice(ne))+O,x=x.slice(0,ne);break}}}F&&!N&&(x=t(x,1/0));var mt=L.length+x.length+O.length,Rt=mt<Y?new Array(Y-mt+1).join(E):"";switch(F&&N&&(x=t(Rt+x,Rt.length?Y-O.length:1/0),Rt=""),b){case"<":x=L+x+O+Rt;break;case"=":x=L+Rt+x+O;break;case"^":x=Rt.slice(0,mt=Rt.length>>1)+L+x+O+Rt.slice(mt);break;default:x=Rt+L+x+O;break}return l(x)}return V.toString=function(){return v+""},V}function y(v,E){var b=g((v=wf(v),v.type="f",v)),I=Math.max(-8,Math.min(8,Math.floor(Mo(E)/3)))*3,M=Math.pow(10,-I),N=RT[8+I/3];return function(Y){return b(M*Y)+N}}return{format:g,formatPrefix:y}}var Sh,s1,a1;i3({thousands:",",grouping:[3],currency:["$",""]});function i3(e){return Sh=n3(e),s1=Sh.format,a1=Sh.formatPrefix,Sh}function r3(e){return Math.max(0,-Mo(Math.abs(e)))}function s3(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mo(t)/3)))*3-Mo(Math.abs(e)))}function a3(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mo(t)-Mo(e))+1}function Gy(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const IT=Symbol("implicit");function o1(){var e=new rT,t=[],n=[],r=IT;function a(l){let c=e.get(l);if(c===void 0){if(r!==IT)return r;e.set(l,c=t.push(l)-1)}return n[c%n.length]}return a.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new rT;for(const c of l)e.has(c)||e.set(c,t.push(c)-1);return a},a.range=function(l){return arguments.length?(n=Array.from(l),a):n.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.copy=function(){return o1(t,n).unknown(r)},Gy.apply(a,arguments),a}function l1(){var e=o1().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,l,c,d=!1,m=0,g=0,y=.5;delete e.unknown;function v(){var E=t().length,b=a<r,I=b?a:r,M=b?r:a;l=(M-I)/Math.max(1,E-m+g*2),d&&(l=Math.floor(l)),I+=(M-I-l*(E-m))*y,c=l*(1-m),d&&(I=Math.round(I),c=Math.round(c));var N=wM(E).map(function(Y){return I+l*Y});return n(b?N.reverse():N)}return e.domain=function(E){return arguments.length?(t(E),v()):t()},e.range=function(E){return arguments.length?([r,a]=E,r=+r,a=+a,v()):[r,a]},e.rangeRound=function(E){return[r,a]=E,r=+r,a=+a,d=!0,v()},e.bandwidth=function(){return c},e.step=function(){return l},e.round=function(E){return arguments.length?(d=!!E,v()):d},e.padding=function(E){return arguments.length?(m=Math.min(1,g=+E),v()):m},e.paddingInner=function(E){return arguments.length?(m=Math.min(1,E),v()):m},e.paddingOuter=function(E){return arguments.length?(g=+E,v()):g},e.align=function(E){return arguments.length?(y=Math.max(0,Math.min(1,E)),v()):y},e.copy=function(){return l1(t(),[r,a]).round(d).paddingInner(m).paddingOuter(g).align(y)},Gy.apply(v(),arguments)}function o3(e){return function(){return e}}function l3(e){return+e}var CT=[0,1];function _o(e){return e}function Ap(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:o3(isNaN(t)?NaN:.5)}function u3(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function c3(e,t,n){var r=e[0],a=e[1],l=t[0],c=t[1];return a<r?(r=Ap(a,r),l=n(c,l)):(r=Ap(r,a),l=n(l,c)),function(d){return l(r(d))}}function h3(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),l=new Array(r),c=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<r;)a[c]=Ap(e[c],e[c+1]),l[c]=n(t[c],t[c+1]);return function(d){var m=hM(e,d,1,r)-1;return l[m](a[m](d))}}function f3(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function d3(){var e=CT,t=CT,n=By,r,a,l,c=_o,d,m,g;function y(){var E=Math.min(e.length,t.length);return c!==_o&&(c=u3(e[0],e[E-1])),d=E>2?h3:c3,m=g=null,v}function v(E){return E==null||isNaN(E=+E)?l:(m||(m=d(e.map(r),t,n)))(r(c(E)))}return v.invert=function(E){return c(a((g||(g=d(t,e.map(r),Kn)))(E)))},v.domain=function(E){return arguments.length?(e=Array.from(E,l3),y()):e.slice()},v.range=function(E){return arguments.length?(t=Array.from(E),y()):t.slice()},v.rangeRound=function(E){return t=Array.from(E),n=kV,y()},v.clamp=function(E){return arguments.length?(c=E?!0:_o,y()):c!==_o},v.interpolate=function(E){return arguments.length?(n=E,y()):n},v.unknown=function(E){return arguments.length?(l=E,v):l},function(E,b){return r=E,a=b,y()}}function m3(){return d3()(_o,_o)}function g3(e,t,n,r){var a=vM(e,t,n),l;switch(r=wf(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(l=s3(a,c))&&(r.precision=l),a1(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=a3(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=r3(a))&&(r.precision=l-(r.type==="%")*2);break}}return s1(r)}function p3(e){var t=e.domain;return e.ticks=function(n){var r=t();return _M(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return g3(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,l=r.length-1,c=r[a],d=r[l],m,g,y=10;for(d<c&&(g=c,c=d,d=g,g=a,a=l,l=g);y-- >0;){if(g=pp(c,d,n),g===m)return r[a]=c,r[l]=d,t(r);if(g>0)c=Math.floor(c/g)*g,d=Math.ceil(d/g)*g;else if(g<0)c=Math.ceil(c*g)/g,d=Math.floor(d*g)/g;else break;m=g}return e},e}function u1(){var e=m3();return e.copy=function(){return f3(e,u1())},Gy.apply(e,arguments),p3(e)}function Ah(e){return function(){return e}}function y3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DT(e,t){if((c=e.length)>1)for(var n=1,r,a,l=e[t[0]],c,d=l.length;n<c;++n)for(a=l,l=e[t[n]],r=0;r<d;++r)l[r][1]+=l[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function OT(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _3(e,t){return e[t]}function v3(e){const t=[];return t.key=e,t}function E3(){var e=Ah([]),t=OT,n=DT,r=_3;function a(l){var c=Array.from(e.apply(this,arguments),v3),d,m=c.length,g=-1,y;for(const v of l)for(d=0,++g;d<m;++d)(c[d][g]=[0,+r(v,c[d].key,g,l)]).data=v;for(d=0,y=y3(t(c));d<m;++d)c[y[d]].index=d;return n(c,y),c}return a.keys=function(l){return arguments.length?(e=typeof l=="function"?l:Ah(Array.from(l)),a):e},a.value=function(l){return arguments.length?(r=typeof l=="function"?l:Ah(+l),a):r},a.order=function(l){return arguments.length?(t=l==null?OT:typeof l=="function"?l:Ah(Array.from(l)),a):t},a.offset=function(l){return arguments.length?(n=l??DT,a):n},a}function uu(e,t,n){this.k=e,this.x=t,this.y=n}uu.prototype={constructor:uu,scale:function(e){return e===1?this:new uu(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new uu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};uu.prototype;function w3(e){return e&&typeof e=="object"&&"title"in e&&"value"in e}function T3(e){return Array.isArray(e)&&e.every(w3)}const b3=({data:e,children:t,margins:n={}})=>{const r=lt.useRef(null),[a,l]=lt.useState([]),c={top:30+(n.top?n.top:0),right:30+(n.right?n.right:0),bottom:50+(n.bottom?n.bottom:0),left:50+(n.left?n.left:0)},d=500-c.left-c.right,m=400-c.top-c.bottom;return lt.useEffect(()=>{const g=l1().range([0,d]).domain(e.map(I=>I.title)).padding(.2),y=EM(e,I=>typeof I.value=="number"?I.value*1.05:typeof I.value=="object"&&I.value!==null?Object.values(I.value).reduce((M,N)=>M+(+N||0),0)*1.05:0)??0,v=u1().domain([0,y]).nice().range([m,0]),b=xp.Children.toArray(t).map(I=>{const M={};return lt.isValidElement(I)&&(M.xScaleBand=g,M.yScaleBand=v,M.data=e,M.height=m,M.width=d),lt.cloneElement(I,M)});l(b)},[t,d,m]),dt.jsx("svg",{ref:r,className:"chart",viewBox:"0 0 500 425",preserveAspectRatio:"xMidYMid meet",children:dt.jsx("g",{className:"chart-container",transform:`translate(${c.left},${c.top})`,children:a})})},S3=e=>{const t=lt.useRef(null);return lt.useEffect(()=>{if(t.current&&e.xScaleBand){const n=ua(t.current);n.selectAll("*").remove(),n.call(CM(e.xScaleBand)),n.selectAll(".tick text").attr("text-anchor","end").attr("transform","translate(-15,10)rotate(-90)"),e.label&&n.append("text").attr("text-anchor","middle").attr("transform",`translate(${e.width/2},60)`).classed("chart__x-axis__label",!0).text(e.label)}},[e.data,e.xScaleBand]),dt.jsx("g",{ref:t,className:"chart__x-axis",transform:`translate(0, ${e.height})`})},A3=e=>{const t=lt.useRef(null);return lt.useEffect(()=>{ua(t.current).classed("chart__y-axis",!0)},[]),lt.useEffect(()=>{if(t.current&&e.yScaleBand){const n=ua(t.current);n.selectAll("*").remove(),n.call(DM(e.yScaleBand)),e.label&&n.append("text").attr("text-anchor","middle").attr("transform",`translate(-60,${+e.height/2})rotate(-90)`).classed("chart__y-axis__label",!0).text(e.label)}},[e.yScaleBand]),dt.jsx("g",{ref:t})},R3=e=>{const t=lt.useRef(null);return lt.useEffect(()=>{t.current&&e.yScaleBand&&ua(t.current).selectAll("line").data(e.yScaleBand.ticks()).join("line").attr("x1",0).attr("x2",+e.width).attr("y1",n=>e.yScaleBand(n)).attr("y2",n=>e.yScaleBand(n))},[e.data,e.height,e.width,e.yScaleBand]),dt.jsx("g",{ref:t,className:"chart__grid-lines"})},I3=e=>{const t=lt.useRef(null);return lt.useEffect(()=>{t.current&&e.height&&e.data&&e.xScaleBand&&e.yScaleBand&&ua(t.current).selectAll("rect").data(e.data,n=>n.title).join(n=>n.append("rect").attr("x",r=>e.xScaleBand(r.title)).attr("width",e.xScaleBand.bandwidth()).attr("y",()=>e.yScaleBand(0)).attr("height",0).attr("fill",r=>{var a;return((a=e.groupColours)==null?void 0:a[r.title])??"#fff"}).classed("chart__barchart__bar",!0).call(r=>{r.nodes().forEach(a=>a.getBoundingClientRect()),r.attr("y",a=>e.yScaleBand(+a.value)).attr("height",a=>+e.height-e.yScaleBand(+a.value))}),n=>n.attr("x",r=>e.xScaleBand(r.title)).attr("width",e.xScaleBand.bandwidth()).attr("y",r=>e.yScaleBand(+r.value)).attr("height",r=>+e.height-e.yScaleBand(+r.value)),n=>n.remove())},[e.data,e.height,e.width,e.xScaleBand,e.yScaleBand]),dt.jsx("g",{ref:t})};function C3(e){const t=new Set;for(const n of e)typeof n.value=="object"&&n.value!==null&&Object.keys(n.value).forEach(r=>t.add(r));return e.map(n=>{const r={title:n.title};for(const a of t)r[a]=n.value&&typeof n.value=="object"?n.value[a]??0:0;return r})}const D3=e=>{const t=lt.useRef(null);return lt.useEffect(()=>{if(t.current&&e.height&&e.data&&e.xScaleBand&&e.yScaleBand){const n=C3(e.data),r=Object.keys(n[0]).filter(m=>m!=="title"),l=E3().keys(r)(n);ua(t.current).selectAll("g.layer").data(l,m=>m.key).join(m=>m.append("g").attr("class","layer"),m=>m,m=>m.remove()).each(function(m){var E;const g=m.key,y=((E=e.groupColours)==null?void 0:E[g])??"#fff";ua(this).selectAll("rect").data(m,b=>b.data.title).join(b=>b.append("rect").attr("x",I=>e.xScaleBand(String(I.data.title))??0).attr("width",e.xScaleBand.bandwidth()).attr("y",e.yScaleBand(0)).attr("height",0).classed("chart__barchart__bar",!0).attr("fill",y).call(I=>{I.nodes().forEach(M=>M.getBoundingClientRect()),I.transition().duration(750).attr("y",M=>e.yScaleBand(M[1])).attr("height",M=>e.yScaleBand(M[0])-e.yScaleBand(M[1]))}),b=>b.transition().duration(750).attr("x",I=>e.xScaleBand(String(I.data.title))??0).attr("width",e.xScaleBand.bandwidth()).attr("y",I=>e.yScaleBand(I[1])).attr("height",I=>e.yScaleBand(I[0])-e.yScaleBand(I[1])),b=>b.transition().duration(750).attr("y",e.yScaleBand(0)).attr("height",0).remove())})}},[e.data,e.height,e.width,e.xScaleBand,e.yScaleBand]),dt.jsx("g",{ref:t})},O3=e=>{const t=e.data.default;if(!t)return console.warn("Default datasource not set",e.data),null;if(!T3(t))throw new Error("Datasource does not contain GraphData");const n=t;return dt.jsxs(b3,{data:n,margins:{left:e.yAxisLabel?20:0,bottom:e.xAxisLabel?20:0},children:[dt.jsx(S3,{label:e.xAxisLabel}),dt.jsx(A3,{label:e.yAxisLabel}),dt.jsx(R3,{}),n.find(r=>typeof r.value=="object"&&r.value!==null)?dt.jsx(D3,{groupColours:{groceries:"#a8d5ba",rent:"#f7c8c8",pets:"#fce4b5",entertainment:"#cbb4d4",transport:"#bcdffb",utilities:"#f9d6ac",toys:"#b3e3dc"}}):dt.jsx(I3,{groupColours:{groceries:"#a8d5ba",rent:"#f7c8c8",pets:"#fce4b5",entertainment:"#cbb4d4",transport:"#bcdffb",utilities:"#f9d6ac",toys:"#b3e3dc"}})]})},N3=e=>dt.jsxs("div",{className:"input","data-hasvalue":e.value&&e.value!="",children:[dt.jsx("label",{htmlFor:e.id,children:e.id}),dt.jsx("input",{name:e.id,type:"text",value:e.value?e.value:"",onChange:t=>e.onInputChange(e.id,t.target.value)})]}),x3=e=>dt.jsxs("div",{className:"input","data-hasvalue":e.value&&e.value!="",children:[dt.jsx("label",{htmlFor:e.id,children:e.id}),dt.jsx("input",{name:e.id,type:"number",step:".01",value:e.value?e.value:"",onChange:t=>e.onInputChange(e.id,t.target.value)})]}),c1=e=>me.fromDate(e),k3=e=>{console.log("date update",e);const t=new Date(e);return c1(t)},M3=e=>e?e.toDate().toISOString().slice(0,16):"",V3=e=>(lt.useEffect(()=>{e.onInputChange(e.id,c1(new Date))},[]),dt.jsxs("div",{className:"input","data-hasvalue":e.value&&e.value!="",children:[dt.jsx("label",{htmlFor:e.id,children:e.id}),dt.jsx("input",{name:e.id,type:"datetime-local",value:M3(e.value),onChange:t=>e.onInputChange(e.id,k3(t.target.value))})]})),P3=e=>dt.jsxs("div",{className:"input","data-hasvalue":e.value&&e.value!="",children:[dt.jsx("label",{htmlFor:e.id,children:e.id}),dt.jsxs("select",{name:e.id,value:e.value?e.value:"",onChange:t=>e.onInputChange(e.id,t.target.value),children:[dt.jsx("option",{value:""},"empty"),e.options&&e.options.map(t=>dt.jsx("option",{value:t.value,children:t.title},t.title))]})]});function h1(e){return e&&typeof e=="object"&&"insert"in e}const U3={text:N3,number:x3,select:P3,datetime:V3},L3=e=>{const t=e.data.default;if(!t)throw new Error("Default datasource not set");if(!h1(t))throw new Error("Datasource not a query");const n=t,[r,a]=lt.useState({}),l=(d,m)=>{a(g=>({...g,[d]:m}))},c=d=>{d.preventDefault(),e.insert(r),a({})};return dt.jsx("div",{className:"input-form",children:dt.jsxs("form",{className:"input-form__form",onSubmit:c,autoComplete:"off",children:[n.insert&&Object.entries(n.insert).map(([d,m])=>{const g=U3[m.type],y=m.type=="select"&&m.datasource?e.data[m.datasource]:null;return dt.jsx(g,{id:d,onInputChange:l,options:y,value:r[d]},d)}),dt.jsx("button",{type:"submit",children:"Submit"})]})})},NT=["jan","feb","mar","apr","may","jun","jul","aug","sept","oct","nov","dec"],z3={barchart:O3,input:L3};function B3(e,t){const[n,r]=lt.useState(),[a,l]=lt.useState();lt.useEffect(()=>{I(),b();const M=setInterval(()=>{E("default").then(N=>{N&&l(Y=>({...Y,default:N}))})},3e4);return()=>clearInterval(M)},[]);async function c(M){if(!yi.currentUser)return Promise.reject(new Error("Not authenticated"));const Y=await Pw(M);if(Y.exists()){const F=Y.get("componentLayoutRef"),G=await Pw(F);if(G.exists()){const q={id:G.id,...G.data()},X=nr(F,"components"),tt=await ea(X),D=[];return tt.empty||tt.docs.map(R=>D.push({id:R.id,...R.data()})),q.components=D,q}else console.error(`No component layout found with ref: ${F.path}`)}else console.error(`No widgets found with ref: ${e.dbRef}`)}function d(M,N){const Y=M[N.field];if(N.field==="timestamp"&&Y instanceof me){const F=Y.toDate();if(N.granularity==="month")return F.toLocaleString("default",{month:"short"})}return Y}function m(M,N){if(N.granularity==="month"){const Y=Object.entries(M).sort(([F],[G])=>NT.indexOf(F.toLowerCase())-NT.indexOf(G.toLocaleLowerCase()));return Object.fromEntries(Y)}return M}function g(M,N){if(N.groupBy===void 0||N.target===void 0)return M;const Y=N.groupBy,F=N.target,G=M.reduce((X,tt)=>{const D=d(tt,Y);if(Y.then){const R=Array.isArray(X[D])&&X[D].length>0?[...X[D],tt]:[tt];X[D]=R}else{const R=tt[F],C=isNaN(+R)?R:+R;X[D]=X[D]?X[D]+C:C}return X},{}),q=m(G,N.groupBy);if(N.groupBy.then){const X=N.groupBy.then;Object.entries(q).forEach(([tt,D])=>{Array.isArray(D)&&(q[tt]=g(D,{...N,groupBy:X}))})}return q}async function y(M,N){if(!yi.currentUser)return Promise.reject(new Error("Not authenticated"));if(!M||!N)return Promise.reject();const F=nr(M,N.collection),G=await ea(F);if(!G.empty){const q=G.docs.map(D=>D.data()),X=g(q,N);return Object.entries(X).map(([D,R])=>({title:D,value:R}))}}function v(M){if(!yi.currentUser)return Promise.reject(new Error("Not authenticated"));const{datasource:Y,datasourceQuery:F}=e.datasources.default;if(!Y||!F)return Promise.reject();const G=crypto.randomUUID(),q=Gr(Y,F.collection,G);hp(q,M,{merge:!0}).then(()=>{}).catch(X=>{throw X})}async function E(M){if(!e.datasources||!(M in e.datasources))return;const{datasource:N,datasourceQuery:Y}=e.datasources[M];if(N&&Y){if(Y.groupBy&&Y.target)return await y(N,Y);if(h1(Y))return Y;console.warn(`Widget ${e.id} has an invalid datasource: ${M}`)}else console.warn(`No datasource defined for widget ${e.id} with name: ${M}`)}function b(){if(e.datasources)for(const M of Object.keys(e.datasources))E(M).then(N=>{N?l(Y=>({...Y,[M]:N})):console.warn(`Widget ${e.id} has an invalid datasource: ${M}`)})}function I(M=!0){e.dbRef&&(M&&(t==null||t({isLoading:!0,message:"Loading widget component layout"})),c(e.dbRef).then(N=>N?r(N):null).finally(()=>{M&&(t==null||t({isLoading:!1}))}))}return{widgetComponentLayout:n,widgetData:a,insertIntoWidgetDatasource:v}}function j3(e=!0,t){const n=PS(),[r,a]=lt.useState([]);lt.useEffect(()=>{e&&d()},[]);async function l(m){const g=nr(n,"widgets",m,"component-layouts"),y=await ea(g);if(!y.empty)return Promise.all(y.docs.map(async v=>{const E=nr(g,v.id,"components"),b=await ea(E),I=b.empty?[]:b.docs.map(M=>({id:M.id,...M.data()}));return{id:v.id,widgetComponentDefinitions:I,...v.data()}}))}async function c(){if(!yi.currentUser)return Promise.reject(new Error("Not authenticated"));const g=nr(n,"widgets"),y=await ea(g);if(!y.empty)return Promise.all(y.docs.map(async v=>{const E=await l(v.id);return{type:v.id,widgetComponentLayoutDefinitions:E||[],...v.data()}}))}function d(){t==null||t({isLoading:!0,message:"Loading widget definitions"}),c().then(m=>m?a(m):null).finally(()=>t==null?void 0:t({isLoading:!1}))}return{loadWidgetDefinitions:d,widgetDefinitions:r}}const f1=e=>{const t=lt.useRef(null);return dt.jsxs(dt.Fragment,{children:[dt.jsx("div",{className:"loading-bar",children:dt.jsx("div",{ref:t,className:"loading-bar__fill"})}),e.message&&dt.jsx("div",{className:"loading-bar__message",children:e.message})]})},H3=e=>`${e.type}-${e.position.colStart}-${e.position.rowStart}-${e.position.colEnd}-${e.position.rowEnd}`,xT=e=>{const[t,n]=lt.useState({isLoading:!!e.isLoading}),r=lt.useMemo(()=>{var g,y,v;return(g=e.isLoading)!=null&&g.isLoading&&((y=e.isLoading)!=null&&y.message)?{isLoading:!0,message:(v=e.isLoading)==null?void 0:v.message}:t},[t,e.isLoading]),{widgetComponentLayout:a,widgetData:l,insertIntoWidgetDatasource:c}=B3(e,n),{loadWidgetDefinitions:d,widgetDefinitions:m}=j3(!1,n);return lt.useEffect(()=>{e.unsaved&&e.onSave&&(!m||m.length===0)&&d()},[]),dt.jsxs("div",{className:"widget-grid__widget","data-unsaved":e.unsaved,style:{gridArea:`${e.position.colStart} / ${e.position.rowStart} / ${e.position.colEnd} / ${e.position.rowEnd}`},children:[(e.unsaved||e.editMode)&&dt.jsx("button",{className:"close-button",onClick:()=>{var g;return((g=e.removeItem)==null?void 0:g.call(e,e.id))??void 0},children:"x"}),r.isLoading?dt.jsx("div",{className:"widget__loading",children:dt.jsx(f1,{message:r.message})}):e.unsaved&&e.onSave&&m&&m.length>0?dt.jsx(aM,{widgetDefinitions:m,widgetPosition:e.position,onSave:e.onSave}):a!=null&&a.columns&&(a!=null&&a.rows)?dt.jsx(DA,{ItemComponent:iT,columns:a==null?void 0:a.columns,rows:a==null?void 0:a.rows,onSaveGridItem:()=>{},placerMode:"NONE",children:a.components.map(g=>{const y=z3[g.type];return dt.jsx(iT,{position:g.position,children:dt.jsx(y,{data:l,insert:c,...g.props})},g.id)})}):null]})},q3=()=>{const[e,t]=lt.useState(!0),[n,r]=lt.useState(null),{loading:a}=iM(r),{activeLayout:l,saveWidget:c,deleteWidget:d}=nM(t,r);return n?dt.jsx("div",{className:"page-status",children:n}):a||e?dt.jsx("div",{className:"page-status",children:dt.jsx(f1,{message:"Loading Layout"})}):dt.jsx("div",{className:"dashboard",children:l&&dt.jsx(DA,{ItemComponent:xT,columns:l.columns,rows:l.rows,onSaveGridItem:m=>{c(l.id,m)},children:l.widgets.map(m=>dt.jsx(xT,{...m,removeItem:g=>g?d(l.id,g):null,editMode:!0,dbRef:m.dbRef,children:m.type},H3(m)))})})},F3=()=>{const{loginWithRedirect:e}=zp();return dt.jsx("button",{onClick:()=>e(),children:"Log In"})};function G3(){const{isAuthenticated:e,isLoading:t}=zp();return t?"Loading...":e?dt.jsx(q3,{}):dt.jsx(F3,{})}var kg={exports:{}},Mg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function K3(){if(kT)return Mg;kT=1;var e=If();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return Mg.useSyncExternalStoreWithSelector=function(m,g,y,v,E){var b=a(null);if(b.current===null){var I={hasValue:!1,value:null};b.current=I}else I=b.current;b=c(function(){function N(X){if(!Y){if(Y=!0,F=X,X=v(X),E!==void 0&&I.hasValue){var tt=I.value;if(E(tt,X))return G=tt}return G=X}if(tt=G,n(F,X))return tt;var D=v(X);return E!==void 0&&E(tt,D)?(F=X,tt):(F=X,G=D)}var Y=!1,F,G,q=y===void 0?null:y;return[function(){return N(g())},q===null?void 0:function(){return N(q())}]},[g,y,v,E]);var M=r(m,b[0],b[1]);return l(function(){I.hasValue=!0,I.value=M},[M]),d(M),M},Mg}var MT;function $3(){return MT||(MT=1,kg.exports=K3()),kg.exports}$3();function Y3(e){e()}function X3(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Y3(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!r||e===null||(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var VT={notify(){},get:()=>[]};function Q3(e,t){let n,r=VT,a=0,l=!1;function c(M){y();const N=r.subscribe(M);let Y=!1;return()=>{Y||(Y=!0,N(),v())}}function d(){r.notify()}function m(){I.onStateChange&&I.onStateChange()}function g(){return l}function y(){a++,n||(n=e.subscribe(m),r=X3())}function v(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=VT)}function E(){l||(l=!0,y())}function b(){l&&(l=!1,v())}const I={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:g,trySubscribe:E,tryUnsubscribe:b,getListeners:()=>r};return I}var Z3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W3=Z3(),J3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",t6=J3(),e6=()=>W3||t6?lt.useLayoutEffect:lt.useEffect,n6=e6(),Vg=Symbol.for("react-redux-context"),Pg=typeof globalThis<"u"?globalThis:{};function i6(){if(!lt.createContext)return{};const e=Pg[Vg]??(Pg[Vg]=new Map);let t=e.get(lt.createContext);return t||(t=lt.createContext(null),e.set(lt.createContext,t)),t}var r6=i6();function s6(e){const{children:t,context:n,serverState:r,store:a}=e,l=lt.useMemo(()=>{const m=Q3(a);return{store:a,subscription:m,getServerState:r?()=>r:void 0}},[a,r]),c=lt.useMemo(()=>a.getState(),[a]);n6(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const d=n||r6;return lt.createElement(d.Provider,{value:l},t)}var a6=s6;function je(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o6=typeof Symbol=="function"&&Symbol.observable||"@@observable",PT=o6,Ug=()=>Math.random().toString(36).substring(7).split("").join("."),l6={INIT:`@@redux/INIT${Ug()}`,REPLACE:`@@redux/REPLACE${Ug()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ug()}`},Tf=l6;function Ky(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function d1(e,t,n){if(typeof e!="function")throw new Error(je(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(je(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(je(1));return n(d1)(e,t)}let r=e,a=t,l=new Map,c=l,d=0,m=!1;function g(){c===l&&(c=new Map,l.forEach((N,Y)=>{c.set(Y,N)}))}function y(){if(m)throw new Error(je(3));return a}function v(N){if(typeof N!="function")throw new Error(je(4));if(m)throw new Error(je(5));let Y=!0;g();const F=d++;return c.set(F,N),function(){if(Y){if(m)throw new Error(je(6));Y=!1,g(),c.delete(F),l=null}}}function E(N){if(!Ky(N))throw new Error(je(7));if(typeof N.type>"u")throw new Error(je(8));if(typeof N.type!="string")throw new Error(je(17));if(m)throw new Error(je(9));try{m=!0,a=r(a,N)}finally{m=!1}return(l=c).forEach(F=>{F()}),N}function b(N){if(typeof N!="function")throw new Error(je(10));r=N,E({type:Tf.REPLACE})}function I(){const N=v;return{subscribe(Y){if(typeof Y!="object"||Y===null)throw new Error(je(11));function F(){const q=Y;q.next&&q.next(y())}return F(),{unsubscribe:N(F)}},[PT](){return this}}}return E({type:Tf.INIT}),{dispatch:E,subscribe:v,getState:y,replaceReducer:b,[PT]:I}}function u6(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Tf.INIT})>"u")throw new Error(je(12));if(typeof n(void 0,{type:Tf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(je(13))})}function c6(e){const t=Object.keys(e),n={};for(let l=0;l<t.length;l++){const c=t[l];typeof e[c]=="function"&&(n[c]=e[c])}const r=Object.keys(n);let a;try{u6(n)}catch(l){a=l}return function(c={},d){if(a)throw a;let m=!1;const g={};for(let y=0;y<r.length;y++){const v=r[y],E=n[v],b=c[v],I=E(b,d);if(typeof I>"u")throw d&&d.type,new Error(je(14));g[v]=I,m=m||I!==b}return m=m||r.length!==Object.keys(c).length,m?g:c}}function bf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function h6(...e){return t=>(n,r)=>{const a=t(n,r);let l=()=>{throw new Error(je(15))};const c={getState:a.getState,dispatch:(m,...g)=>l(m,...g)},d=e.map(m=>m(c));return l=bf(...d)(a.dispatch),{...a,dispatch:l}}}function f6(e){return Ky(e)&&"type"in e&&typeof e.type=="string"}var m1=Symbol.for("immer-nothing"),UT=Symbol.for("immer-draftable"),Sn=Symbol.for("immer-state");function Yn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Vo=Object.getPrototypeOf;function fa(e){return!!e&&!!e[Sn]}function mr(e){var t;return e?g1(e)||Array.isArray(e)||!!e[UT]||!!((t=e.constructor)!=null&&t[UT])||id(e)||rd(e):!1}var d6=Object.prototype.constructor.toString();function g1(e){if(!e||typeof e!="object")return!1;const t=Vo(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===d6}function Sf(e,t){nd(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function nd(e){const t=e[Sn];return t?t.type_:Array.isArray(e)?1:id(e)?2:rd(e)?3:0}function Rp(e,t){return nd(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function p1(e,t,n){const r=nd(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function m6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function id(e){return e instanceof Map}function rd(e){return e instanceof Set}function Qs(e){return e.copy_||e.base_}function Ip(e,t){if(id(e))return new Map(e);if(rd(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=g1(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Sn];let a=Reflect.ownKeys(r);for(let l=0;l<a.length;l++){const c=a[l],d=r[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[c]})}return Object.create(Vo(e),r)}else{const r=Vo(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function $y(e,t=!1){return sd(e)||fa(e)||!mr(e)||(nd(e)>1&&(e.set=e.add=e.clear=e.delete=g6),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>$y(r,!0))),e}function g6(){Yn(2)}function sd(e){return Object.isFrozen(e)}var p6={};function da(e){const t=p6[e];return t||Yn(0,e),t}var Du;function y1(){return Du}function y6(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LT(e,t){t&&(da("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cp(e){Dp(e),e.drafts_.forEach(_6),e.drafts_=null}function Dp(e){e===Du&&(Du=e.parent_)}function zT(e){return Du=y6(Du,e)}function _6(e){const t=e[Sn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function BT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Sn].modified_&&(Cp(t),Yn(4)),mr(e)&&(e=Af(t,e),t.parent_||Rf(t,e)),t.patches_&&da("Patches").generateReplacementPatches_(n[Sn].base_,e,t.patches_,t.inversePatches_)):e=Af(t,n,[]),Cp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==m1?e:void 0}function Af(e,t,n){if(sd(t))return t;const r=t[Sn];if(!r)return Sf(t,(a,l)=>jT(e,r,t,a,l,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Rf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let l=a,c=!1;r.type_===3&&(l=new Set(a),a.clear(),c=!0),Sf(l,(d,m)=>jT(e,r,a,d,m,n,c)),Rf(e,a,!1),n&&e.patches_&&da("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function jT(e,t,n,r,a,l,c){if(fa(a)){const d=l&&t&&t.type_!==3&&!Rp(t.assigned_,r)?l.concat(r):void 0,m=Af(e,a,d);if(p1(n,r,m),fa(m))e.canAutoFreeze_=!1;else return}else c&&n.add(a);if(mr(a)&&!sd(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Af(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Rf(e,a)}}function Rf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$y(t,n)}function v6(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:y1(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,l=Yy;n&&(a=[r],l=Ou);const{revoke:c,proxy:d}=Proxy.revocable(a,l);return r.draft_=d,r.revoke_=c,d}var Yy={get(e,t){if(t===Sn)return e;const n=Qs(e);if(!Rp(n,t))return E6(e,n,t);const r=n[t];return e.finalized_||!mr(r)?r:r===Lg(e.base_,t)?(zg(e),e.copy_[t]=Np(r,e)):r},has(e,t){return t in Qs(e)},ownKeys(e){return Reflect.ownKeys(Qs(e))},set(e,t,n){const r=_1(Qs(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=Lg(Qs(e),t),l=a==null?void 0:a[Sn];if(l&&l.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(m6(n,a)&&(n!==void 0||Rp(e.base_,t)))return!0;zg(e),Op(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Lg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,zg(e),Op(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Qs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Yn(11)},getPrototypeOf(e){return Vo(e.base_)},setPrototypeOf(){Yn(12)}},Ou={};Sf(Yy,(e,t)=>{Ou[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ou.deleteProperty=function(e,t){return Ou.set.call(this,e,t,void 0)};Ou.set=function(e,t,n){return Yy.set.call(this,e[0],t,n,e[0])};function Lg(e,t){const n=e[Sn];return(n?Qs(n):e)[t]}function E6(e,t,n){var a;const r=_1(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function _1(e,t){if(!(t in e))return;let n=Vo(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Vo(n)}}function Op(e){e.modified_||(e.modified_=!0,e.parent_&&Op(e.parent_))}function zg(e){e.copy_||(e.copy_=Ip(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var w6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const l=n;n=t;const c=this;return function(m=l,...g){return c.produce(m,y=>n.call(this,y,...g))}}typeof n!="function"&&Yn(6),r!==void 0&&typeof r!="function"&&Yn(7);let a;if(mr(t)){const l=zT(this),c=Np(t,void 0);let d=!0;try{a=n(c),d=!1}finally{d?Cp(l):Dp(l)}return LT(l,r),BT(a,l)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===m1&&(a=void 0),this.autoFreeze_&&$y(a,!0),r){const l=[],c=[];da("Patches").generateReplacementPatches_(t,a,l,c),r(l,c)}return a}else Yn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...d)=>this.produceWithPatches(c,m=>t(m,...d));let r,a;return[this.produce(t,n,(c,d)=>{r=c,a=d}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mr(e)||Yn(8),fa(e)&&(e=T6(e));const t=zT(this),n=Np(e,void 0);return n[Sn].isManual_=!0,Dp(t),n}finishDraft(e,t){const n=e&&e[Sn];(!n||!n.isManual_)&&Yn(9);const{scope_:r}=n;return LT(r,t),BT(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=da("Patches").applyPatches_;return fa(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Np(e,t){const n=id(e)?da("MapSet").proxyMap_(e,t):rd(e)?da("MapSet").proxySet_(e,t):v6(e,t);return(t?t.scope_:y1()).drafts_.push(n),n}function T6(e){return fa(e)||Yn(10,e),v1(e)}function v1(e){if(!mr(e)||sd(e))return e;const t=e[Sn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ip(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ip(e,!0);return Sf(n,(r,a)=>{p1(n,r,v1(a))}),t&&(t.finalized_=!1),n}var An=new w6,E1=An.produce;An.produceWithPatches.bind(An);An.setAutoFreeze.bind(An);An.setUseStrictShallowCopy.bind(An);An.applyPatches.bind(An);An.createDraft.bind(An);An.finishDraft.bind(An);function w1(e){return({dispatch:n,getState:r})=>a=>l=>typeof l=="function"?l(n,r,e):a(l)}var b6=w1(),S6=w1,A6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bf:bf.apply(null,arguments)};function HT(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(ar(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>f6(r)&&r.type===e,n}var T1=class cu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,cu.prototype)}static get[Symbol.species](){return cu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new cu(...t[0].concat(this)):new cu(...t.concat(this))}};function qT(e){return mr(e)?E1(e,()=>{}):e}function Rh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function R6(e){return typeof e=="boolean"}var I6=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=t??{};let c=new T1;return n&&(R6(n)?c.push(b6):c.push(S6(n.extraArgument))),c},C6="RTK_autoBatch",FT=e=>t=>{setTimeout(t,e)},D6=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,l=!1,c=!1;const d=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:FT(10):e.type==="callback"?e.queueNotification:FT(e.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(y=>y()))};return Object.assign({},r,{subscribe(y){const v=()=>a&&y(),E=r.subscribe(v);return d.add(y),()=>{E(),d.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[C6]),l=!a,l&&(c||(c=!0,m(g))),r.dispatch(y)}finally{a=!0}}})},O6=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new T1(e);return r&&a.push(D6(typeof r=="object"?r:void 0)),a};function N6(e){const t=I6(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Ky(n))d=c6(n);else throw new Error(ar(1));let m;typeof r=="function"?m=r(t):m=t();let g=bf;a&&(g=A6({trace:!1,...typeof a=="object"&&a}));const y=h6(...m),v=O6(y);let E=typeof c=="function"?c(v):v();const b=g(...E);return d1(d,l,b)}function b1(e){const t={},n=[];let r;const a={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ar(28));if(d in t)throw new Error(ar(29));return t[d]=c,a},addMatcher(l,c){return n.push({matcher:l,reducer:c}),a},addDefaultCase(l){return r=l,a}};return e(a),[t,n,r]}function x6(e){return typeof e=="function"}function k6(e,t){let[n,r,a]=b1(t),l;if(x6(e))l=()=>qT(e());else{const d=qT(e);l=()=>d}function c(d=l(),m){let g=[n[m.type],...r.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return g.filter(y=>!!y).length===0&&(g=[a]),g.reduce((y,v)=>{if(v)if(fa(y)){const b=v(y,m);return b===void 0?y:b}else{if(mr(y))return E1(y,E=>v(E,m));{const E=v(y,m);if(E===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return E}}return y},d)}return c.getInitialState=l,c}var M6=Symbol.for("rtk-slice-createasyncthunk");function V6(e,t){return`${e}/${t}`}function P6({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[M6];return function(a){const{name:l,reducerPath:c=l}=a;if(!l)throw new Error(ar(11));const d=(typeof a.reducers=="function"?a.reducers(z6()):a.reducers)||{},m=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(q,X){const tt=typeof q=="string"?q:q.type;if(!tt)throw new Error(ar(12));if(tt in g.sliceCaseReducersByType)throw new Error(ar(13));return g.sliceCaseReducersByType[tt]=X,y},addMatcher(q,X){return g.sliceMatchers.push({matcher:q,reducer:X}),y},exposeAction(q,X){return g.actionCreators[q]=X,y},exposeCaseReducer(q,X){return g.sliceCaseReducersByName[q]=X,y}};m.forEach(q=>{const X=d[q],tt={reducerName:q,type:V6(l,q),createNotation:typeof a.reducers=="function"};j6(X)?q6(tt,X,y,t):B6(tt,X,y)});function v(){const[q={},X=[],tt=void 0]=typeof a.extraReducers=="function"?b1(a.extraReducers):[a.extraReducers],D={...q,...g.sliceCaseReducersByType};return k6(a.initialState,R=>{for(let C in D)R.addCase(C,D[C]);for(let C of g.sliceMatchers)R.addMatcher(C.matcher,C.reducer);for(let C of X)R.addMatcher(C.matcher,C.reducer);tt&&R.addDefaultCase(tt)})}const E=q=>q,b=new Map,I=new WeakMap;let M;function N(q,X){return M||(M=v()),M(q,X)}function Y(){return M||(M=v()),M.getInitialState()}function F(q,X=!1){function tt(R){let C=R[q];return typeof C>"u"&&X&&(C=Rh(I,tt,Y)),C}function D(R=E){const C=Rh(b,X,()=>new WeakMap);return Rh(C,R,()=>{const V={};for(const[x,L]of Object.entries(a.selectors??{}))V[x]=U6(L,R,()=>Rh(I,R,Y),X);return V})}return{reducerPath:q,getSelectors:D,get selectors(){return D(tt)},selectSlice:tt}}const G={name:l,reducer:N,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:Y,...F(c),injectInto(q,{reducerPath:X,...tt}={}){const D=X??c;return q.inject({reducerPath:D,reducer:N},tt),{...G,...F(D,!0)}}};return G}}function U6(e,t,n,r){function a(l,...c){let d=t(l);return typeof d>"u"&&r&&(d=n()),e(d,...c)}return a.unwrapped=e,a}var L6=P6();function z6(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function B6({type:e,reducerName:t,createNotation:n},r,a){let l,c;if("reducer"in r){if(n&&!H6(r))throw new Error(ar(17));l=r.reducer,c=r.prepare}else l=r;a.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,c?HT(e,c):HT(e))}function j6(e){return e._reducerDefinitionType==="asyncThunk"}function H6(e){return e._reducerDefinitionType==="reducerWithPrepare"}function q6({type:e,reducerName:t},n,r,a){if(!a)throw new Error(ar(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:m,settled:g,options:y}=n,v=a(e,l,y);r.exposeAction(t,v),c&&r.addCase(v.fulfilled,c),d&&r.addCase(v.pending,d),m&&r.addCase(v.rejected,m),g&&r.addMatcher(v.settled,g),r.exposeCaseReducer(t,{fulfilled:c||Ih,pending:d||Ih,rejected:m||Ih,settled:g||Ih})}function Ih(){}function ar(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const F6={isDragging:!1,selectedFillers:[],unsavedWidget:null,occupiedPositions:[]},G6=L6({name:"widget",initialState:F6,reducers:{setIsDragging(e,t){e.isDragging=t.payload},setSelected(e,t){e.selectedFillers=t.payload},setUnsavedWidget(e,t){e.unsavedWidget=t.payload},setOccupiedPositions(e,t){e.occupiedPositions=t.payload}}}),K6=G6.reducer,$6=N6({reducer:{widget:K6}});rI.createRoot(document.getElementById("root")).render(dt.jsx(VI,{domain:"dev-g4ors5whpl8izfzj.eu.auth0.com",clientId:"HlNxH7PrJSEiegWDPJ8aVLFOCV8lU3Zy",authorizationParams:{redirect_uri:window.location.origin,audience:"https://dashboard.nuan.dev/api"},children:dt.jsx(a6,{store:$6,children:dt.jsx(G3,{})})}));
